
## Java ç›¸å…³

### zookeeperï¼ˆzkï¼‰

é«˜å¯ç”¨HA(High Availability)æ˜¯**åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„**è®¾è®¡ä¸­å¿…é¡»è€ƒè™‘çš„å› ç´ ä¹‹ä¸€,æˆç†Ÿçš„æ¶æ„å¤§éƒ¨åˆ†éƒ½è‡ªå¸¦é«˜å¯ç”¨å®ç°ï¼Œåªéœ€é…ç½®å³å¯ï¼Œä¾‹å¦‚**åŸºäºzookeeperçš„stormã€sparkï¼Œkafka**ï¼ŒåŸºäºæ•°æ®åº“çš„quartzï¼ˆTerracottaä¸è€ƒè™‘ï¼‰ç­‰ç­‰ã€‚å¾ˆå¤šç»„ä»¶éƒ½åŸºäºzookeeperï¼Œzookeeperä¹Ÿæˆä¸ºäº†åç«¯äººå‘˜å¿…ä¿®åŠŸè¯¾ä¹‹ä¸€ã€‚

zkæœ¬èº«å°±æ˜¯ä¸€ä¸ªæœåŠ¡ç«¯ï¼Œå®ƒè·Ÿå®¢æˆ·ç«¯ç›´æ¥å°±æ˜¯ä¸€ä¸ªé•¿é“¾æ¥ï¼ˆtcpï¼‰ï¼Œé€šè¿‡çš„2181çš„ç«¯å£ã€‚åˆ†å¸ƒå¼æœ‰å¤šä¸ªzkï¼Œå®ƒä»¬ä¹‹é—´çš„é€šä¿¡æ˜¯é€šè¿‡2188ï¼Œå¦‚æœç½‘ç»œæŠ–åŠ¨çš„è¯2888ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚

- é…ç½®ç®¡ç†ï¼Œå¾ˆå¤šæœåŠ¡çš„é…ç½®ç»Ÿä¸€åè°ƒç®¡ç†
- åå­—æœåŠ¡ï¼Œå¾ˆå¤šæœåŠ¡ä¹‹é—´çš„å¯»å€
- åˆ†å¸ƒå¼é”ï¼Œé˜²æ­¢å¹¶å‘
- é›†ç¾¤ç®¡ç†ï¼ŒèŠ‚ç‚¹é€€å‡ºåŠæ–°å¢çš„é›†ç¾¤ç®¡ç†

[æ›´å¤šå‚è€ƒ](https://www.cnblogs.com/ultranms/p/9585191.html)

### dubbo

Dubboæ˜¯ï¼š

- ä¸€æ¬¾åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶
- è‡´åŠ›äºæä¾›é«˜æ€§èƒ½å’Œé€æ˜åŒ–çš„RPCè¿œç¨‹æœåŠ¡è°ƒç”¨æ–¹æ¡ˆ
- SOAæœåŠ¡æ²»ç†æ–¹æ¡ˆ

Dubboæ˜¯ä¸€æ¬¾é«˜æ€§èƒ½çš„Java RPCæ¡†æ¶ã€‚å…¶å‰èº«æ˜¯é˜¿é‡Œå·´å·´å…¬å¸å¼€æºçš„ä¸€ä¸ªé«˜æ€§èƒ½ã€è½»é‡çº§çš„å¼€æºJava RPCæ¡†æ¶ï¼Œå¯ä»¥å’ŒSpringæ¡†æ¶æ— ç¼é›†æˆã€‚

Dubboé‡‡ç”¨å…¨Springé…ç½®æ–¹å¼ï¼Œé€æ˜åŒ–æ¥å…¥åº”ç”¨ï¼Œå¯¹åº”ç”¨æ²¡æœ‰ä»»ä½•APIä¾µå…¥ï¼Œåªéœ€ç”¨SpringåŠ è½½Dubboçš„é…ç½®å³å¯ï¼ŒDubboåŸºäºSpringçš„Schemaæ‰©å±•è¿›è¡ŒåŠ è½½ã€‚

ç®€å•çš„è¯´ï¼Œdubboå°±æ˜¯ä¸ªæœåŠ¡æ¡†æ¶ï¼Œå¦‚æœæ²¡æœ‰åˆ†å¸ƒå¼çš„éœ€æ±‚ï¼Œå…¶å®æ˜¯ä¸éœ€è¦ç”¨çš„ï¼Œåªæœ‰åœ¨åˆ†å¸ƒå¼çš„æ—¶å€™ï¼Œæ‰æœ‰dubboè¿™æ ·çš„åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶çš„éœ€æ±‚ï¼Œå¹¶ä¸”æœ¬è´¨ä¸Šæ˜¯ä¸ªæœåŠ¡è°ƒç”¨çš„ä¸œä¸œï¼Œè¯´ç™½äº†å°±æ˜¯ä¸ªè¿œç¨‹æœåŠ¡è°ƒç”¨çš„åˆ†å¸ƒå¼æ¡†æ¶ï¼ˆå‘Šåˆ«Web Serviceæ¨¡å¼ä¸­çš„WSdlï¼Œä»¥æœåŠ¡è€…ä¸æ¶ˆè´¹è€…çš„æ–¹å¼åœ¨dubboä¸Šæ³¨å†Œï¼‰

RPCå…¨ç§°ä¸ºremote procedure callï¼Œå³è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚æ¯”å¦‚ä¸¤å°æœåŠ¡å™¨Aå’ŒBï¼ŒAæœåŠ¡å™¨ä¸Šéƒ¨ç½²ä¸€ä¸ªåº”ç”¨ï¼ŒBæœåŠ¡å™¨ä¸Šéƒ¨ç½²ä¸€ä¸ªåº”ç”¨ï¼ŒAæœåŠ¡å™¨ä¸Šçš„åº”ç”¨æƒ³è°ƒç”¨BæœåŠ¡å™¨ä¸Šçš„åº”ç”¨æä¾›çš„æ–¹æ³•ï¼Œç”±äºä¸¤ä¸ªåº”ç”¨ä¸åœ¨ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œä¸èƒ½ç›´æ¥è°ƒç”¨ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ç½‘ç»œæ¥è¡¨è¾¾è°ƒç”¨çš„è¯­ä¹‰å’Œä¼ è¾¾è°ƒç”¨çš„æ•°æ®ã€‚

Dubboæä¾›äº†ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›ï¼šé¢å‘æ¥å£çš„è¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼Œæ™ºèƒ½å®¹é”™å’Œè´Ÿè½½å‡è¡¡ï¼Œä»¥åŠæœåŠ¡è‡ªåŠ¨æ³¨å†Œå’Œå‘ç°ã€‚

RPCæ˜¯ä¸€ä¸ªæ³›åŒ–çš„æ¦‚å¿µï¼Œä¸¥æ ¼æ¥è¯´ä¸€åˆ‡è¿œç¨‹è¿‡ç¨‹è°ƒç”¨æ‰‹æ®µéƒ½å±äºRPCèŒƒç•´ã€‚å„ç§å¼€å‘è¯­è¨€éƒ½æœ‰è‡ªå·±çš„RPCæ¡†æ¶ã€‚Javaä¸­çš„RPCæ¡†æ¶æ¯”è¾ƒå¤šï¼Œå¹¿æ³›ä½¿ç”¨çš„æœ‰RMIã€Hessianã€Dubboç­‰ã€‚

### SOA 

é¢å‘æœåŠ¡æ¶æ„ï¼ˆSOAï¼‰æ˜¯ä¸€ä¸ªç»„ä»¶æ¨¡å‹ï¼Œå®ƒå°†åº”ç”¨ç¨‹åºçš„ä¸åŒåŠŸèƒ½å•å…ƒï¼ˆç§°ä¸ºæœåŠ¡ï¼‰è¿›è¡Œæ‹†åˆ†ï¼Œå¹¶é€šè¿‡è¿™äº›æœåŠ¡ä¹‹é—´å®šä¹‰è‰¯å¥½çš„æ¥å£å’Œåè®®è”ç³»èµ·æ¥ã€‚æ¥å£æ˜¯é‡‡ç”¨ä¸­ç«‹çš„æ–¹å¼è¿›è¡Œå®šä¹‰çš„ï¼Œå®ƒåº”è¯¥ç‹¬ç«‹äºå®ç°æœåŠ¡çš„ç¡¬ä»¶å¹³å°ã€æ“ä½œç³»ç»Ÿå’Œç¼–ç¨‹è¯­è¨€ã€‚è¿™ä½¿å¾—æ„å»ºåœ¨å„ç§å„æ ·çš„ç³»ç»Ÿä¸­çš„æœåŠ¡å¯ä»¥ä»¥ä¸€ç§ç»Ÿä¸€å’Œé€šç”¨çš„æ–¹å¼è¿›è¡Œäº¤äº’ã€‚

### SOPæ ‡å‡†ä½œä¸šç¨‹åº

â€œSOPä¸€èˆ¬æŒ‡æ ‡å‡†ä½œä¸šç¨‹åºã€‚æ‰€è°“SOPï¼Œæ˜¯ Standard Operating Procedureä¸‰ä¸ªå•è¯ä¸­é¦–å­—æ¯çš„å¤§å†™ ï¼Œå³æ ‡å‡†ä½œä¸šç¨‹åºï¼ŒæŒ‡å°†æŸä¸€äº‹ä»¶çš„æ ‡å‡†æ“ä½œæ­¥éª¤å’Œè¦æ±‚ä»¥ç»Ÿä¸€çš„æ ¼å¼æè¿°å‡ºæ¥ï¼Œç”¨äºæŒ‡å¯¼å’Œè§„èŒƒæ—¥å¸¸çš„å·¥ä½œã€‚

## Dart æ¦‚è§ˆ

Dart æ˜¯ä¸€ç§é’ˆå¯¹å®¢æˆ·ä¼˜åŒ–çš„è¯­è¨€ï¼Œå¯åœ¨ä»»ä½•å¹³å°ä¸Šå¼€å‘å¿«é€Ÿçš„åº”ç”¨ç¨‹åºã€‚å…¶ç›®æ ‡æ˜¯ä¸ºå¤šå¹³å°å¼€å‘æä¾›æœ€é«˜æ•ˆçš„ç¼–ç¨‹è¯­è¨€ï¼Œå¹¶ä¸ºåº”ç”¨ç¨‹åºæ¡†æ¶æ­é…äº† çµæ´»çš„è¿è¡Œæ—¶æ‰§è¡Œå¹³å°ã€‚

é€šå¸¸æ¥è¯´ï¼Œç¼–ç¨‹è¯­è¨€ä¼šåŒ…å«ä¸€äº› æŠ€æœ¯å£å’ï¼Œå³è¯­è¨€åœ¨è®¾è®¡ä¸­çš„æŠ‰æ‹©å†³å®šäº†å…¶åŠŸèƒ½å’Œä¼˜åŠ¿ã€‚ Dart çš„è¯­è¨€è®¾è®¡é’ˆå¯¹å®¢æˆ·ç«¯å¼€å‘ï¼Œå®ƒä¼˜å…ˆè€ƒè™‘å¤šå¹³å° (Webï¼Œç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯) ä¸Šçš„å¼€å‘ (äºšç§’çº§çš„çŠ¶æ€çƒ­é‡è½½) å’Œé«˜è´¨é‡ç”Ÿäº§ç¯å¢ƒä½“éªŒã€‚

Dart ä¹Ÿæ˜¯ Flutter çš„åŸºç¡€ã€‚ Dart ä½œä¸º Flutter åº”ç”¨ç¨‹åºçš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸ºé©±åŠ¨åº”ç”¨è¿è¡Œæä¾›äº†ç¯å¢ƒï¼ŒåŒæ—¶ Dart è¿˜æ”¯æŒè®¸å¤šæ ¸å¿ƒçš„å¼€å‘ä»»åŠ¡ï¼Œä¾‹å¦‚æ ¼å¼åŒ–ï¼Œåˆ†æå’Œä»£ç æµ‹è¯•ã€‚

Dart è¯­è¨€æ˜¯ç±»å‹å®‰å…¨çš„ï¼›å®ƒä½¿ç”¨é™æ€ç±»å‹æ£€æŸ¥æ¥ç¡®ä¿å˜é‡çš„å€¼ å§‹ç»ˆ ä¸å˜é‡çš„é™æ€ç±»å‹ç›¸åŒ¹é…ã€‚

Flutter è‡ªç»˜æ¸²æŸ“æŠ€æœ¯çš„å·¥ä½œåŸç†å¦‚ä¸‹ï¼š

1. åº•å±‚æ¡†æ¶é€šè¿‡ Skia å›¾å½¢åº“ç»˜åˆ¶è‡ªå·±çš„ UI å…ƒç´ ã€‚
2. åº•å±‚æ¡†æ¶å°† Skia ç»˜åˆ¶çš„å†…å®¹ç”Ÿæˆä½å›¾æ•°æ®ï¼Œå¹¶ä½¿ç”¨æŒ‡é’ˆå°†ä½å›¾æ•°æ®ä¼ é€’ç»™ Dart VMã€‚
3. Dart VM å°†ä½å›¾æ•°æ®è½¬æ¢ä¸º Image ç±»å‹ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ Flutter å¼•æ“ã€‚
4. Flutter å¼•æ“å°† Image å¯¹è±¡ç»˜åˆ¶åœ¨å±å¹•ä¸Šã€‚

Skia æ˜¯ä¸€ä¸ªå¼€æºçš„ 2D å›¾å½¢åº“ï¼Œç”± Google å¼€å‘å’Œç»´æŠ¤ï¼Œä¸»è¦ç”¨äºç§»åŠ¨è®¾å¤‡ã€æ¡Œé¢åº”ç”¨ç¨‹åºå’Œ Web æµè§ˆå™¨ã€‚å…¶å·¥ä½œåŸç†å¦‚ä¸‹ï¼š

1. Skia åº“æä¾›äº†ä¸€ç³»åˆ—ç»˜åˆ¶åŸºå…ƒï¼Œä¾‹å¦‚çŸ©å½¢ã€åœ†å½¢ã€çº¿æ¡å’Œæ›²çº¿ç­‰ã€‚è¿™äº›åŸºå…ƒè¢«å°è£…åœ¨ Path å¯¹è±¡ä¸­ã€‚
2. å¼€å‘è€…ä½¿ç”¨ Skia çš„ API æ¥åˆ›å»ºå’Œæ“ä½œè¿™äº› Path å¯¹è±¡ï¼Œç„¶åå°†å®ƒä»¬æ¸²æŸ“åˆ°ç”»å¸ƒä¸Šã€‚
3. Skia ä½¿ç”¨äº†ä¸€äº›ä¼˜åŒ–æŠ€æœ¯ï¼Œä¾‹å¦‚ GPU åŠ é€Ÿã€å¤šçº¿ç¨‹æ¸²æŸ“å’Œé¢œè‰²è¿‡æ»¤ç­‰ï¼Œæ¥æé«˜æ¸²æŸ“çš„æ€§èƒ½å’Œè´¨é‡ã€‚
4. Skia æ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼ï¼Œä¾‹å¦‚ä½å›¾ã€PDF å’Œ SVG ç­‰ï¼Œå¯ä»¥æ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„éœ€æ±‚ã€‚

Skia æ˜¯ä¸€ä¸ªçŸ¢é‡ç»˜å›¾å¼•æ“ï¼Œå¯ä»¥å°†çŸ¢é‡å›¾æ¸²æŸ“åˆ°å„ç§ç”»å¸ƒä¸Šï¼Œæ¯”å¦‚å±å¹•ã€å›¾ç‰‡ã€PDF æ–‡æ¡£ç­‰ç­‰ã€‚åœ¨ Flutter ä¸­ï¼ŒSkia è¢«ç”¨æ¥å°† Widget æ ‘è½¬æ¢æˆæœ€ç»ˆçš„åƒç´ è¾“å‡ºï¼Œå¹¶å¯ä»¥å°†æ¸²æŸ“çš„å†…å®¹ç»˜åˆ¶åˆ° Skia ä¸­çš„å„ç§ç”»å¸ƒä¸Šï¼Œæ¯”å¦‚ç”¨äºæ˜¾ç¤º UI çš„å±å¹•ï¼Œæˆ–è€…ç”¨äºä¿å­˜å›¾ç‰‡çš„ Bitmapã€‚è€Œåœ¨ Web ä¸­ï¼ŒSkia è¢«ç”¨äºå°† Flutter Web åº”ç”¨ä¸­çš„æ¸²æŸ“ç»“æœè½¬æ¢æˆ HTML å…ƒç´ ï¼Œä»è€Œåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºå‡ºæ¥ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒFlutter å’Œ Skia å¹¶ä¸ä½¿ç”¨æµè§ˆå™¨åŸç”Ÿçš„ Canvas APIï¼Œè€Œæ˜¯ä½¿ç”¨äº†è‡ªå·±çš„ä¸€å¥—ç»˜å›¾æ–¹æ¡ˆ

åœ¨ Dart VM ä¸­ï¼Œä½å›¾æ•°æ®å¯ä»¥ä½¿ç”¨ dart:ui åŒ…ä¸­çš„ decodeImageFromPixels å‡½æ•°è½¬æ¢ä¸º Image ç±»å‹ã€‚è¿™ä¸ªå‡½æ•°æ¥å—å››ä¸ªå‚æ•°ï¼šä½å›¾æ•°æ®çš„æŒ‡é’ˆã€æ•°æ®å®½åº¦ã€æ•°æ®é«˜åº¦å’Œé¢œè‰²é€šé“æ ¼å¼ã€‚å®ƒè¿”å›ä¸€ä¸ª Image å¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥ç”¨äºç»˜åˆ¶åˆ°å±å¹•ä¸Šã€‚

decodeImageFromPixels å‡½æ•°ä¼šå°†ä½å›¾æ•°æ®è§£ç ä¸ºä¸€ä¸ª RGBA æ ¼å¼çš„åƒç´ æ•°ç»„ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª Image å¯¹è±¡å¹¶å°†åƒç´ æ•°ç»„ä½œä¸ºå®ƒçš„æ•°æ®ã€‚ç”±äº Image å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤ä¸€æ—¦åˆ›å»ºå®Œæˆï¼Œå°±ä¸èƒ½å†ä¿®æ”¹å®ƒçš„åƒç´ æ•°æ®äº†ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬å¯ä»¥å°† Image å¯¹è±¡ä¼ é€’ç»™ç»˜å›¾ API çš„å‡½æ•°ï¼Œç„¶åé€šè¿‡è¯¥å‡½æ•°åœ¨å±å¹•ä¸Šæ˜¾ç¤ºå›¾ç‰‡ã€‚

Dart VM æ˜¯ä¸€ä¸ªè§£é‡Šå™¨ï¼Œå®ƒæ˜¯ Dart è¯­è¨€çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ Dart ç¨‹åºã€‚å®ƒåŒ…å«äº† Dart è¯­è¨€çš„è§£æå™¨ã€JIT ç¼–è¯‘å™¨ã€åƒåœ¾å›æ”¶å™¨ç­‰ç»„ä»¶ï¼Œç”¨äºè§£é‡Šå’Œæ‰§è¡Œ Dart ä»£ç ã€‚

Flutter å¼•æ“æ˜¯ä¸€ä¸ªåŸºäº Dart è¯­è¨€çš„ UI æ¡†æ¶ï¼Œå®ƒæ˜¯ç”± Dart VM é©±åŠ¨çš„ã€‚Flutter å¼•æ“ä½¿ç”¨ Dart è¯­è¨€ç¼–å†™ï¼ŒåŒ…å«äº†å¤§é‡ç”¨äºæ„å»ºå’Œæ¸²æŸ“åº”ç”¨ç¨‹åº UI çš„ç»„ä»¶å’Œå·¥å…·ã€‚Flutter å¼•æ“åŒ…å«äº†ä¸€å¥—ç°ä»£åŒ–çš„æ¸²æŸ“å¼•æ“ï¼Œå¯ä»¥é«˜æ•ˆåœ°æ¸²æŸ“ 2D å’Œ 3D å›¾å½¢ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†ä¸€å¥—é«˜æ•ˆçš„å¸ƒå±€å’Œç»˜åˆ¶ç³»ç»Ÿã€‚Flutter å¼•æ“è¿˜åŒ…å«äº†ä¸€äº›å…¶ä»–çš„ç»„ä»¶ï¼Œä¾‹å¦‚è°ƒè¯•å·¥å…·ã€è·¯ç”±ç³»ç»Ÿã€åŠ¨ç”»æ¡†æ¶ç­‰ã€‚

å› æ­¤ï¼ŒDart VM æ˜¯ Flutter å¼•æ“çš„ä¸€éƒ¨åˆ†ï¼Œè´Ÿè´£è§£é‡Šå’Œæ‰§è¡Œ Dart ä»£ç ï¼›Flutter å¼•æ“æ˜¯ä¸€ä¸ªåŸºäº Dart è¯­è¨€çš„ UI æ¡†æ¶ï¼ŒåŒ…å«äº†ç”¨äºæ„å»ºå’Œæ¸²æŸ“åº”ç”¨ç¨‹åº UI çš„ç»„ä»¶å’Œå·¥å…·ï¼Œä»¥åŠä¸€äº›å…¶ä»–çš„ç»„ä»¶ã€‚

## åŸºäºFlutter çš„ Web æ¸²æŸ“å¼•æ“ã€ŒåŒ—æµ· Kraken ã€æŠ€æœ¯åŸç†

Flutter çš„ Web æ¸²æŸ“å¼•æ“ã€ŒåŒ—æµ· Krakenã€æ˜¯ç”±é˜¿é‡Œå·´å·´ Ant Design è®¾è®¡å›¢é˜Ÿå¼€å‘çš„ï¼Œå®ƒåŸºäº WebAssembly æŠ€æœ¯å®ç°äº† Flutter åœ¨æµè§ˆå™¨ç«¯çš„è¿è¡Œã€‚Kraken å¼•æ“çš„å®ç°åŸç†å¦‚ä¸‹ï¼š

WebAssembly æŠ€æœ¯
Kraken å¼•æ“çš„å®ç°åŸºäº WebAssembly æŠ€æœ¯ï¼ŒWebAssembly æ˜¯ä¸€ç§å¯ä»¥åœ¨æµè§ˆå™¨ç«¯è¿è¡Œçš„ä½çº§å­—èŠ‚ç æ ¼å¼ï¼Œå®ƒå¯ä»¥å°†é«˜çº§è¯­è¨€ç¼–è¯‘æˆæœºå™¨ç ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œå¯ä»¥è·å¾—æ¥è¿‘åŸç”Ÿçš„æ€§èƒ½ã€‚

Flutter ä¸ Skia
Flutter æ˜¯ä¸€ä¸ªåŸºäº Skia å›¾å½¢åº“çš„ UI æ¡†æ¶ï¼ŒSkia æ˜¯ä¸€ä¸ªç”± Google å¼€å‘çš„ 2D å›¾å½¢åº“ï¼Œå®ƒå¯ä»¥åœ¨å„ç§å¹³å°ä¸Šç»˜åˆ¶çŸ¢é‡å›¾å½¢å’Œä½å›¾ï¼ŒåŒ…æ‹¬ Androidã€iOSã€Windowsã€macOS ç­‰ã€‚å…¶å®skiaä¹Ÿæ˜¯å°è£…çš„ç³»ç»Ÿçš„èƒ½åŠ›ã€‚

é€šè¿‡ WebAssembly è½¬æ¢æˆæœºå™¨ç 
Kraken å¼•æ“å°† Dart ä»£ç ç¼–è¯‘æˆ WebAssembly å­—èŠ‚ç ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œ WebAssembly å­—èŠ‚ç ï¼Œå¹¶é€šè¿‡ Skia åº“å°† Flutter UI ç»˜åˆ¶æˆä½å›¾æˆ–çŸ¢é‡å›¾å½¢ã€‚

ä¸æµè§ˆå™¨äº¤äº’
Kraken å¼•æ“è¿˜éœ€è¦ä¸æµè§ˆå™¨è¿›è¡Œäº¤äº’ï¼ŒåŒ…æ‹¬å¤„ç† DOM äº‹ä»¶ã€å¤„ç†ç½‘ç»œè¯·æ±‚ç­‰ã€‚Kraken å¼•æ“é€šè¿‡ JavaScript å’Œ Dart çš„äº’ç›¸è°ƒç”¨ï¼Œå®ç°ä¸æµè§ˆå™¨çš„äº¤äº’ã€‚

ç»¼ä¸Šï¼ŒKraken å¼•æ“çš„å®ç°åŸºäº WebAssembly æŠ€æœ¯ï¼Œé€šè¿‡å°† Dart ä»£ç ç¼–è¯‘æˆ WebAssembly å­—èŠ‚ç ï¼Œå¹¶é€šè¿‡ Skia åº“å°† Flutter UI ç»˜åˆ¶æˆä½å›¾æˆ–çŸ¢é‡å›¾å½¢ï¼Œæœ€ç»ˆå®ç°åœ¨æµè§ˆå™¨ç«¯è¿è¡Œ Flutter åº”ç”¨ã€‚

## WebAssembly
WebAssembly æ˜¯ä¸€ç§ä½çº§å­—èŠ‚ç æ ¼å¼ï¼Œæ—¨åœ¨æä¾›é«˜æ€§èƒ½ã€ä½å¼€é”€çš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ Web åº”ç”¨ç¨‹åºèƒ½å¤Ÿåœ¨å„ç§ä¸åŒçš„ç¯å¢ƒä¸­è¿è¡Œã€‚WebAssembly çš„åŸç†ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š

1. ç¼–å†™ä»£ç ï¼šé¦–å…ˆéœ€è¦ä½¿ç”¨æ”¯æŒ WebAssembly çš„è¯­è¨€ç¼–å†™ä»£ç ï¼Œä¾‹å¦‚ Cã€C++ã€Rustã€Go ç­‰ã€‚ä»£ç éœ€è¦è¢«ç¼–è¯‘ä¸º WebAssembly å­—èŠ‚ç ï¼Œè¿™é€šå¸¸ä½¿ç”¨ç‰¹å®šçš„ç¼–è¯‘å™¨æ¥å®Œæˆã€‚

2. åŠ è½½æ¨¡å—ï¼šå°† WebAssembly å­—èŠ‚ç æ–‡ä»¶åŠ è½½åˆ°æµè§ˆå™¨ä¸­ã€‚å¯ä»¥ä½¿ç”¨ JavaScript æ¥åŠ è½½å’Œå®ä¾‹åŒ–æ¨¡å—ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚

3. å®ä¾‹åŒ–æ¨¡å—ï¼šä½¿ç”¨ WebAssembly å®ä¾‹åŒ–æ¨¡å—ï¼Œå¹¶åœ¨ JavaScript ä¸­åˆ›å»ºä¸€ä¸ªå¤–éƒ¨ç•Œé¢ã€‚è¿™ä¸ªç•Œé¢å°†å…è®¸ JavaScript ä¸ WebAssembly äº¤äº’ï¼Œå¹¶ä¸”å¯ä»¥ä» JavaScript ä¸­è°ƒç”¨ WebAssembly å‡½æ•°ã€‚

4. è¿è¡Œä»£ç ï¼šWebAssembly æ¨¡å—ä¸­çš„å‡½æ•°å¯ä»¥é€šè¿‡ JavaScript ä»£ç è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ WebAssembly æ¨¡å—è‡ªèº«è°ƒç”¨ã€‚WebAssembly æ¨¡å—ä¸­çš„å‡½æ•°æ‰§è¡Œå®Œæˆåï¼Œå¯ä»¥å°†ç»“æœè¿”å›åˆ° JavaScript ä¸­ã€‚

æ€»ä½“æ¥è¯´ï¼ŒWebAssembly çš„è¿è¡ŒåŸç†æ˜¯å°†ç¼–å†™å¥½çš„ä»£ç ç¼–è¯‘æˆå­—èŠ‚ç ï¼Œå¹¶åœ¨æµè§ˆå™¨ä¸­å®ä¾‹åŒ–å’Œæ‰§è¡Œè¿™äº›å­—èŠ‚ç ï¼Œä»è€Œå®ç°é«˜æ•ˆçš„è·¨å¹³å°åº”ç”¨ç¨‹åºã€‚

**JavaScript æœ¬èº«ä¸å¯ä»¥ç›´æ¥ç¼–è¯‘ä¸º WebAssembly**ï¼Œä½†å¯ä»¥é€šè¿‡å°†å…¶ä»–è¯­è¨€ç¼–è¯‘ä¸º WebAssembly æ¨¡å—ï¼Œç„¶ååœ¨ JavaScript ä¸­è°ƒç”¨è¿™äº›æ¨¡å—æ¥å®ç°ã€‚ä¾‹å¦‚ï¼ŒC/C++ã€Rustã€Go ç­‰è¯­è¨€éƒ½å¯ä»¥ç¼–è¯‘ä¸º WebAssemblyã€‚æ­¤å¤–ï¼Œä¸€äº›ç¼–ç¨‹è¯­è¨€çš„ç¼–è¯‘å™¨å·²ç»é›†æˆäº†å¯¹ WebAssembly çš„æ”¯æŒï¼Œå¦‚ AssemblyScriptï¼Œå®ƒæ˜¯ä¸€ç§ç±»ä¼¼ TypeScript çš„è¯­è¨€ï¼Œå¯ä»¥ç›´æ¥ç¼–è¯‘ä¸º WebAssemblyã€‚



ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ Rust ç¼–å†™çš„ WebAssembly çš„ä¾‹å­ï¼Œå¹¶åœ¨ JavaScript ä¸­è°ƒç”¨å®ƒã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®‰è£… Rust å’Œ wasm-pack å·¥å…·ï¼Œè¿™å¯ä»¥é€šè¿‡ Rust å®˜ç½‘å’Œ wasm-pack å®˜ç½‘è¿›è¡Œä¸‹è½½å’Œå®‰è£…ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Rust é¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨ cargo new --lib å‘½ä»¤æ¥åˆ›å»ºï¼š

`cargo new --lib rust-wasm-demo`
ç„¶åï¼Œæˆ‘ä»¬è¿›å…¥åˆ°é¡¹ç›®ç›®å½•å¹¶åˆå§‹åŒ– wasm-packï¼š

`cd rust-wasm-demo`
`wasm-pack init --scope your_username`
å…¶ä¸­ your_username æ˜¯ä½ çš„ npm ç”¨æˆ·åï¼Œè¿™ä¸€æ­¥ä¼šç”Ÿæˆä¸€ä¸ªé»˜è®¤çš„ lib.rs æ–‡ä»¶å’Œ Cargo.toml æ–‡ä»¶ã€‚

æ¥ç€ï¼Œæˆ‘ä»¬åœ¨ lib.rs æ–‡ä»¶ä¸­å†™ä¸‹ä»¥ä¸‹ä»£ç ï¼š


```rust
#[no_mangle]
pub fn add(a: i32, b: i32) -> i32 {
    return a + b;
}
```
è¿™ä¸ªå‡½æ•°éå¸¸ç®€å•ï¼Œå®ƒæ¥å—ä¸¤ä¸ªæ•´æ•°å¹¶å°†å®ƒä»¬ç›¸åŠ ï¼Œè¿”å›å®ƒä»¬çš„å’Œã€‚#[no_mangle] æ˜¯ä¸€ä¸ªå±æ€§ï¼Œå‘Šè¯‰ Rust ç¼–è¯‘å™¨ä¸è¦å¯¹å‡½æ•°åè¿›è¡Œé‡å‘½åï¼Œè¿™æ · JavaScript å°±å¯ä»¥è®¿é—®å®ƒäº†ã€‚

ç„¶åï¼Œåœ¨ Cargo.toml æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š


```rust
[lib]
crate-type = ["cdylib"]
```
è¿™ä¼šå‘Šè¯‰ Rust ç¼–è¯‘å™¨ç”Ÿæˆä¸€ä¸ªåŠ¨æ€é“¾æ¥åº“ï¼Œä»¥ä¾¿å¯ä»¥åœ¨ JavaScript ä¸­ä½¿ç”¨å®ƒã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æ„å»º WebAssembly æ¨¡å—ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

`wasm-pack build --target web`
è¿™å°†æ„å»º WebAssembly æ¨¡å—å¹¶ç”Ÿæˆä¸€ä¸ª JavaScript åŒ…è£…å™¨ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨è¯¥åŒ…è£…å™¨ï¼Œå› æ­¤å¯ä»¥åˆ é™¤ pkg ç›®å½•ã€‚

æœ€åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ JavaScript ä¸­ä½¿ç”¨è¯¥æ¨¡å—ã€‚åˆ›å»ºä¸€ä¸ªåä¸º index.html çš„æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š


```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Rust + WebAssembly Demo</title>
    <script>
      fetch('rust_wasm_demo_bg.wasm')
        .then(response => response.arrayBuffer())
        .then(bytes => WebAssembly.instantiate(bytes))
        .then(obj => {
          const add = obj.instance.exports.add;
          const result = add(1, 2);
          console.log(`Result: ${result}`);
        })
        .catch(console.error);
    </script>
  </head>
  <body>
    <h1>Rust + WebAssembly Demo</h1>
  </body>
</html>
```

è¿™ä¸ªæ–‡ä»¶éå¸¸ç®€å•ï¼Œå®ƒåŠ è½½äº† WebAssembly æ¨¡å—å¹¶åœ¨ JavaScript ä¸­è°ƒç”¨ add å‡½æ•°ã€‚åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€è¯¥æ–‡ä»¶å¹¶æ‰“å¼€æ§åˆ¶å°ï¼Œå°±å¯ä»¥çœ‹åˆ°è¾“å‡ºäº†ç»“æœ 3ã€‚

è¿™å°±æ˜¯ä½¿ç”¨ Rust ç¼–å†™ WebAssembly å¹¶åœ¨ JavaScript ä¸­è°ƒç”¨çš„åŸºæœ¬æµç¨‹ã€‚

## rupy

Rubyæ˜¯ä¸€ç§åŠ¨æ€ã€é¢å‘å¯¹è±¡ã€é€šç”¨çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒå…·æœ‰ç®€æ´çš„è¯­æ³•ã€ä¼˜é›…çš„é£æ ¼å’Œä¸°å¯Œçš„åº“ã€‚Rubyçš„ä½œè€…æ˜¯æ¾æœ¬è¡Œå¼˜ï¼ˆYukihiro Matsumotoï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸ºMatzï¼Œæœ€åˆæ˜¯åœ¨20ä¸–çºª90å¹´ä»£å¼€å‘çš„ã€‚å®ƒè¢«å¹¿æ³›åº”ç”¨äºWebå¼€å‘ã€è„šæœ¬ç¼–å†™ã€è‡ªåŠ¨åŒ–ã€æ•°æ®åˆ†æç­‰é¢†åŸŸã€‚Rubyçš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬æ˜“äºå­¦ä¹ ã€å¼€å‘æ•ˆç‡é«˜ã€ä»£ç å¯è¯»æ€§å¥½ã€å…·æœ‰è‡ªç”±åº¦é«˜çš„è¯­è¨€ç‰¹æ€§ç­‰ã€‚

ruby on rails ä»€ä¹ˆæ„æ€ï¼Ÿ
Ruby on Railsï¼Œä¹Ÿç®€ç§° Railsï¼Œæ˜¯ä¸€ä¸ªä½¿ç”¨ Ruby ç¼–ç¨‹è¯­è¨€å†™çš„å¼€æº Web åº”ç”¨ç¨‹åºæ¡†æ¶ã€‚å®ƒéµå¾ªäº† Model-View-Controllerï¼ˆMVCï¼‰çš„è®¾è®¡æ¨¡å¼ï¼Œæä¾›äº†ä¸€ç§ç®€å•å¿«æ·çš„æ–¹å¼æ¥å¼€å‘æ•°æ®åº“é©±åŠ¨çš„ Web åº”ç”¨ç¨‹åºã€‚Ruby on Rails æ¡†æ¶çš„ä¸»è¦ç›®æ ‡æ˜¯å¼€å‘é«˜æ•ˆä¸”æ˜“ç»´æŠ¤çš„ Web åº”ç”¨ç¨‹åºï¼Œæé«˜å¼€å‘æ•ˆç‡å’Œå¼€å‘è€…çš„ç”Ÿäº§åŠ›ã€‚

## cpp

Cpp æ˜¯ä¸€ç§é€šç”¨çš„ã€é™æ€ç±»å‹çš„ã€æ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹ã€æ”¯æŒæ³›å‹ç¼–ç¨‹çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ˜¯ C è¯­è¨€çš„ä¸€ç§è¶…é›†ã€‚C++ è¯­è¨€ç”± Bjarne Stroustrup åœ¨ 1983 å¹´æ‰€åˆ›é€ ï¼Œæ—¨åœ¨æ‰©å…… C è¯­è¨€çš„åŠŸèƒ½å¹¶æä¾›é¢å‘å¯¹è±¡çš„ç¼–ç¨‹èƒ½åŠ›ï¼Œä¹Ÿæ˜¯å½“å‰åº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€ã€‚C++ è¯­è¨€å¯ä»¥åœ¨æ“ä½œç³»ç»Ÿã€åµŒå…¥å¼ç³»ç»Ÿã€æœåŠ¡å™¨ã€æ¸¸æˆå¼€å‘ã€å›¾å½¢å¤„ç†ã€ç§‘å­¦è®¡ç®—ç­‰é¢†åŸŸå¾—åˆ°å¹¿æ³›åº”ç”¨ã€‚

C++æ˜¯C++ programming languageçš„ç®€ç§°ï¼Œè€Œcppåˆ™æ˜¯C++æ–‡ä»¶çš„æ–‡ä»¶æ‰©å±•åï¼Œä¸¤è€…éƒ½æŒ‡ä»£åŒä¸€ä¸ªç¼–ç¨‹è¯­è¨€ã€‚

## go

goè¯­è¨€ï¼ˆæˆ– Golangï¼‰æ˜¯Googleå¼€å‘çš„å¼€æºç¼–ç¨‹è¯­è¨€ï¼Œè¯ç”Ÿäº2006å¹´1æœˆ2æ—¥ä¸‹åˆ15ç‚¹4åˆ†5ç§’ï¼Œäº2009å¹´11æœˆå¼€æºï¼Œ2012å¹´å‘å¸ƒgoç¨³å®šç‰ˆã€‚Goè¯­è¨€åœ¨å¤šæ ¸å¹¶å‘ä¸Šæ‹¥æœ‰åŸç”Ÿçš„è®¾è®¡ä¼˜åŠ¿ï¼ŒGoè¯­è¨€ä»åº•å±‚åŸç”Ÿæ”¯æŒå¹¶å‘ï¼Œæ— é¡»ç¬¬ä¸‰æ–¹åº“ã€å¼€å‘è€…çš„ç¼–ç¨‹æŠ€å·§å’Œå¼€å‘ç»éªŒã€‚

goæ˜¯éå¸¸å¹´è½»çš„ä¸€é—¨è¯­è¨€ï¼Œå®ƒçš„ä¸»è¦ç›®æ ‡æ˜¯â€œå…¼å…·Python ç­‰åŠ¨æ€è¯­è¨€çš„å¼€å‘é€Ÿåº¦å’ŒC/C++ç­‰ç¼–è¯‘å‹è¯­è¨€çš„æ€§èƒ½ä¸å®‰å…¨æ€§â€

Go å’Œ Rust éƒ½å±äºä¼˜å…ˆè€ƒè™‘å†…å­˜å®‰å…¨æ€§çš„ç°ä»£ç¼–ç¨‹è¯­è¨€ã€‚æ•°åå¹´æ¥ï¼Œä½¿ç”¨ C å’Œ C++ ç­‰è¾ƒæ—§çš„è¯­è¨€å·²ç»å¾ˆæ¸…æ¥šï¼Œå¯¼è‡´é”™è¯¯å’Œå®‰å…¨æ¼æ´çš„æœ€å¤§åŸå› ä¹‹ä¸€æ˜¯ä¸å®‰å…¨æˆ–ä¸æ­£ç¡®åœ°è®¿é—®å†…å­˜ã€‚

Goè¯­è¨€çš„å¹¶å‘æ˜¯åŸºäº goroutine çš„ï¼Œgoroutine ç±»ä¼¼äºçº¿ç¨‹ï¼Œä½†å¹¶éçº¿ç¨‹ã€‚å¯ä»¥å°† goroutine ç†è§£ä¸ºä¸€ç§è™šæ‹Ÿçº¿ç¨‹ã€‚

Go è¢«ç›´æ¥ç¼–è¯‘æˆæœºå™¨ç ï¼Œè¿™å°±æ˜¯å®ƒé€Ÿåº¦çš„æ¥æºã€‚ä½¿ç”¨ç¼–è¯‘è¯­è¨€è°ƒè¯•æ˜¯ç›¸å½“å®¹æ˜“çš„ï¼Œå› ä¸ºä½ å¯ä»¥åœ¨æ—©æœŸæ•è·å¤§é‡é”™è¯¯ã€‚Go ä¹Ÿæ˜¯ä¸€ç§å¼ºç±»å‹çš„è¯­è¨€ï¼Œå®ƒæœ‰åŠ©äºæ•°æ®å®Œæ•´ï¼Œå¹¶å¯ä»¥åœ¨ç¼–è¯‘æ—¶æŸ¥æ‰¾ç±»å‹é”™è¯¯ã€‚

Node æ˜¯ä¸€æ¬¾åŸºäº Google V8 è™šæ‹Ÿæœºçš„ JavaScript è¿è¡Œåº“ï¼Œè¿™ä½¿å®ƒæˆä¸ºä¸€ä¸ªè½»é‡å’Œå¿«é€Ÿçš„ Web å¼€å‘å¹³å°ã€‚

ä½œä¸ºåŸæ¥çš„ JavaScript å¼€å‘è€…ï¼ŒGo ç®€å•å’Œç›´è§‚çš„è¯­æ³•å¾ˆå¸å¼•æˆ‘ã€‚ç”±äº**ä¸¤ç§è¯­è¨€çš„è¯­æ³•å¯ä»¥è¯´éƒ½æ˜¯ä» C è¯­è¨€æ¼”å˜è€Œæ¥çš„**ï¼Œæ‰€ä»¥å®ƒä»¬çš„è¯­æ³•æœ‰å¾ˆå¤šç›¸åŒä¹‹å¤„ã€‚

å› ä¸ºå®ƒçš„éé˜»å¡å¼‚æ­¥ I/Oï¼ŒNode ç»å¸¸è¢«è®¤ä¸ºæ˜¯é«˜æ€§èƒ½çš„è¯­è¨€ã€‚å¦å¤–ï¼Œæ­£å¦‚æˆ‘ä¹‹å‰æåˆ°çš„ï¼ŒNode è¿è¡Œåœ¨é’ˆå¯¹åŠ¨æ€è¯­è¨€è¿›è¡Œäº†ä¼˜åŒ–çš„ Google V8 å¼•æ“ä¸Šã€‚è€Œ Go çš„è®¾è®¡ä¹Ÿè€ƒè™‘åˆ°é€Ÿåº¦ã€‚Google çš„å¼€å‘è€…ä»¬é€šè¿‡å»ºç«‹äº†ä¸€ä¸ªâ€œå……æ»¡è¡¨ç°åŠ›è€Œè½»é‡çº§çš„ç±»å‹ç³»ç»Ÿï¼›å¹¶å‘å’Œåƒåœ¾å›æ”¶æœºåˆ¶ï¼›å¼ºåˆ¶åœ°æŒ‡å®šä¾èµ–ç‰ˆæœ¬ç­‰ç­‰â€ï¼Œè¾¾æˆäº†è¿™ä¸€ç›®æ ‡ã€‚

è¦æ¸…æ¥šï¼Œæ€§èƒ½ä¸æ˜¯é€‰æ‹©ç¼–ç¨‹è¯­è¨€éœ€è¦è€ƒè™‘çš„å…¨éƒ¨å†…å®¹ã€‚å¦‚æœæ‚¨çš„åº”ç”¨ä¸éœ€è¦å¤„ç†å¤§é‡æ•°æ®ï¼Œé‚£ä¹ˆ Node å’Œ Go ä¹‹é—´çš„æ€§èƒ½å·®å¼‚å¯èƒ½æ˜¯å¾®ä¸è¶³é“çš„ã€‚ 

go æœ‰å¦‚ä¸‹çš„ä¼˜ç‚¹ï¼šæ¥è¿‘åº•å±‚è¯­è¨€çš„æ€§èƒ½ï¼Œç®€å•çš„è¯­æ³•å’Œç›¸å¯¹ç®€å•çš„å­¦ä¹ æ›²çº¿ä½¿å®ƒæˆä¸ºæ„å»ºå¯æ‹“å±•å’Œå®‰å…¨çš„ Web åº”ç”¨çš„ç†æƒ³é€‰æ‹©ã€‚


### go vs rust

[ä¹Ÿè®¸æ˜¯æœ€å®¢è§‚ã€å…¨é¢çš„æ¯”è¾ƒ Rust ä¸ Goï¼šéƒ½æƒ³æŠŠ Rust ä¹Ÿå­¦ä¸€ä¸‹](https://jishuin.proginn.com/p/763bfbd31320)

#### æ€§èƒ½
æˆ‘ä»¬å·²ç»è¯´è¿‡ï¼ŒGo å’Œ Rust éƒ½èƒ½ç”Ÿæˆéå¸¸å¿«çš„ç¨‹åºï¼Œå› ä¸ºå®ƒä»¬è¢«ç¼–è¯‘ä¸ºæœ¬æœºä»£ç ï¼Œè€Œæ— éœ€é€šè¿‡è§£é‡Šå™¨æˆ–è™šæ‹Ÿæœºã€‚ä½†æ˜¯ï¼ŒRust çš„æ€§èƒ½ç‰¹åˆ«å‡ºè‰²ï¼Œå®ƒå¯ä¸ C å’Œ C++ ç›¸åª²ç¾ï¼ˆC/C++ é€šå¸¸è¢«è®¤ä¸ºæ˜¯æ€§èƒ½æœ€é«˜çš„ç¼–è¯‘è¯­è¨€ï¼‰ï¼Œä½†ä¸è¿™äº›è¾ƒæ—§çš„è¯­è¨€ä¸åŒï¼Œå®ƒè¿˜æä¾›äº†å†…å­˜å®‰å…¨æ€§å’Œå¹¶å‘å®‰å…¨æ€§ï¼Œè€Œæ‰§è¡Œé€Ÿåº¦å´åŸºæœ¬æ²¡æœ‰ä»»ä½•æˆæœ¬ã€‚Rust è¿˜å…è®¸ä½ åˆ›å»ºå¤æ‚çš„æŠ½è±¡ï¼Œè€Œæ— éœ€åœ¨è¿è¡Œæ—¶ä»˜å‡ºæ€§èƒ½æŸå¤±ã€‚

ç›¸æ¯”ä¹‹ä¸‹ï¼Œ**å°½ç®¡ Go ç¨‹åºçš„æ€§èƒ½ä¹Ÿéå¸¸å¥½ï¼Œä½†æ˜¯ Go çš„ä¸»è¦ç›®çš„æ˜¯æé«˜å¼€å‘é€Ÿåº¦ï¼ˆåŒ…æ‹¬ç¼–è¯‘ï¼‰ï¼Œè€Œä¸æ˜¯æé«˜æ‰§è¡Œé€Ÿåº¦ã€‚Go ç¼–è¯‘å™¨ä¸ä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´æ¥å°è¯•ç”Ÿæˆå°½å¯èƒ½é«˜æ•ˆçš„æœºå™¨ä»£ç ï¼›å®ƒæ›´å…³å¿ƒå¿«é€Ÿç¼–è¯‘å¤§é‡ä»£ç ã€‚å› æ­¤ï¼ŒRust é€šå¸¸ä¼šåœ¨è¿è¡Œæ—¶åŸºå‡†æµ‹è¯•ä¸­å‡»è´¥ Goã€‚**è¯´ç™½äº†ï¼Œå…¶å®å°±æ˜¯goç”¨åœ¨ç¼–è¯‘é˜¶æ®µæ¯”è¾ƒå¥½ï¼Œæ¯”å¦‚esbuild

Rust çš„è¿è¡Œæ—¶æ€§èƒ½ä¹Ÿå§‹ç»ˆå¦‚ä¸€ä¸”å¯é¢„æµ‹ï¼Œå› ä¸ºå®ƒä¸ä½¿ç”¨åƒåœ¾å›æ”¶ã€‚Go çš„åƒåœ¾æ”¶é›†å™¨éå¸¸é«˜æ•ˆï¼Œå¹¶ä¸”ç»è¿‡ä¼˜åŒ–ï¼Œå¯ä»¥ä½¿å…¶ STW çš„æ—¶é—´å°½å¯èƒ½çŸ­ï¼ˆå¹¶ä¸”åœ¨æ¯ä¸ªæ–°çš„ Go ç‰ˆæœ¬ä¸­éƒ½å˜å¾—æ›´çŸ­ï¼‰ã€‚ä½†æ˜¯åƒåœ¾å›æ”¶ä¸å¯é¿å…åœ°åœ¨ç¨‹åºçš„è¡Œä¸ºæ–¹å¼ä¸­å¼•å…¥äº†ä¸€äº›ä¸å¯é¢„æµ‹æ€§ï¼Œè¿™åœ¨æŸäº›åº”ç”¨ç¨‹åºï¼ˆä¾‹å¦‚åµŒå…¥å¼ç³»ç»Ÿï¼‰ä¸­å¯èƒ½æ˜¯ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ã€‚

ç”±äº Rust æ—¨åœ¨ä½¿ç¨‹åºå‘˜èƒ½å¤Ÿå®Œå…¨æ§åˆ¶åº•å±‚ç¡¬ä»¶ï¼Œå› æ­¤æœ‰å¯èƒ½å°† Rust ç¨‹åºä¼˜åŒ–ä¸ºéå¸¸æ¥è¿‘æœºå™¨çš„æœ€å¤§ç†è®ºæ€§èƒ½ã€‚å¯¹äºæ‰§è¡Œé€Ÿåº¦è¶…è¿‡æ‰€æœ‰å…¶ä»–è€ƒè™‘å› ç´ çš„é¢†åŸŸï¼ˆä¾‹å¦‚æ¸¸æˆç¼–ç¨‹ï¼Œæ“ä½œç³»ç»Ÿå†…æ ¸ï¼ŒWeb æµè§ˆå™¨ç»„ä»¶å’Œå®æ—¶æ§åˆ¶ç³»ç»Ÿï¼‰ï¼ŒRust ä½¿å…¶æˆä¸ºç»ä½³çš„é€‰æ‹©ã€‚

#### å¹¶å‘

å¤§å¤šæ•°è¯­è¨€éƒ½å¯¹å¹¶å‘ç¼–ç¨‹æä¾›æŸç§å½¢å¼çš„æ”¯æŒï¼ˆä¸€æ¬¡æ‰§è¡Œå¤šé¡¹æ“ä½œï¼‰ï¼Œä½†æ˜¯ Go æ˜¯ä¸“ä¸ºè¿™é¡¹å·¥ä½œè€Œè®¾è®¡çš„ã€‚Go ä¸ä½¿ç”¨æ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼Œè€Œæ˜¯æä¾›äº†ä¸€ç§è½»é‡çº§çš„æ›¿ä»£æ–¹æ¡ˆï¼šgoroutinesã€‚æ¯ä¸ª goroutine æ˜¯ä¸€ä¸ªç‹¬ç«‹æ‰§è¡Œçš„ Go å‡½æ•°ï¼ŒGo è°ƒåº¦ç¨‹åºä¼šå°†å…¶æ˜ å°„åˆ°å…¶æ§åˆ¶ä¸‹çš„ OS çº¿ç¨‹ä¹‹ä¸€ã€‚è¿™æ„å‘³ç€è°ƒåº¦ç¨‹åºä»…ä½¿ç”¨æœ‰é™æ•°é‡çš„ OS çº¿ç¨‹å³å¯éå¸¸æœ‰æ•ˆåœ°ç®¡ç†å¤§é‡å¹¶å‘çš„goroutineã€‚

å› æ­¤ï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªç¨‹åºä¸­è¿è¡Œæ•°ç™¾ä¸‡ä¸ªå¹¶å‘ goroutineï¼Œè€Œä¸ä¼šé€ æˆä¸¥é‡çš„æ€§èƒ½é—®é¢˜ã€‚è¿™ä½¿ Go æˆä¸º Web æœåŠ¡å™¨å’Œå¾®æœåŠ¡ç­‰å¤§è§„æ¨¡å¹¶å‘åº”ç”¨ç¨‹åºçš„ç†æƒ³é€‰æ‹©ã€‚

Go è¿˜æä¾›äº†å¿«é€Ÿï¼Œå®‰å…¨ï¼Œæœ‰æ•ˆçš„æ–¹å¼ï¼Œgoroutine ä½¿ç”¨ channel è¿›è¡Œé€šä¿¡å’Œå…±äº«æ•°æ®ã€‚Go çš„å¹¶å‘æ”¯æŒè®¾è®¡è‰¯å¥½ï¼Œä½¿ç”¨èµ·æ¥å¾ˆæ„‰å¿«ã€‚é€šå¸¸å¾ˆéš¾å¯¹å¹¶å‘ç¨‹åºè¿›è¡Œæ¨ç†ï¼Œè€Œæ„å»ºå¯é ï¼Œæ­£ç¡®çš„å¹¶å‘ç¨‹åºå¯¹ä»»ä½•è¯­è¨€éƒ½æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚ä½†æ˜¯ï¼Œç”±äºå®ƒæ˜¯ä»ä¸€å¼€å§‹å°±å†…ç½®åœ¨è¯­è¨€ä¸­çš„ï¼Œè€Œä¸æ˜¯äº‹åæ‰æƒ³åˆ°çš„ï¼ŒGo ä¸­çš„å¹¶å‘ç¼–ç¨‹ç®€å•ã€åˆç†ã€è‰¯å¥½çš„é›†æˆè¿›è¯­è¨€ä¸­ã€‚

ç›¸æ¯”ä¹‹ä¸‹ï¼ŒRust ä¸­çš„å¹¶å‘æ˜¯ä¸€ä¸ªå¾ˆæ–°çš„ç‰¹æ€§ï¼Œå¹¶ä¸”è¿˜æœ‰å¾…ç¨³å®šä¸­ï¼Œä½†æ˜¯å®ƒçš„å‘å±•éå¸¸æ´»è·ƒï¼Œå› æ­¤è¯·ç•™æ„è¿™å—ã€‚ä¾‹å¦‚ï¼ŒRust çš„ rayon[11] æä¾›äº†ä¸€ç§éå¸¸ä¼˜é›…ä¸”è½»å·§çš„æ–¹æ³•ï¼Œå¯ä»¥å°†é¡ºåºè®¡ç®—è½¬æ¢ä¸ºå¹¶è¡Œè®¡ç®—ã€‚

## rust 

Rust è¯­è¨€æ—¨åœ¨å¼•å¯¼ä½ è‡ªç„¶åœ°è½¬å‘åœ¨**é€Ÿåº¦å’Œå†…å­˜ä½¿ç”¨æ–¹é¢é«˜æ•ˆä¸”å¯é çš„ä»£ç **ã€‚

åœ¨ç¼–ç¨‹è¯­è¨€è®¾è®¡ä¸­ï¼Œé«˜å±‚å·¥ç¨‹å­¦å’Œåº•å±‚æ§åˆ¶å¾€å¾€ä¸èƒ½å…¼å¾—ï¼›Rust åˆ™è¯•å›¾æŒ‘æˆ˜è¿™ä¸€çŸ›ç›¾ã€‚é€šè¿‡æƒè¡¡å¼ºå¤§çš„æŠ€æœ¯èƒ½åŠ›ä¸ä¼˜ç§€çš„å¼€å‘ä½“éªŒï¼ŒRust å…è®¸ä½ æ§åˆ¶åº•å±‚ç»†èŠ‚ï¼ˆæ¯”å¦‚å†…å­˜ä½¿ç”¨ï¼‰ï¼Œå¹¶å…å—ä»¥å¾€è¿›è¡Œæ­¤ç±»æ§åˆ¶æ‰€ç»å—çš„æ‰€æœ‰çƒ¦æ¼ã€‚

Rust é€‚ç”¨äºè¿½æ±‚ç¼–ç¨‹è¯­è¨€çš„é€Ÿåº¦ä¸ç¨³å®šæ€§çš„å¼€å‘è€…ã€‚æ‰€è°“é€Ÿåº¦ï¼Œæ˜¯æŒ‡ä½ ç”¨ Rust å¼€å‘å‡ºçš„ç¨‹åºè¿è¡Œé€Ÿåº¦ï¼Œä»¥åŠ Rust æä¾›çš„ç¨‹åºå¼€å‘é€Ÿåº¦ã€‚

### é€šç”¨ç¼–ç¨‹æ¦‚å¿µ

- é»˜è®¤æƒ…å†µä¸‹å˜é‡æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ï¼Œå……åˆ†åˆ©ç”¨ Rust æä¾›çš„å®‰å…¨å’Œç®€å•å¹¶å‘çš„æ–¹å¼æ¥ç¼–å†™ä»£ç 
- Rust å¸¸é‡çš„å‘½åçº¦å®šæ˜¯å…¨éƒ¨å­—æ¯éƒ½ä½¿ç”¨å¤§å†™ï¼Œå¹¶ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯ï¼Œå¦å¤–å¯¹æ•°å­—å­—é¢é‡å¯æ’å…¥ä¸‹åˆ’çº¿ä»¥æé«˜å¯è¯»æ€§

```rust
// åœ¨rustä¸­ï¼Œå˜é‡æ˜¯é€šè¿‡letå£°æ˜çš„ï¼Œå¦‚æœæ˜¯å¯å˜å˜é‡ï¼Œä½¿ç”¨mutå£°æ˜
const MAX_POINTS: u32 = 100_000;
```

å°†æ•´ä¸ªç¨‹åºä¸­ç”¨åˆ°çš„ç¡¬ç¼–ç ï¼ˆhardcodeï¼‰å€¼å‘½åä¸ºå¸¸é‡ï¼Œå¯¹äºå°†è¯¥å€¼çš„å«ä¹‰ä¼ è¾¾ç»™ä»£ç çš„æœªæ¥ç»´æŠ¤è€…å¾ˆæœ‰ç”¨ã€‚å¦‚æœå°†æ¥éœ€è¦æ›´æ”¹ç¡¬ç¼–ç çš„å€¼ï¼Œåˆ™åªéœ€è¦åœ¨ä»£ç ä¸­æ”¹åŠ¨ä¸€å¤„å°±å¯ä»¥äº†ã€‚

```rust
// okï¼Œè¿™ä¸ªç›¸å½“äºé‡æ–°å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œæœ‰ç‚¹ç±»ä¼¼jsä¸­çš„å˜é‡æå‡
let spaces = "   ";
let spaces = spaces.len();

// errï¼Œå› ä¸ºæ•°æ®ç±»å‹å˜åŒ–äº†
let mut spaces = "   ";
spaces = spaces.len();
```

#### æ•°æ®ç±»å‹

 Rust æ˜¯ä¸€ç§**é™æ€ç±»å‹ï¼ˆstatically typedï¼‰çš„è¯­è¨€ï¼Œè¿™æ„å‘³ç€å®ƒå¿…é¡»åœ¨ç¼–è¯‘æœŸçŸ¥é“æ‰€æœ‰å˜é‡çš„ç±»å‹**ã€‚ç¼–è¯‘å™¨é€šå¸¸å¯ä»¥æ ¹æ®å€¼å’Œä½¿ç”¨æ–¹å¼æ¨å¯¼å‡ºæˆ‘ä»¬æƒ³è¦ä½¿ç”¨çš„ç±»å‹ã€‚

- æ ‡é‡ç±»å‹ï¼Œè¡¨ç¤ºå•ä¸ªå€¼ï¼›Rust æœ‰ 4 ä¸ªæ ‡é‡ç±»å‹ï¼š**æ•´å‹ã€æµ®ç‚¹å‹ã€å¸ƒå°”å‹å’Œå­—ç¬¦**ã€‚
- u32 ç±»å‹ã€‚æ­¤ç±»å‹å£°æ˜è¡¨æ˜äº†ä¸å…¶ç›¸å…³çš„å€¼åº”ä¸º 32 ä½ç³»ç»Ÿçš„æ— ç¬¦å·æ•´å‹ï¼ˆi æ˜¯è‹±æ–‡å•è¯ integer çš„é¦–å­—æ¯ï¼Œä¸ä¹‹ç›¸åçš„æ˜¯ uï¼Œä»£è¡¨æ— ç¬¦å· unsigned ç±»å‹ï¼‰
- æœ‰ç¬¦å·å’Œæ— ç¬¦å·è¡¨ç¤ºæ•°å­—èƒ½å¦å–è´Ÿæ•°æˆ–æ˜¯åªèƒ½å–æ­£æ•°ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°å­—æ˜¯å¦éœ€è¦å¸¦ä¸€ä¸ªç¬¦å·ï¼ˆæœ‰ç¬¦å·ç±»å‹ï¼‰ï¼Œæˆ–æ•°å­—åªèƒ½è¡¨ç¤ºæ­£æ•°æ•…ä¸éœ€è¦åŒ…æ‹¬ç¬¦å·ï¼ˆæ— ç¬¦å·ç±»å‹ï¼‰ã€‚
- **æœ‰ç¬¦å·æ•°å­—ä»¥äºŒè¿›åˆ¶è¡¥ç å½¢å¼å­˜å‚¨**ã€‚
- i8 å¯å­˜å‚¨æ•°å­—èŒƒå›´æ˜¯ -(2^7) ~ 2^7 - 1ï¼Œå³ -128 ~ 127ã€‚æ— ç¬¦å·ç±»å‹å¯ä»¥å­˜å‚¨çš„æ•°å­—èŒƒå›´æ˜¯ 0 ~ 2^n - 1ï¼Œæ‰€ä»¥ u8 èƒ½å¤Ÿå­˜å‚¨çš„æ•°å­—ä¸º 0 ~ 2^8 - 1ï¼Œå³ 0 ~ 255ã€‚
- æ­¤å¤–ï¼Œisize å’Œ usize ç±»å‹å–å†³äºç¨‹åºè¿è¡Œçš„è®¡ç®—æœºç±»å‹ï¼š64 ä½ï¼ˆå¦‚æœä½¿ç”¨ 64 ä½æ¶æ„ç³»ç»Ÿï¼‰å’Œ 32 ä½ï¼ˆå¦‚æœä½¿ç”¨ 32 ä½æ¶æ„ç³»ç»Ÿï¼‰ã€‚
- Rust çš„é»˜è®¤å€¼é€šå¸¸æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œæ•´å‹é»˜è®¤æ˜¯ i32ï¼šè¿™é€šå¸¸æ˜¯æœ€å¿«çš„ï¼Œå³ä¾¿åœ¨ 64 ä½ç³»ç»Ÿä¸Šä¹Ÿæ˜¯ã€‚
- æµ®ç‚¹ç±»å‹æ•°å­— æ˜¯å¸¦æœ‰å°æ•°ç‚¹çš„æ•°å­—ï¼Œåœ¨ Rust ä¸­æµ®ç‚¹ç±»å‹æ•°å­—ä¹Ÿæœ‰ä¸¤ç§åŸºæœ¬ç±»å‹ï¼š f32 å’Œ f64ï¼Œåˆ†åˆ«ä¸º 32 ä½å’Œ 64 ä½å¤§å°ã€‚é»˜è®¤æµ®ç‚¹ç±»å‹æ˜¯ f64ï¼Œå› ä¸ºåœ¨ç°ä»£çš„ CPU ä¸­å®ƒçš„é€Ÿåº¦ä¸ f32 å‡ ä¹ç›¸åŒï¼Œä½†ç²¾åº¦æ›´é«˜ã€‚
- Rust çš„ char ï¼ˆå­—ç¬¦ï¼‰ç±»å‹æ˜¯è¯¥è¯­è¨€æœ€åŸå§‹çš„å­—æ¯ç±»å‹ï¼Œï¼ˆæ³¨æ„ï¼Œchar å­—é¢é‡æ˜¯ç”¨å•å¼•å·æ‹¬èµ·æ¥ï¼Œè€Œå­—ç¬¦ä¸²å­—é¢é‡æ˜¯ç”¨åŒå¼•å·æ‰©èµ·æ¥ï¼‰

```js
fn main() {
	let x = 2.0; // f64

	let y: f32 = 3.0; // f32
}

fn main() {
	let c = 'z';
	let z = 'â„¤';
	let heart_eyed_cat = 'ğŸ˜»';
}
```

- Rust çš„å­—ç¬¦ç±»å‹è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ª Unicode å€¼ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥è¡¨ç¤ºçš„ä¸ä»…ä»…æ˜¯ ASCIIã€‚æ ‡éŸ³å­—æ¯ï¼Œä¸­æ–‡/æ—¥æ–‡/éŸ©æ–‡çš„è¡¨æ„æ–‡å­—ï¼Œemojiï¼Œè¿˜æœ‰é›¶å®½ç©ºæ ¼(zero width space)åœ¨ Rust ä¸­éƒ½æ˜¯åˆæ³•çš„å­—ç¬¦ç±»å‹ã€‚Unicode å€¼çš„èŒƒå›´ä» U+0000~U+D7FF å’Œ U+E000~U+10FFFFã€‚


#### å¤åˆç±»å‹

- å¤åˆç±»å‹ï¼ˆcompound typeï¼‰å¯ä»¥å°†å…¶ä»–ç±»å‹çš„å¤šä¸ªå€¼åˆåœ¨ä¸€å—ç»„æˆä¸€ä¸ªç±»å‹ã€‚Rust æœ‰ä¸¤ç§åŸºæœ¬çš„å¤åˆç±»å‹ï¼šå…ƒç»„ï¼ˆtupleï¼‰å’Œæ•°ç»„ï¼ˆarrayï¼‰ã€‚
  - å…ƒç»„æ˜¯å°†å¤šç§ç±»å‹çš„å¤šä¸ªå€¼ç»„åˆåˆ°ä¸€ä¸ªå¤åˆç±»å‹ä¸­çš„ä¸€ç§åŸºæœ¬æ–¹å¼ã€‚å…ƒç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼šå£°æ˜åï¼Œå®ƒä»¬å°±æ— æ³•å¢é•¿æˆ–ç¼©å°ã€‚

```rust
fn main() {
  let tup: (i32, f64, u8) = (500, 6.4, 1);
	let (x, y, z) = tup;

	println!("The value of y is: {}", y);
	// é™¤äº†é€šè¿‡æ¨¡å¼åŒ¹é…è¿›è¡Œè§£æ„å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå¥ç‚¹ï¼ˆ.ï¼‰è¿ä¸Šè¦è®¿é—®çš„å€¼çš„ç´¢å¼•æ¥ç›´æ¥è®¿é—®å…ƒç»„å…ƒç´ ã€‚ä¾‹å¦‚ï¼š
	let x_new = tup.0
}
```

- Rust ä¸­çš„æ•°ç»„å…·æœ‰å›ºå®šé•¿åº¦ï¼Œè·Ÿå…ƒç»„ä¸€æ ·ã€‚ä¸”æ¯ä¸ªå…ƒç´ å¿…é¡»å…·æœ‰ç›¸åŒçš„ç±»å‹ã€‚
- vector ç±»å‹ç±»ä¼¼äºæ ‡å‡†åº“ä¸­æä¾›çš„é›†åˆç±»å‹ï¼Œå…¶çš„å¤§å°å…è®¸å¢é•¿æˆ–ç¼©å°ã€‚å¦‚æœæ‚¨ä¸ç¡®å®šæ˜¯ä½¿ç”¨æ•°ç»„è¿˜æ˜¯ vectorï¼Œé‚£å°±åº”è¯¥ä½¿ç”¨ä¸€ä¸ª vector

```rust
// åœ¨æ–¹æ‹¬å·ä¸­åŒ…å«æ¯ä¸ªå…ƒç´ çš„ç±»å‹ï¼Œåè·Ÿåˆ†å·ï¼Œå†åè·Ÿæ•°ç»„å…ƒç´ çš„æ•°é‡ã€‚
let a: [i32; 5] = [1, 2, 3, 4, 5];

// å¯ä»¥æŒ‡å®šåˆå§‹å€¼ï¼Œåè·Ÿåˆ†å·ï¼Œç„¶ååœ¨æ–¹æ‹¬å·ä¸­æŒ‡å®šæ•°ç»„çš„é•¿åº¦ï¼Œ
// è¿™ç§å†™æ³•ä¸ let a = [3, 3, 3, 3, 3]; æ•ˆæœç›¸åŒï¼Œä½†æ›´ç®€æ´ã€‚
let a = [3; 5];

// æ•°ç»„æ˜¯åœ¨æ ˆä¸Šåˆ†é…çš„å•ä¸ªå†…å­˜å—ã€‚å¯ä»¥ä½¿ç”¨ç´¢å¼•è®¿é—®æ•°ç»„çš„å…ƒç´ 
```

#### å‡½æ•°

æ‰€æœ‰å­—æ¯éƒ½æ˜¯å°å†™å¹¶ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯ã€‚

```rust
fn main() {
	println!("Hello, world!");

	another_function();
}

fn another_function() {
	println!("Another function.");
}
```

- åœ¨å‡½æ•°ç­¾åä¸­ï¼Œå¿…é¡» å£°æ˜æ¯ä¸ªå‚æ•°çš„ç±»å‹ã€‚
- ä¾‹å¦‚ C å’Œ Rubyï¼Œå®ƒä»¬çš„èµ‹å€¼è¯­å¥ä¼šè¿”å›æ‰€èµ‹çš„å€¼ã€‚åœ¨è¿™äº›è¯­è¨€ä¸­ï¼Œå¯ä»¥è¿™ä¹ˆå†™ x = y = 6ï¼Œè¿™æ · x å’Œ y çš„å€¼éƒ½æ˜¯ 6ï¼›Rust ä¸­ä¸èƒ½è¿™æ ·å†™ã€‚



## merchant-operation

### æŒ‰éœ€åŠ è½½

å¸¸ç”¨çš„uiç»„ä»¶åº“éƒ½æ”¯æŒæŒ‰éœ€åŠ è½½ï¼Œä¸»è¦æ–¹å¼ï¼š
- å…¨éƒ¨å¼•å…¥
- æŒ‰éœ€å¼•å…¥

æŒ‰éœ€å¼•å…¥çš„æ–¹å¼ï¼Œä¸»è¦æ˜¯ä»¥ä¸‹ä¸¤ç§ï¼š

```js
// æ–¹å¼ä¸€ï¼šæ‰‹åŠ¨å¼•å…¥ç»„ä»¶çš„æ ·å¼
import Button from 'vant/lib/button';
import 'vant/lib/button/style';

// æ–¹å¼äºŒï¼šå€ŸåŠ©æ’ä»¶ï¼Œæ¯”å¦‚babel-plugin-import
module.exports = {
  plugins: [
    ['import', {
      libraryName: 'vant',
      libraryDirectory: 'es',
      style: true
    }, 'vant']
  ]
};

import { Button } from 'vant';
Vue.use(Button);


import { Button } from 'vant';
// å…¶å®è½¬æ¢åçš„ä»£ç ï¼Œ
import "vant/es/button/style";
import _Button from "vant/es/button";
```

æ‰€è°“çš„ç»„ä»¶åº“æŒ‰éœ€åŠ è½½æ˜¯åœ¨ babel ç¼–è¯‘ js é˜¶æ®µè¿›è¡Œäº†ä»£ç è½¬æ¢ï¼Œå°†æŒ‰éœ€åŠ è½½çš„æ¨¡å—ï¼Œå¢åŠ å¯¹åº”æ ·å¼çš„å¯¼å…¥ã€‚

[ç»„ä»¶åº“æŒ‰éœ€åŠ è½½åŸç†åˆ†æ](https://juejin.cn/post/6968505746757533710)

### storeChange äº‹ä»¶

- storage äº‹ä»¶ï¼Œéœ€è¦Aé¡µé¢è§¦å‘ï¼ŒBé¡µé¢ç›‘å¬åˆ°ã€‚å¦å¤–æ˜¯è®¾ç½®ç›¸åŒçš„keyå’Œvalä¸ä¼šäºŒæ¬¡è§¦å‘ã€‚
- ç›´æ¥åœ¨applicationé‡Œä¿®æ”¹stroageä¼šè§¦å‘åŸç”Ÿçš„storageäº‹ä»¶ã€‚
- å¦‚æœç¡®å®æƒ³åˆ©ç”¨ï¼Œå¯ä»¥è‡ªå®šä¹‰storeageäº‹ä»¶ï¼Œè¿›è€Œåœ¨åŒä¸€ä¸ªé¡µé¢ç›‘å¬ã€‚
- æ³¨æ„è®¾ç½®åï¼Œåªèƒ½é€šè¿‡localStorage.setItemæ¥è§¦å‘ï¼Œå¹¶ç›‘å¬customSetItemæ‰è¡Œã€‚

```js
const originalSetItem = localStorage.setItem;
localStorage.setItem = function (key, val) {
	const customSetItem = new CustomEvent('customSetItem');
	customSetItem[key] = val;
	window.dispatchEvent(customSetItem);

	originalSetItem.apply(this, arguments);
}

// å…ˆç›‘å¬
window.addEventListener('customSetItem', e => {
	console.log('è‡ªå®šä¹‰storeChangeäº‹ä»¶', e)
})

// å†è§¦å‘
localStorage.setItem('myKey', 'myVal')
```

## Vue

```js
{
	path: "/:catchAll(.*)",
	redirect: { name: 'dashboard' },
},

// The matching uses path-to-regexp, which is the matching engine used
// by express as well, so the same matching rules apply.
// For detailed rules, see https://github.com/pillarjs/path-to-regexp
const router = new VueRouter({
  mode: 'history',
  base: __dirname,
  routes: [
    { path: '/' },
    // params are denoted with a colon ":"
    { path: '/params/:foo/:bar' },
    // a param can be made optional by adding "?"
    { path: '/optional-params/:foo?' },
    // a param can be followed by a regex pattern in parens
    // this route will only be matched if :id is all numbers
    { path: '/params-with-regex/:id(\\d+)' }, // å‚æ•°åé¢å¯ä»¥è·Ÿä¸€ä¸ªæ­£åˆ™
    // asterisk can match anything
    { path: '/asterisk/*' },
    // make part of the path optional by wrapping with parens and add "?"
		// è¿˜å¯ä»¥è®¾ç½®æ˜¯å¦å¯é€‰
    { path: '/optional-group/(foo/)?bar' }
  ]
})
```

## åŸºåº§

### åˆ¤æ–­æ˜¯å¦ä¸ºä»£ç†æ¨¡å¼

```js
// isProxyMode æ˜¯å¦ä¸ºä»£ç†æ¨¡å¼ï¼Œæ ¹æ®urlé‡Œæ˜¯å¦æºå¸¦/proxy-boss
const { pathname, host } = window.location
export const PROXY_PREFIX = '/proxy-boss'
export const isProxyMode = !process.env.IS_OE_BUILD_PRODUCTION && host.includes('local') && pathname.startsWith(PROXY_PREFIX)
export const URL_PREFIX = isProxyMode ? PROXY_PREFIX : ''


// è·å–åˆ†æ”¯é€»è¾‘
// FE_ENV_BRANCH fe_env_branch -ã€‹sesstionStorageé‡Œè·å–
getSessionStorage(FE_ENV_BRANCH) || qs.parse(location.search.slice(1))?.branch || 'master'

// è®¾ç½®åˆ†æ”¯åï¼Œä¼šè·å–searchï¼Œç„¶åé‡æ–°æ‹¼æ¥åˆ°searchä¸Šï¼Œåˆ©ç”¨qs;
// åˆ©ç”¨ window.location.search = qs.stringify(mergeSearchs); è·³è½¬
// å¦‚æœå·²åœ¨å½“å‰åˆ†æ”¯ï¼Œæˆ–è€…åœ¨masterä¸Šï¼Œåˆ™ä¸ä¼šè·³è½¬


// æœ¬åœ°proxyï¼ŒåŒ¹é… /mendian-micro- ç„¶åè®¿é—®
  '/mendian-micro-': {
    target: 'http://boss-sim.chengxinyouxuan.com/',
    changeOrigin: true,
  },

// æœ¬åœ°èµ·çš„åŸºåº§æœåŠ¡ï¼Œè®¿é—®çš„èµ„æº
// http://boss-local.chengxinyouxuan.com:9000/mendian-micro-purchase-new/entry-manifest.json?timestamp=1639056098906 -ã€‹ å°‘äº†åˆ†æ”¯
// https://boss-sim.chengxinyouxuan.com/mendian-micro-purchase-new/master/entry-manifest.json?timestamp=1639057144184
// é™æ€èµ„æºï¼ŒæœåŠ¡å™¨æ€ä¹ˆè®¿é—®ï¼Ÿ æ²¡æœ‰å ¡å’æœºï¼Œç›´æ¥ç‰©ç†æœºï¼šssh root@10.96.91.145ï¼Œ å¯†ç ï¼šu;%O}3}%*oM)@ac


// é¦–æ¬¡æ³¨å†Œåº”ç”¨æ—¶ï¼Œä¼šæ ¹æ®å½“å‰è·¯å¾„ï¼Œè·³è½¬ï¼ŒåŒæ—¶æƒ³ä¸‹ä¼ å…¥ä¸€äº›å¯¹è±¡
opts: {
			getState: async () => {
				const { pathname, hash } = window.location;
				if (pathname === '/' && hash === '#/welcome') {
					window.history.pushState({}, 'å·¥ä½œå°', formatLocationPath('/datacenter/#/index'));
				}
				await userStore._initPromise;
				return {
					portalName: 'cx_cangdian',
					getUserStore: () => userStore,
					getCurrentOz: () => userStore?.currentMoz?.warehouseStoreOz,
					getCurrentGateway: () => API_URL,
					login,
				};
			},
		},


// é‡å†™é¢åŒ…å±‘é€»è¾‘ï¼Œç›‘å¬
var originalSetItem = localStorage.setItem;

// é‡å†™ setItem å‡½æ•°
localStorage.setItem = function (key, newValue) {
	// bread_crumb_list é¢åŒ…å±‘å¯¼èˆª
	if (key === 'bread_crumb_list') {
		// åˆ›å»º setBreadCrumb äº‹ä»¶
		var event = new Event('setBreadCrumb');
		event.key = key;
		event.value = newValue;

		// æäº¤ setBreadCrumb äº‹ä»¶
		window.dispatchEvent(event);
	}
	originalSetItem.apply(this, arguments);
}

// ä»£ç åˆ‡æ¢åˆ†æ”¯åï¼Œç»å¸¸æ²¡æœ‰é‡æ–°è·å–manifest.jsonæ–‡ä»¶ï¼Œå¯¼è‡´èµ„æºå‡ºé”™ï¼›æ­¤æ—¶å¯ä»¥å¤šæ¬¡ä¿®æ”¹åˆ†æ”¯
// å¦å¤–å°±æ˜¯è·å–manifest.jsonæ–‡ä»¶çš„è·¯å¾„æœ‰æ—¶å€™æœ‰é—®é¢˜ï¼Œéœ€è¦æŸ¥ä¸‹ã€‚æ¯”å¦‚è®¿é—®indexé¡µé¢å°±è·³åˆ°äº†welcomeï¼ˆå› ä¸ºè·¯ç”±æœ‰ä¸ªå…œåº•ï¼Œå¦‚æœåŒ¹é…ä¸åˆ°å°±ä¼šè·³è½¬ï¼‰
```
1. æ³¨å†Œä¸»åº”ç”¨ã€æ³¨å†Œå­åº”ç”¨
2. æ‹‰å–æœ¬åœ°çš„appsåˆ—è¡¨
3. è¯·æ±‚å¯¹åº”appçš„manifest.jsonï¼Œä»è€Œè·å–åˆ°å¯¹åº”å­åº”ç”¨èµ„æºï¼›åŸºåº§çš„è¯ï¼Œä¸æ‹‰å–è¿œç¨‹èµ„æºï¼Œè€Œæ˜¯åŠ è½½æœ¬åœ°çš„ä¸€ä¸ªblobæ–‡ä»¶
4. 


## react-admin æŠ€æœ¯æ ˆ

[react-admin github](https://github.com/yezihaohao/react-admin)

å› ä¸ºJSONä¸æ”¯æŒ Symbol ç±»å‹ã€‚æ‰€ä»¥å³ä½¿æœåŠ¡å™¨å­˜åœ¨ç”¨JSONä½œä¸ºæ–‡æœ¬è¿”å›å®‰å…¨æ¼æ´ï¼ŒJSON é‡Œä¹Ÿä¸åŒ…å« Symbol.for('react.element')ã€‚React ä¼šæ£€æµ‹ element.$$typeofï¼Œå¦‚æœå…ƒç´ ä¸¢å¤±æˆ–è€…æ— æ•ˆï¼Œä¼šæ‹’ç»å¤„ç†è¯¥å…ƒç´ ã€‚è¯´ç™½äº†ï¼Œreactä¸ºäº†é˜²æ­¢æœåŠ¡ç«¯çš„xssæ¼æ´çš„ä¸€ä¸ªæ–¹å¼ã€‚

[ä¸ºä»€ä¹ˆreactå…ƒç´ æœ‰ä¸€ä¸ª$$typeofå…ƒç´ ](https://overreacted.io/zh-hans/why-do-react-elements-have-typeof-property/)

### dotenv

npm å®˜æ–¹æ–‡æ¡£çš„è¿™æ ·ä»‹ç» dotenv: Dotenv æ˜¯ä¸€ä¸ªé›¶ä¾èµ–çš„æ¨¡å—ï¼Œå®ƒèƒ½å°†ç¯å¢ƒå˜é‡ä¸­çš„å˜é‡ä» .env æ–‡ä»¶åŠ è½½åˆ° process.env ä¸­ã€‚å°†ç¯å¢ƒç›¸å…³çš„é…ç½®ç‹¬ç«‹äºä»£ç ä¹‹å¤–äº¦æ˜¯ The Twelve-Factor App çš„è¦ç´ ä¹‹ä¸€ã€‚

æ ¹ç›®å½•ä¸‹åˆ›å»º .env æ–‡ä»¶
```js
HOST=localhost
PORT=3000
MONGOOSE_URL=mongodb://localhost:27017/test
```
æ ¹ç›®å½•ä¸‹ app.js ä¸‹å¼•å…¥ dotenv å¹¶ä½¿ç”¨ `require('dotenv').config({ path: '.env' })`

// ä½¿ç”¨
```js
console.log(process.env.HOST) // localhost
console.log(process.env.PORT) // 3000
console.log(process.env.MONGOOSE_URL) // mongodb://localhost:27017/test
```

### redux-alita

redux-alitaæ˜¯ä¸€ä¸ªå°è£…äº†react + redux æ“ä½œçš„æç®€çš„å·¥å…·æ’ä»¶ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥æå‡æ—¥å¸¸çš„å¼€å‘æ•ˆç‡ã€‚

ä¸ºä»€ä¹ˆå«alitaï¼Ÿå¡å¯¼çš„ã€ŠAlitaã€‹å¾—åã€‚æœ¬æ’ä»¶å’Œå¥¹çš„ç‰¹ç‚¹ä¸€æ ·ï¼Œç²¾è‡´ï¼Œè¿…æ·ï¼Œç®€å•ï¼Œï¼ˆå¼€å‘ï¼‰é€Ÿåº¦å¿«ã€‚

[å®˜æ–¹github](https://github.com/yezihaohao/redux-alita)

### umbrella-storage

ä¸€ä¸ªæ“ä½œlocalStorageå’ŒsessionStorageçš„æ’ä»¶ï¼Œé¿å…åŒä¸€ä¸ªåŸŸåä¸‹éƒ¨ç½²ä¸åŒå‰ç«¯web appï¼Œæœ¬åœ°å­˜å‚¨ä½¿ç”¨åŒæ ·çš„keyå¯¼è‡´çš„å†²çªé—®é¢˜ã€‚

```js
import umbrella from 'umbrella-storage';
 
umbrella.setLocalStorage('test', 'test');
umbrella.getLocalStorage('test');
 
umbrella.setSessionStorage('sessionTest', { name: 'test' });
umbrella.getSessionStorage('sessionTest');

// é…ç½®è‡ªå®šä¹‰å‰ç¼€
umbrella.config(prefix: string);
```

## typescript

æ— æ³•ç›´æ¥ä½¿ç”¨nodeè¿è¡Œtsæ–‡ä»¶ï¼Œéœ€è¦å…ˆç¼–è¯‘æˆjsæ–‡ä»¶ï¼Œæ‰å¯ä»¥è¿è¡Œtsæ–‡ä»¶ï¼Œä½†ä¸ºäº†æ–¹ä¾¿ï¼Œå¯ä»¥å®‰è£…ts-nodeæ¨¡å—ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨ts-node xx.tsæ–‡ä»¶äº†

### åŸºæœ¬æ•°æ®ç±»å‹

#### unknown

å°±åƒæ‰€æœ‰ç±»å‹éƒ½å¯ä»¥èµ‹å€¼ç»™ anyï¼Œæ‰€æœ‰ç±»å‹ä¹Ÿéƒ½å¯ä»¥èµ‹å€¼ç»™ unknownã€‚

ä½†æ˜¯ï¼Œåè¿‡æ¥ï¼Œunknownç±»å‹çš„æ•°æ®åªèƒ½èµ‹å€¼ç»™any å’Œ unknown

```js
let value: any;

value.foo.bar; // OK
value.trim(); // OK
value(); // OK
new value(); // OK
value[0][1]; // OK

// æ”¹ä¸ºunknown
let value: unknown

value.foo.bar; // Error
value.trim(); // Error
value(); // Error
new value(); // Error
value[0][1]; // Error
```

#### å…ƒç»„

æ‰€å‘¨çŸ¥ï¼Œæ•°ç»„ä¸€èˆ¬ç”±**åŒç§ç±»å‹çš„å€¼**ç»„æˆï¼Œä½†æœ‰æ—¶æˆ‘ä»¬éœ€è¦åœ¨å•ä¸ªå˜é‡ä¸­å­˜å‚¨ä¸åŒç±»å‹çš„å€¼

```js
let tupleType: [string, boolean];
// åœ¨å…ƒç»„åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå¿…é¡»ç±»å‹ä¸€è‡´
tupleType = ["Semlinker", true];
```

#### Void ç±»å‹

ä¸any æ­£å¥½ç›¸åï¼Œæ˜¯æ²¡æœ‰ä»»ä½•ç±»å‹ï¼Œè€Œanyæ˜¯ä»»ä½•ç±»å‹


#### undefind  null

TypeScript é‡Œï¼Œundefined å’Œ null ä¸¤è€…æœ‰å„è‡ªçš„ç±»å‹åˆ†åˆ«ä¸º undefined å’Œ nullã€‚

```js
let u: undefined = undefined;
let n: null = null;
```

å¤åˆ¶ä»£ç é»˜è®¤æƒ…å†µä¸‹ null å’Œ undefined æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚ 

å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ null å’Œ undefined èµ‹å€¼ç»™ number ç±»å‹çš„å˜é‡ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æŒ‡å®šäº† `--strictNullChecks` æ ‡è®°ï¼Œnull å’Œ undefined åªèƒ½èµ‹å€¼ç»™ void å’Œå®ƒä»¬å„è‡ªçš„ç±»å‹ã€‚

#### Never ç±»å‹

never ç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚

```js
// è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹
function error(message: string): never {
  throw new Error(message);
}

function infiniteLoop(): never {
  while (true) {}
}
```

ä½¿ç”¨ never é¿å…å‡ºç°æ–°å¢äº†è”åˆç±»å‹æ²¡æœ‰å¯¹åº”çš„å®ç°ï¼Œç›®çš„å°±æ˜¯å†™å‡ºç±»å‹ç»å¯¹å®‰å…¨çš„ä»£ç ã€‚

### ç±»å‹æ–­è¨€

æœ‰æ—¶å€™ä½ ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ ä¼šæ¯” TypeScript æ›´äº†è§£æŸä¸ªå€¼çš„è¯¦ç»†ä¿¡æ¯ã€‚

é€šè¿‡ç±»å‹æ–­è¨€è¿™ç§æ–¹å¼å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œâ€œç›¸ä¿¡æˆ‘ï¼Œæˆ‘çŸ¥é“è‡ªå·±åœ¨å¹²ä»€ä¹ˆâ€ã€‚

#### asè¯­æ³•æ–­è¨€

```js
let someValue: any = "this is a string";
// æœ¬æ¥å«æœ‰lengthå±æ€§çš„å€¼ï¼Œæ²¡æœ‰å‡ ä¸ªã€‚è¿™é‡Œå°±æ–­è¨€someValueä¸ºstring
let strLength: number = (someValue as string).length;
```

#### å°–æ‹¬å·è¯­æ³•æ–­è¨€

```js
let someValue: any = "this is a string";
// æœ¬æ¥å«æœ‰lengthå±æ€§çš„å€¼ï¼Œæ²¡æœ‰å‡ ä¸ªã€‚è¿™é‡Œå°±æ–­è¨€someValueä¸ºstring
let strLength: number = (<string>someValue).length;
```

### ç±»å‹å®ˆå«

ç±»å‹ä¿æŠ¤æ˜¯å¯æ‰§è¡Œè¿è¡Œæ—¶æ£€æŸ¥çš„ä¸€ç§è¡¨è¾¾å¼ï¼Œç”¨äºç¡®ä¿è¯¥ç±»å‹åœ¨ä¸€å®šçš„èŒƒå›´å†…ã€‚

- in å…³é”®å­—ï¼Œå…¶å®å°±ç±»ä¼¼å¯¹è±¡çš„in
- typeof å…³é”®å­—
- instanceof å…³é”®å­—

```js
if (padder instanceof XXX) {
  // padderçš„ç±»å‹æ”¶çª„ä¸º 'SpaceRepeatingPadder'
}
```

- è‡ªå®šä¹‰ç±»å‹ä¿æŠ¤çš„ç±»å‹è°“è¯­
  
```js
function isNumber(x: any): x is number {
  return typeof x === "number";
}

function isString(x: any): x is string {
  return typeof x === "string";
}
```

### ç±»å‹åˆ«å

ç±»å‹åˆ«åæ˜¯ç”¨æ¥ç»™ç±»å‹èµ·ä¸ªåå­—

éš¾é“ type å°±æ˜¯ç±»å‹åˆ«å?

```js
type Message = string | string[];

let greet = (message: Message) => {
  // ...
};
```

### äº¤å‰ç±»å‹

TypeScript äº¤å‰ç±»å‹æ˜¯å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ã€‚

```js
interface IPerson {
  id: string;
  age: number;
}

interface IWorker {
  companyId: string;
}

type IStaff = IPerson & IWorker;

const staff: IStaff = {
  id: 'E1006',
  age: 33,
  companyId: 'EFT'
};

console.dir(staff)
```

### å‡½æ•°ç±»å‹

```js
// å£°æ˜ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å˜é‡
let IdGenerator: (chars: string, nums: number) => string;

// å®šä¹‰ä¸€ä¸ªå‡½æ•°
function createUserId(name: string, id: number): string {
  return name + id;
}
// å°†å‡½æ•°èµ‹å€¼ç»™å˜é‡
IdGenerator = createUserId;
```

### å‡½æ•°é‡è½½

å‡½æ•°é‡è½½æˆ–æ–¹æ³•é‡è½½æ˜¯ä½¿ç”¨ç›¸åŒåç§°å’Œä¸åŒå‚æ•°æ•°é‡æˆ–ç±»å‹åˆ›å»ºå¤šä¸ªæ–¹æ³•çš„ä¸€ç§èƒ½åŠ›ã€‚

ä¸ºåŒä¸€ä¸ªå‡½æ•°æä¾›å¤šä¸ªå‡½æ•°ç±»å‹å®šä¹‰æ¥è¿›è¡Œå‡½æ•°é‡è½½ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®è¿™ä¸ªåˆ—è¡¨å»å¤„ç†å‡½æ•°çš„è°ƒç”¨ã€‚

```js
// æˆ‘ä»¬ä¸º add å‡½æ•°æä¾›äº†å¤šä¸ªå‡½æ•°ç±»å‹å®šä¹‰ï¼Œä»è€Œå®ç°å‡½æ•°çš„é‡è½½ã€‚
function add(a: number, b: number): number;
function add(a: string, b: string): string;
function add(a: string, b: number): string;
function add(a: number, b: string): string;
function add(a: Combinable, b: Combinable) {
  if (typeof a === "string" || typeof b === "string") {
    return a.toString() + b.toString();
  }
  return a + b;
}
```

### tsæ•°ç»„ç»“æ„

```js
let x: number; let y: number; let z: number;
let five_array = [0,1,2,3,4];
[x,y,z] = five_array;
```


### type or interface

```js
type IProps = {
  name: string
}

const defaultProps = {
  age: 25,
}

// ç±»å‹å®šä¹‰ ç±»å‹åˆå¹¶
type GreetProps = IProps & typeof defaultProps


class Point {
  x: number = 2;
  y: number = 3;
}

interface IShape {
  area(): number;
}

type Perimeter = {
  perimeter(): number;
};

type RectangleShape = (IShape | Perimeter) & Point;

class Rectangle implements RectangleShape {
  // ç±»åªèƒ½å®ç°å…·æœ‰é™æ€å·²çŸ¥æˆå‘˜çš„å¯¹è±¡ç±»å‹æˆ–å¯¹è±¡ç±»å‹çš„äº¤é›†ã€‚
  x = 2;
  y = 3;
  area() {
    return this.x + this.y;
  }
}

interface ShapeOrPerimeter extends RectangleShape {}
// æ¥å£åªèƒ½æ‰©å±•ä½¿ç”¨é™æ€å·²çŸ¥æˆå‘˜çš„å¯¹è±¡ç±»å‹æˆ–å¯¹è±¡ç±»å‹çš„äº¤é›†


```

ä½¿ç”¨Typeè¿˜æ˜¯Interfaceï¼Ÿ
æœ‰å‡ ç§å¸¸ç”¨è§„åˆ™ï¼š

- åœ¨å®šä¹‰å…¬å…± API æ—¶(æ¯”å¦‚ç¼–è¾‘ä¸€ä¸ªåº“ï¼‰ä½¿ç”¨ interfaceï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿ä½¿ç”¨è€…ç»§æ‰¿æ¥å£
- åœ¨å®šä¹‰ç»„ä»¶å±æ€§ï¼ˆPropsï¼‰å’ŒçŠ¶æ€ï¼ˆStateï¼‰æ—¶ï¼Œå»ºè®®ä½¿ç”¨ typeï¼Œå› ä¸º typeçš„çº¦æŸæ€§æ›´å¼º

interface å’Œ type åœ¨tsä¸­æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µï¼Œä½†åœ¨ React å¤§éƒ¨åˆ†ä½¿ç”¨çš„ case ä¸­ï¼Œinterface å’Œ type å¯ä»¥è¾¾åˆ°ç›¸åŒçš„åŠŸèƒ½æ•ˆæœï¼Œtype å’Œ interface æœ€å¤§çš„åŒºåˆ«æ˜¯ï¼š
- type ç±»å‹ä¸èƒ½äºŒæ¬¡ç¼–è¾‘ï¼Œè€Œ interface å¯ä»¥éšæ—¶æ‰©å±•

```js
interface Point {
    x: number;
    y: number;
}

// type keys = "x" | "y"
type keys = keyof Point;

// è¿”å›å¯¹è±¡çš„å±æ€§
const data = {
  a: 3,
  hello: 'world'
}

function get(o: object, name: string) {
  return o[name]
}

// =ã€‹è¿›é˜¶ 
// æ³›å‹å…¶å®å°±æ˜¯ç±»å‹çš„å‡½æ•°ã€‚
// æˆ‘ä»¬é€šè¿‡ K extends keyof T ç¡®ä¿å‚æ•° key ä¸€å®šæ˜¯å¯¹è±¡ä¸­å«æœ‰çš„é”®ï¼Œè¿™æ ·å°±ä¸ä¼šå‘ç”Ÿè¿è¡Œæ—¶é”™è¯¯ã€‚
// è¿™æ˜¯ä¸€ä¸ªç±»å‹å®‰å…¨çš„è§£å†³æ–¹æ¡ˆï¼Œä¸ç®€å•è°ƒç”¨ let value = obj[key]; ä¸åŒã€‚
function get<T extends object, K extends keyof T>(o: T, name: K): T[K] {
  return o[name]
}

// ä½¿ç”¨æ³›å‹å‰
function identity (value: Number) : Number {
  return value;
}
console.log(identity(1)) // 1

// ä½¿ç”¨æ³›å‹åï¼Œå…¶å®å°±æ˜¯åŠ ä¸ª<T>ï¼ŒåŒæ—¶å°†Tè¿™ä¸ªç±»å‹ï¼Œä¼ é€’ç»™å…¥å‚å’Œè¿”å›ç»“æœ
function identity<T> (value: T) : T {
  return value;
}
// <T> å†…éƒ¨çš„ T è¢«ç§°ä¸ºç±»å‹å˜é‡ï¼Œå®ƒæ˜¯æˆ‘ä»¬å¸Œæœ›ä¼ é€’ç»™ identity å‡½æ•°çš„ç±»å‹å ä½ç¬¦ï¼Œ
// åŒæ—¶å®ƒè¢«åˆ†é…ç»™ value å‚æ•°ç”¨æ¥ä»£æ›¿å®ƒçš„ç±»å‹ï¼šæ­¤æ—¶ T å……å½“çš„æ˜¯ç±»å‹ï¼Œè€Œä¸æ˜¯ç‰¹å®šçš„ Number ç±»å‹ã€‚
console.log(identity<Number>(1)) // 1
```

å…¶ä¸­ T ä»£è¡¨ Typeï¼Œåœ¨**å®šä¹‰æ³›å‹æ—¶é€šå¸¸ç”¨ä½œç¬¬ä¸€ä¸ªç±»å‹å˜é‡åç§°**ã€‚ä½†å®é™…ä¸Š T å¯ä»¥ç”¨ä»»ä½•æœ‰æ•ˆåç§°ä»£æ›¿ã€‚é™¤äº† T ä¹‹å¤–ï¼Œä»¥ä¸‹æ˜¯å¸¸è§æ³›å‹å˜é‡ä»£è¡¨çš„æ„æ€ï¼š

- Tï¼ˆTypeï¼‰ï¼šè¡¨ç¤ºä¸€ä¸ª TypeScript ç±»å‹
- Kï¼ˆKeyï¼‰ï¼šè¡¨ç¤ºå¯¹è±¡ä¸­çš„é”®ç±»å‹
- Vï¼ˆValueï¼‰ï¼šè¡¨ç¤ºå¯¹è±¡ä¸­çš„å€¼ç±»å‹
- Eï¼ˆElementï¼‰ï¼šè¡¨ç¤ºå…ƒç´ ç±»å‹

å…¶å®å¹¶ä¸æ˜¯åªèƒ½å®šä¹‰ä¸€ä¸ªç±»å‹å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥å¸Œæœ›å®šä¹‰çš„ä»»ä½•æ•°é‡çš„ç±»å‹å˜é‡ã€‚æ¯”å¦‚æˆ‘ä»¬å¼•å…¥ä¸€ä¸ªæ–°çš„ç±»å‹å˜é‡ Uï¼Œç”¨äºæ‰©å±•æˆ‘ä»¬å®šä¹‰çš„ identity å‡½æ•°ï¼š

```js
function identity <T, U>(value: T, message: U) : T {
  console.log(message);
  return value;
}

console.log(identity<Number, string>(68, "Semlinker"));

// å½“ç„¶é™¤äº†ä¸ºç±»å‹å˜é‡æ˜¾å¼è®¾å®šå€¼ä¹‹å¤–ï¼Œä¸€ç§æ›´å¸¸è§çš„åšæ³•æ˜¯ä½¿ç¼–è¯‘å™¨è‡ªåŠ¨é€‰æ‹©è¿™äº›ç±»å‹ï¼Œä»è€Œä½¿ä»£ç æ›´ç®€æ´ã€‚
// æˆ‘ä»¬å¯ä»¥å®Œå…¨çœç•¥å°–æ‹¬å·ï¼Œæ¯”å¦‚ï¼š
console.log(identity(68, "Semlinker"));

// æ³›å‹æ¥å£
interface GenericIdentityFn<T> {
  (arg: T): T;
}
// æ³›å‹ç±»
class GenericNumber<T> {
  zeroValue: T;
  add: (x: T, y: T) => T;
}
```


### æ³›å‹çº¦æŸ

```js
function identity<T>(arg: T): T {
  console.log(arg.length); // Error
  return arg;
}

// åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å°†ä¸ä¼šçŸ¥é“ T ç¡®å®å«æœ‰ length å±æ€§ï¼Œå°¤å…¶æ˜¯åœ¨å¯ä»¥å°†ä»»ä½•ç±»å‹èµ‹ç»™ç±»å‹å˜é‡ T çš„æƒ…å†µä¸‹ã€‚
// æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯è®©ç±»å‹å˜é‡ extends ä¸€ä¸ªå«æœ‰æˆ‘ä»¬æ‰€éœ€å±æ€§çš„æ¥å£ï¼Œæ¯”å¦‚è¿™æ ·ï¼š
interface Length {
  length: number;
}

// T extends Length ç”¨äºå‘Šè¯‰ç¼–è¯‘å™¨ï¼Œæˆ‘ä»¬æ”¯æŒå·²ç»å®ç° Length æ¥å£çš„ä»»ä½•ç±»å‹ã€‚
function identity<T extends Length>(arg: T): T {
  console.log(arg.length); // å¯ä»¥è·å–lengthå±æ€§
  return arg;
}

// extends é™¤äº†åšçº¦æŸç±»å‹ï¼Œè¿˜å¯ä»¥åšæ¡ä»¶æ§åˆ¶ï¼Œç›¸å½“äºä¸ä¸€ä¸ªä¸‰å…ƒè¿ç®—ç¬¦ï¼Œåªä¸è¿‡æ˜¯é’ˆå¯¹ ç±»å‹ çš„ã€‚
T extends U ? X : Y

// å«ä¹‰ï¼šå¦‚æœ T å¯ä»¥è¢«åˆ†é…ç»™ Uï¼Œåˆ™è¿”å› Xï¼Œå¦åˆ™è¿”å› Yã€‚
// ä¸€èˆ¬æ¡ä»¶ä¸‹ï¼Œå¦‚æœ T æ˜¯ U çš„å­ç±»å‹ï¼Œåˆ™è®¤ä¸º T å¯ä»¥åˆ†é…ç»™ Uï¼Œä¾‹å¦‚ï¼š
type IsNumber<T> = T extends number ? true : false

type x = IsNumber<string>  // false
```

### æ³›å‹é»˜è®¤å€¼

æ³›å‹å‚æ•°é»˜è®¤ç±»å‹ä¸æ™®é€šå‡½æ•°é»˜è®¤å€¼ç±»ä¼¼ï¼Œ

```js
interface A<T=string> {
  name: T;
}

const strA: A = { name: "Semlinker" };
const numB: A<number> = { name: 101 };
```

### æ³›å‹æ¡ä»¶ç±»å‹

å°½ç®¡ä»¥ä¸Šä»£ç ä¸­ä½¿ç”¨äº† extends å…³é”®å­—ï¼Œä¹Ÿä¸ä¸€å®šè¦å¼ºåˆ¶æ»¡è¶³ç»§æ‰¿å…³ç³»ï¼Œè€Œæ˜¯æ£€æŸ¥æ˜¯å¦æ»¡è¶³ç»“æ„å…¼å®¹æ€§ã€‚

`T extends U ? X : Y`

ä»¥ä¸Šè¡¨è¾¾å¼çš„æ„æ€æ˜¯ï¼šè‹¥ T èƒ½å¤Ÿèµ‹å€¼ç»™ Uï¼Œé‚£ä¹ˆç±»å‹æ˜¯ Xï¼Œå¦åˆ™ä¸º Yã€‚

### æ³›å‹å·¥å…·ç±»å‹

ä¸ºäº†æ–¹ä¾¿å¼€å‘è€… TypeScript å†…ç½®äº†ä¸€äº›å¸¸ç”¨çš„å·¥å…·ç±»å‹ï¼Œæ¯”å¦‚ Partialã€Requiredã€Readonlyã€Record å’Œ ReturnType ç­‰ã€‚

#### Partial<T> çš„ä½œç”¨å°±æ˜¯å°†æŸä¸ªç±»å‹é‡Œçš„å±æ€§å…¨éƒ¨å˜ä¸ºå¯é€‰é¡¹ ?ã€‚

```js
/**
 * node_modules/typescript/lib/lib.es5.d.ts
 * Make all properties in T optional
 */
type Partial<T> = {
    [P in keyof T]?: T[P];
};
```

åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œé¦–å…ˆé€šè¿‡ keyof T æ‹¿åˆ° T çš„æ‰€æœ‰å±æ€§åï¼Œç„¶åä½¿ç”¨ in è¿›è¡Œéå†ï¼Œå°†å€¼èµ‹ç»™ Pï¼Œæœ€åé€šè¿‡ T[P] å–å¾—ç›¸åº”çš„å±æ€§å€¼ã€‚ä¸­é—´çš„ ? å·ï¼Œç”¨äºå°†æ‰€æœ‰å±æ€§å˜ä¸ºå¯é€‰ã€‚

#### Record<K extends keyof any, T> çš„ä½œç”¨æ˜¯å°† K ä¸­æ‰€æœ‰çš„å±æ€§çš„å€¼è½¬åŒ–ä¸º T ç±»å‹ã€‚

## å¼€è¯¾å§

### reactæºç è°ƒè¯•

ç”±äºé€’å½’æ‰§è¡Œï¼Œæ‰€ä»¥æ›´æ–°ä¸€æ—¦å¼€å§‹ï¼Œä¸­é€”å°±æ— æ³•ä¸­æ–­ã€‚å½“å±‚çº§å¾ˆæ·±æ—¶ï¼Œé€’å½’æ›´æ–°æ—¶é—´è¶…è¿‡äº†16msï¼Œç”¨æˆ·äº¤äº’å°±ä¼šå¡é¡¿ï¼Œå› æ­¤æå‡ºäº†è§£å†³åŠæ³•â€”â€”ç”¨å¯ä¸­æ–­çš„å¼‚æ­¥æ›´æ–°ä»£æ›¿åŒæ­¥çš„æ›´æ–°ã€‚

- Reconciler(åè°ƒå™¨)ï¼Œè´Ÿè´£æ‰¾å‡ºå˜åŒ–çš„ç»„ä»¶
- Rendererï¼ˆæ¸²æŸ“å™¨ï¼‰ï¼Œè´Ÿè´£å°†å˜åŒ–çš„ç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢
- Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰â€”â€” è°ƒåº¦ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œé«˜ä¼˜ä»»åŠ¡ä¼˜å…ˆè¿›å…¥Reconcilerï¼ˆreact16å¼•å…¥ï¼‰

åœ¨React16ä¸­ï¼ŒReconcilerä¸Rendererä¸å†æ˜¯äº¤æ›¿å·¥ä½œã€‚å½“Schedulerå°†ä»»åŠ¡äº¤ç»™Reconcileråï¼ŒReconcilerä¼šä¸ºå˜åŒ–çš„è™šæ‹ŸDOMæ‰“ä¸Šä»£è¡¨å¢/åˆ /æ›´æ–°çš„æ ‡è®°ï¼Œæ•´ä¸ªSchedulerä¸Reconcilerçš„å·¥ä½œéƒ½åœ¨å†…å­˜ä¸­è¿›è¡Œã€‚åªæœ‰å½“æ‰€æœ‰ç»„ä»¶éƒ½å®ŒæˆReconcilerçš„å·¥ä½œï¼Œæ‰ä¼šç»Ÿä¸€äº¤ç»™Rendererã€‚

16.6mså†…ï¼šjsæ‰§è¡Œ-ã€‹å¸ƒå±€-ã€‹æ ·å¼ç»˜åˆ¶
[è¾“å…¥å­—ç¬¦è¶Šå¤šï¼Œæ¸²æŸ“çš„èŠ‚ç‚¹è¶Šå¤šï¼Œè¶Šè€ƒéªŒæ€§èƒ½](https://codesandbox.io/s/concurrent-ibzkq)

å°†åŒæ­¥æ›´æ–°æ›´æ¢ä¸ºå¯ä¸­æ–­çš„å¼‚æ­¥æ›´æ–°

React16é‡‡ç”¨æ–°çš„Reconcilerï¼Œä¸»è¦è§£å†³å¤§ä»»åŠ¡å¯ä»¥åˆ†ç‰‡ï¼Œä»è€Œé¿å…æ¸²æŸ“å¤§ä»»åŠ¡å¡é¡¿ã€‚ Reconcilerå†…éƒ¨é‡‡ç”¨äº†Fiberçš„æ¶æ„ã€‚

Fiberå¹¶ä¸æ˜¯è®¡ç®—æœºæœ¯è¯­ä¸­çš„æ–°åè¯ï¼Œä»–çš„ä¸­æ–‡ç¿»è¯‘å«åšçº¤ç¨‹ï¼Œä¸è¿›ç¨‹ï¼ˆProcessï¼‰ã€çº¿ç¨‹ï¼ˆThreadï¼‰ã€åç¨‹ï¼ˆCoroutineï¼‰åŒä¸ºç¨‹åºæ‰§è¡Œè¿‡ç¨‹ã€‚

åœ¨å¾ˆå¤šæ–‡ç« ä¸­å°†çº¤ç¨‹ç†è§£ä¸ºåç¨‹çš„ä¸€ç§å®ç°ã€‚åœ¨JSä¸­ï¼Œåç¨‹çš„å®ç°ä¾¿æ˜¯Generatorã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†çº¤ç¨‹(Fiber)ã€åç¨‹(Generator)ç†è§£ä¸ºä»£æ•°æ•ˆåº”æ€æƒ³åœ¨JSä¸­çš„ä½“ç°ã€‚

React Fiberå¯ä»¥ç†è§£ä¸ºï¼š

Reactå†…éƒ¨å®ç°çš„ä¸€å¥—çŠ¶æ€æ›´æ–°æœºåˆ¶ã€‚æ”¯æŒä»»åŠ¡ä¸åŒä¼˜å…ˆçº§ï¼Œå¯ä¸­æ–­ä¸æ¢å¤ï¼Œå¹¶ä¸”æ¢å¤åå¯ä»¥å¤ç”¨ä¹‹å‰çš„ä¸­é—´çŠ¶æ€ã€‚

**å…¶ä¸­æ¯ä¸ªä»»åŠ¡æ›´æ–°å•å…ƒä¸ºReact Elementå¯¹åº”çš„FiberèŠ‚ç‚¹**ã€‚

æˆ‘ä»¬äº†è§£äº†Fiberçš„èµ·æºä¸æ¶æ„ï¼Œå…¶ä¸­FiberèŠ‚ç‚¹å¯ä»¥æ„æˆFiberæ ‘ã€‚é‚£ä¹ˆFiberæ ‘å’Œé¡µé¢å‘ˆç°çš„DOMæ ‘æœ‰ä»€ä¹ˆå…³ç³»ï¼ŒReactåˆæ˜¯å¦‚ä½•æ›´æ–°DOMçš„å‘¢ï¼Ÿ
****

## react

reactç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„jsåº“ï¼Œ

å‘é€æ•°æ®ï¼Œå¤„ç†æ•°æ®éƒ½ä¸å¹²ï¼Œåªåšæ“ä½œdomå±‚é¢é¡µé¢

åŸç”Ÿçš„ç—›ç‚¹ï¼šæ“ä½œçœŸå®domï¼ˆæ¯æ¬¡éƒ½é‡å»ºçœŸå®domï¼Œæˆæœ¬é«˜ï¼›è™šæ‹Ÿdomä¼šé‡ç”¨ä¹‹å‰çš„ï¼Ÿï¼‰ï¼Œæ²¡æœ‰ç»„ä»¶åŒ–ï¼Œ

- å‘½ä»¤å¼ç¼–ç  -ã€‹ å£°æ˜å¼ç»„ä»¶ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡å’Œç»„ä»¶å¤ç”¨ç‡
- react-native ä½¿ç”¨jsç¼–å†™iosæˆ–è€…adroidåº”ç”¨
- diffç®—æ³• + è™šæ‹Ÿdom

### reactå…¥é—¨

æ–°å»ºhtmlï¼Œå¼•å…¥ä¸‹é¢ä¸‰ä¸ªæ–‡ä»¶ï¼Œç›´æ¥æ“ä½œï¼š

- babel -ã€‹es6è½¬es5ï¼Œè¿˜å¯ä»¥è§£æimportï¼Œjsxï¼ˆè½¬ä¸ºjsï¼‰ç­‰è¯­æ³•
- reactï¼šæ ¸å¿ƒåº“
- react-domï¼šä¾èµ–reactï¼Œæ“ä½œdom

```html
<!-- åªåœ¨æœ¬åœ°å­¦ä¹ é˜¶æ®µä½¿ç”¨ï¼Œç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œé¡¹ç›®åºå¤§ï¼Œæµè§ˆå™¨é babelè¿è¡Œæ—¶è§£æå¾ˆè€—æ—¶ -->
<script type="text/babel">
    // å®šä¹‰è™šæ‹Ÿdomï¼Œå³ä¾§ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯jsxï¼Œé babelè§£æ
    const vDom = <h1>hello,react</h1>

    React.render(vDom, document.getElementById('#app'))
</script>
```

### è™šæ‹Ÿdomçš„ä¸¤ç§åˆ›å»ºæ–¹å¼

 - ä½¿ç”¨jsxï¼Œç®€æ´æ–¹ä¾¿
 - ä½¿ç”¨jsï¼ŒReact.createElement('h1', { id: 'titlt' }, 'hello, react')

å› æ­¤ä½¿ç”¨jsxè¯­æ³•å¯ä»¥æå¤§çš„å‡è½»ç¼–ç è´Ÿæ‹…ã€‚è™½ç„¶ç”¨jsxå‡è½»äº†å¼€å‘è€…çš„æˆæœ¬ï¼Œä½†babelæœ€ç»ˆä¹Ÿä¼šè½¬ä¸ºä¸Šé¢çš„jså½¢å¼ã€‚

### è™šæ‹Ÿdomä¸çœŸå®dom

- è™šæ‹Ÿdomå…¶å®å°±æ˜¯ä¸€èˆ¬çš„Objectå¯¹è±¡è€Œå·²ã€‚
- æ¯”çœŸå®domæ›´åŠ è½»é‡ã€‚
- è™šæ‹Ÿdomæœ€ç»ˆä¼šè½¬ä¸ºçœŸå®dom

### jsxçš„è¯­æ³•

- å…¨ç§°javascript xml
- ä¸€ç§ç±»ä¼¼xmlçš„jsæ‰©å±•è¯­æ³•
- æœ¬è´¨æ˜¯React.createElement()æ–¹æ³•çš„è¯­æ³•ç³–
- ä½œç”¨ç”¨æ¥ç®€åŒ–å¼€å‘è€…åˆ›å»ºè™šæ‹Ÿdom

xmlæ—©æœŸç”¨äºå­˜å‚¨å’Œä¼ è¾“æ•°æ®ï¼Œå¦‚ä¸‹å…¶å®ä¸»è¦ä¸ºäº†å­˜å‚¨tomå’Œ17ï¼Œå¤šäº†å¾ˆå¤šä¸œè¥¿ï¼Œåæ¥å‡ºç°äº†æ›´åŠ æ–¹ä¾¿çš„jsonæ•°æ®æ ¼å¼

```xml
<student>
    <name>tom</name>
    <age>17</age>
</student>
```

è¯­æ³•è§„åˆ™ï¼š
- è™šæ‹Ÿdomï¼Œä¸è¦å¼•å·
- æ··å…¥jsè¡¨è¾¾å¼éœ€è¦{}ï¼Œæ³¨æ„æ˜¯è¡¨è¾¾å¼ï¼ï¼ï¼ã€‚
- æ ·å¼çš„ç±»åä½¿ç”¨className
- å†…æ•›æ ·å¼ä¸èƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯ï¼šstyle={{ key:value }}çš„å½¢å¼
- jsxä¸èƒ½æœ‰å¤šä¸ªæ ¹æ ‡ç­¾
- jsxé‡Œçš„æ ‡ç­¾å¿…é¡»é—­åˆ
- å°å†™æ ‡ç­¾éƒ½é»˜è®¤æ˜¯htmlçš„åŒåæ ‡ç­¾ï¼Œè‹¥htmlä¸­æ²¡æœ‰è¯¥æ ‡ç­¾ï¼Œåˆ™æŠ¥é”™ï¼Œä½†å¯ä»¥æ˜¾ç¤ºã€‚
- é¦–å­—ç¬¦å¤§å†™çš„æ ‡ç­¾æ˜¯è‡ªå®šä¹‰çš„ç»„ä»¶ã€‚

### jsxå°ç»ƒä¹ 

- jsxå¦‚æœæ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œjsxä¼šéå†æ¸²æŸ“ã€‚ä½†ä¼ å…¥ä¸€ä¸ªå¯¹è±¡åˆ™ä¸å¯ä»¥
- è¡¨è¾¾å¼ï¼Œä¸€ä¸ªè¡¨è¾¾å¼ä¼šäº§ç”Ÿä¸€ä¸ªå€¼ï¼›åˆ¤æ–­æ˜¯å¦ä¸ºè¡¨è¾¾å¼ï¼Œåªéœ€è¦ç”¨ä¸€ä¸ªå˜é‡æ¥æ”¶è¡¨è¾¾å¼çš„è¿”å›å€¼å³å¯ï¼Œèƒ½æ¥æ”¶åˆ°åˆ™ä¸ºè¡¨è¾¾å¼

### reactæ˜¯é¢å‘ç»„ä»¶ç¼–ç¨‹

- å‡½æ•°ç»„ä»¶ï¼Œåå­—é¦–å­—æ¯å¤§å†™
- babelï¼Œ è¯•ä¸€è¯•ï¼Œæ€ä¹ˆå¢åŠ es5çš„é€‰é¡¹
- å‡½æ•°ç»„ä»¶è¢«babelç¼–è¯‘åï¼Œå¼€å¯äº†ä¸¥æ ¼æ¨¡å¼ï¼Œå› æ­¤å†…éƒ¨çš„thisä¼šæŒ‡å‘undefinedï¼Œæ•´ä¸ªå‡½æ•°éƒ½å¤„åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹

```js
class P {}
const p1 = new P();

console.log(p1);
// PÂ {} ï¼Œ æ§åˆ¶å°çš„æ‰“å°æ•ˆæœï¼ŒPè¡¨ç¤ºè¿™ä¸ªå®ä¾‹çš„ç±»ã€‚åé¢çš„{}æ‰æ˜¯å®ä¾‹
// classé‡Œçš„thisæŒ‡å‘å®ä¾‹ã€‚
```

- ç±»ä¸­çš„æ„é€ å™¨ä¸æ˜¯å¿…é¡»å†™çš„ï¼Œ
- åœ¨reactä¸­ï¼Œç»‘å®šå‡½æ•°åªæ˜¯å°†å‡½æ•°çš„å¼•ç”¨èµ‹å€¼ç»™äº†onClickç­‰ï¼Œå¹¶ä¸æ˜¯å®ä¾‹è°ƒç”¨ï¼Œå› æ­¤ä¼šä¸¢å¤±ä¸€äº›ä¿¡æ¯ã€‚
- ç±»ä¸­çš„æ–¹æ³•é»˜è®¤æ˜¯å¼€å¯äº†å±€éƒ¨çš„ä¸¥æ ¼æ¨¡å¼ï¼Œå› æ­¤æ–¹æ³•ä¸­çš„thisä¼šæŒ‡å‘undefined
- å¦å¤–ç±»ä¸­çš„renderå‡½æ•°ï¼Œä¹‹æ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨thisï¼Œæ˜¯å› ä¸ºreactå®ä¾‹åŒ–ç»„ä»¶åï¼Œé€šè¿‡å®ä¾‹è°ƒç”¨çš„renderæ–¹æ³•ï¼Œå› æ­¤thiså¹¶æ²¡æœ‰ä¸¢å¤±
- å¯ä»¥è‡ªå·±æµ‹è¯•ï¼Œå®ä¾‹åŒ–ç±»ç»„ä»¶ï¼Œç„¶åç”¨å®ä¾‹å»è°ƒç”¨é‡Œé¢çš„érenderæ–¹æ³•ï¼Œçœ‹çœ‹thiså°±çŸ¥é“äº†ã€‚
- åœ¨constructoré‡Œä½¿ç”¨bindï¼Œå…¶å®ç›¸å½“äºå°†åŸå‹ä¸Šçš„æ–¹æ³•ç»‘å®šthisåé‡æ–°èµ‹å€¼åˆ°å½“å‰å®ä¾‹çš„åŒåå±æ€§ä¸Šäº†ï¼Œåç»­é¡µé¢æ¸²æŸ“å˜ä¼˜å…ˆä½¿ç”¨å½“å‰å®ä¾‹ä¸Šçš„æ–¹æ³•ï¼Œç„¶åæ‰æ˜¯åŸå‹ä¸Šçš„ã€‚
- this.stateæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åsetStateç”¨æ¥æ›´æ”¹stateï¼Œå½“ç„¶è¿˜å¯ä»¥å®šä¹‰å…¶ä»–å±æ€§ï¼Œæ¯”å¦‚peiqiç­‰ç­‰

### props

- å±•å¼€è¿ç®—ç¬¦ï¼Œä¸»è¦ç”¨åœ¨æ•°ç»„ä¸Šï¼Œä½†ä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨å¯¹è±¡ä¸Šï¼Œå¦‚ä¸‹ï¼Œéœ€è¦{}è¯­æ³•ï¼Œæ³¨æ„åœ¨reactä¸­åªèƒ½ä½¿ç”¨åœ¨ç»„ä»¶çš„å±æ€§ä¼ é€’ä¸­

```js
var obj1 = { foo: 'bar', x: 42 };
var obj2 = { foo: 'baz', y: 13 };

var clonedObj = { ...obj1 };
// å…‹éš†åçš„å¯¹è±¡: { foo: "bar", x: 42 }
```
- å¯¹ç»„ä»¶çš„æ ‡ç­¾å±æ€§è¿›è¡Œç±»å‹é™åˆ¶ï¼Œéœ€è¦å¼•å…¥ç‹¬ç«‹çš„PropsTypesï¼Œåœ¨reactä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åº“

```js
import PropTypes from 'prop-types';

class Greeting extends React.Component {
  render() {
    return (
      <h1>Hello, {this.props.name}</h1>
    );
  }
}

// ç»™ç»„ä»¶çš„propTypeså±æ€§ä¸Šæ·»åŠ ï¼Œæ³¨æ„å’ŒPropTypesä¸å®¹
Greeting.propTypes = {
  name: PropTypes.string
};

// ç»™ç±»è‡ªèº«æ·»åŠ å±æ€§,è€Œä¸æ˜¯ä¸Šé¢åˆ†å¼€çš„å†™æ³•
class Greeting extends React.Component {
    static propTypes = {
        name: PropTypes.string
    }
}

const p = { age: 1, name: 'jon' }
// å¦‚ä¸‹ä¼ é€’å¯¹è±¡
ReactDOM.render(<Greeting {...p}/>, ele)
```

### æ„é€ å™¨

æ„é€ å™¨é»˜è®¤æ¥å—propså‚æ•°ï¼Œå¹¶æ‰§è¡Œsuper(props)ï¼Œè¿™æ ·çš„è¯æ‰ä¼šåœ¨å®ä¾‹ä¸Šä½¿ç”¨this.propsï¼›å¦‚æœå†™äº†constructorï¼Œä½†å¹¶æ²¡æœ‰ä¼ é€’propsï¼Œåˆ™this.propsæ˜¯undefined

é€šå¸¸ï¼Œåœ¨ React ä¸­ï¼Œæ„é€ å‡½æ•°ä»…ç”¨äºä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š

- é€šè¿‡ç»™ this.state èµ‹å€¼å¯¹è±¡æ¥åˆå§‹åŒ–å†…éƒ¨ stateã€‚
- ä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ç»‘å®šå®ä¾‹

### å‡½æ•°å¼ç»„ä»¶

```jsx
// å‚æ•°ä¸€props
function Person (props) {
    const { name, age } = props;
    return (
        <div>
            <p>{name}</p>
            <p>{age}</p>
        </div>
    )
}
Person.propTypes = {
    name: PropTypes.string,
    age: PropTypes.number.isRequired
}
Person.defaultProps = {};
```

### refs

- refæœ€ç»ˆæ‹¿åˆ°çš„æ˜¯çœŸå®dom
- refå¯ä»¥æ”¯æŒå­—ç¬¦ä¸²(æ•ˆç‡ä½ï¼Œreactæœ¬èº«å¸®ä½ æ”¶é›†åˆ°refsä¸Š)ã€å›è°ƒå‡½æ•°(å…¶å®å°±æ˜¯åœ¨å‡½æ•°å†…éƒ¨ï¼Œå°†å…ƒç´ æŒ‚åœ¨å®ä¾‹ä¸Šï¼Œç„¶åå†è·å–)ã€
- å›è°ƒå‡½æ•°æ‰§è¡Œæ¬¡æ•°ï¼Ÿæ›´æ–°æ—¶ä¼šæ‰§è¡Œä¸¤æ¬¡ï¼Œå¯ä»¥å°†æ–¹æ³•ç›´æ¥å®šä¹‰åœ¨classçš„æ–¹æ³•é‡Œï¼Œå½“ç„¶ä¹Ÿæ— å…³ç´§è¦
- jsxä¸­æ³¨é‡Šå¦‚ä½•å†™ï¼Œéœ€è¦ { // } æˆ–è€… { /* xxx */ }æ‰å¯ä»¥ï¼Œæ³¨æ„æƒ³ä½¿ç”¨jsçš„æ³¨é‡Šæ–¹å¼ï¼Œå¿…é¡»åœ¨jsçš„ç¯å¢ƒä¸­ï¼Œä¹Ÿå°±æ˜¯{} 
- React.createRef() è¿”å›ä¸€ä¸ªå®¹å™¨ï¼Œè¯¥å®¹å™¨å¯ä»¥å­˜å‚¨è¢«refæ ‡è¯†çš„èŠ‚ç‚¹ï¼Œä»currentå±æ€§ä¸Šè·å–å…ƒç´ èŠ‚ç‚¹ã€‚è€Œä¸”æ˜¯ä¸“äººä¸“ç”¨ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹éœ€è¦å»ºä¸€ä¸ªcreateRef()ã€‚ã€‚ã€‚reactæ¨èè¿™ç§æ–¹å¼ï¼Œè™½ç„¶ç¹ç

- é¿å…é¢‘ç¹ä½¿ç”¨refï¼Œå¯ä»¥å€ŸåŠ©event.targetï¼Œä¹Ÿå°±æ˜¯æ“ä½œçš„å…ƒç´ å’Œç»‘å®šäº‹ä»¶çš„å…ƒç´ æ˜¯åŒä¸€ä¸ª

React.forwardRef ä¼šåˆ›å»ºä¸€ä¸ªReactç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶èƒ½å¤Ÿå°†å…¶æ¥å—çš„ ref å±æ€§è½¬å‘åˆ°å…¶ç»„ä»¶æ ‘ä¸‹çš„å¦ä¸€ä¸ªç»„ä»¶ä¸­ã€‚è¿™ç§æŠ€æœ¯å¹¶ä¸å¸¸è§ï¼Œä½†åœ¨ä»¥ä¸‹ä¸¤ç§åœºæ™¯ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼š
- è½¬å‘ refs åˆ° DOM ç»„ä»¶
- åœ¨é«˜é˜¶ç»„ä»¶ä¸­è½¬å‘ refs
  
React.forwardRef æ¥å—æ¸²æŸ“å‡½æ•°ä½œä¸ºå‚æ•°ã€‚React å°†ä½¿ç”¨ props å’Œ ref ä½œä¸ºå‚æ•°æ¥è°ƒç”¨æ­¤å‡½æ•°ã€‚æ­¤å‡½æ•°åº”è¿”å› React èŠ‚ç‚¹ã€‚

```js
const FancyButton = React.forwardRef((props, ref) => (
  <button ref={ref} className="FancyButton">
    {props.children}
  </button>
));

// You can now get a ref directly to the DOM button:
const ref = React.createRef();
<FancyButton ref={ref}>Click me!</FancyButton>;
```
åœ¨ä¸Šè¿°çš„ç¤ºä¾‹ä¸­ï¼ŒReact ä¼šå°† `<FancyButton ref={ref}>` å…ƒç´ çš„ ref ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™ React.forwardRef å‡½æ•°ä¸­çš„æ¸²æŸ“å‡½æ•°ã€‚è¯¥æ¸²æŸ“å‡½æ•°ä¼šå°† ref ä¼ é€’ç»™ `<button ref={ref}>` å…ƒç´ ã€‚

å› æ­¤ï¼Œå½“ React é™„åŠ äº† ref å±æ€§ä¹‹åï¼Œref.current å°†ç›´æ¥æŒ‡å‘ <button> DOM å…ƒç´ å®ä¾‹ã€‚


- useImperativeHandle(ref, createHandle, [deps])
useImperativeHandle å¯ä»¥è®©ä½ åœ¨ä½¿ç”¨ ref æ—¶è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”å½“é¿å…ä½¿ç”¨ ref è¿™æ ·çš„å‘½ä»¤å¼ä»£ç ã€‚useImperativeHandle åº”å½“ä¸ forwardRef ä¸€èµ·ä½¿ç”¨ï¼š

```js
function FancyInput(props, ref) {
  const inputRef = useRef();
  useImperativeHandle(ref, () => ({
    focus: () => {
      inputRef.current.focus();
    }
  }));
  return <input ref={inputRef} />;
}
FancyInput = forwardRef(FancyInput);
```
åœ¨æœ¬ä¾‹ä¸­ï¼Œæ¸²æŸ“ <FancyInput ref={inputRef} /> çš„çˆ¶ç»„ä»¶å¯ä»¥è°ƒç”¨ inputRef.current.focus()ã€‚



### äº‹ä»¶

- reactçš„äº‹ä»¶å‘½åonClickæ–¹å¼ï¼Œæ˜¯ä¸ºäº†æ›´å¥½çš„å…¼å®¹æ€§
- reactä¸­çš„äº‹ä»¶éƒ½æ˜¯åˆ©ç”¨äº‹ä»¶ä»£ç†

### éå—æ§ç»„ä»¶

- ç°ç”¨ç°å–

### å—æ§ç»„ä»¶

- å…¶å®å°±æ˜¯é€šè¿‡stateæ¥ç»´æŠ¤ä¸€äº›å˜é‡ï¼Œæœ‰ç‚¹ç±»ä¼¼vueä¸­çš„åŒå‘æ•°æ®ç»‘å®š
- #regionï¼Œ#endregion æ”¾åœ¨æ³¨é‡Šçš„ä¸¤å¤´ï¼Œå¯ä»¥èµ·åˆ°æŠ˜å æ•ˆæœ

### é«˜é˜¶å‡½æ•°

- è‹¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™ä¸ºé«˜é˜¶ï¼Œå¦‚Promise,setTimeoutï¼Œæ•°ç»„æ–¹æ³•ç­‰
- è‹¥å‡½æ•°è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿæ˜¯é«˜é˜¶

### å‡½æ•°æŸ¯åŠ›åŒ–

- å‡½æ•°è°ƒç”¨ç»§ç»­è¿”å›å‡½æ•°ï¼Œæœ€åç»Ÿä¸€å¤„ç†(ä¸€èˆ¬æ˜¯æ— æ³•åŒæ—¶æ¥æ”¶åˆ°å¤šä¸ªå‚æ•°æ‰ä½¿ç”¨)

### æ—§çš„ç”Ÿå‘½å‘¨æœŸ

æŒ‚è½½ï¼šmount
å¸è½½ï¼šunmout

- ReactDOM.unmountComponentAtNode(el)ï¼Œå¸è½½ç»„ä»¶
- componentDidMount
- componentWillUnmount
- render

æŒ‚è½½æ—¶ï¼š
1. constructor 
2. componentWillMount
3. render
3. componentDidMount

çˆ¶ç»„ä»¶renderæ›´æ–°æ—¶ï¼š
1. componentWillReceivePropsï¼Œè¿™é‡Œä¸»è¦æ˜¯å­ç»„ä»¶æ¥åˆ°propsï¼Œé¡µé¢ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¸ä¼šæ‰§è¡Œè¯¥é’©å­ï¼Œåç»­çš„æ›´æ–°æ‰ä¼šæ‰§è¡Œ
2. shouldComponentUpdate
3. componentWillUpdate
4. render
5. componentDidUpdate

setStateæ—¶ï¼š
1. setStateè°ƒç”¨
2. shouldComponentUpdateï¼Œè¿”å›å¸ƒå°”å€¼ï¼Œtrueåˆ™ç»§ç»­å¾€ä¸‹èµ°
3. componentWillUpdate
4. render
5. componentDidUpdate


forceUpdateè°ƒç”¨æ—¶ï¼š
0. forceUpdateè°ƒç”¨æ—¶ï¼š
1. componenetWillUpdate
2. render
3. componentDidUpdate

å¸è½½ç»„ä»¶æ—¶ï¼ŒReactDOM.unmountComponentAtNode()è§¦å‘ï¼š
1. componentWillUnmountï¼Œæ²¡æœ‰åƒvueä¸­çš„destroyedé’©å­

- è‡³äºç¬¬ä¸€æ¬¡çš„é’©å­æ²¡æœ‰æ‰§è¡Œï¼Œåº”è¯¥æ˜¯æ¡†æ¶åˆå§‹åŒ–æ—¶çš„é€»è¾‘ï¼Œå¾…æ ¸å®ï¼Ÿï¼Ÿï¼Ÿ
- åœ¨componentDidMounté’©å­é‡Œå‘é€è¯·æ±‚ï¼Œæ‰§è¡Œä¸€äº›åˆå§‹åŒ–çš„æ“ä½œï¼Œé‚£åœ¨componentWillMounté‡Œå¯ä»¥æ‹¿åˆ°this.stateå—ï¼Ÿä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå› æ­¤è¯·æ±‚å¯ä»¥æ”¾åœ¨è¿™é‡Œå§

### æ–°çš„ç”Ÿå‘½å‘¨æœŸ

- æ–°ç‰ˆæœ¬ä¸‹çš„reactè¿˜å¯ä»¥ä½¿ç”¨æ—§çš„é’©å­ï¼Œä½†ä¼šæ§åˆ¶å°è­¦å‘Šï¼Œä½†å¦‚æœåœ¨å°±é’©å­é‡Œå‰é¢åŠ ä¸Šï¼šUNSAFE_ å°±å¯ä»¥å¹²æ‰è­¦å‘Šäº†
- åªæœ‰ä¸‰ä¸ªå¸¦willçš„é’©å­ï¼Œæ‰éœ€è¦åŠ  UNSAFE_ï¼Œé™¤äº†componentWillUnmountä¸éœ€è¦ã€‚
- ä¸ºä»€ä¹ˆåŠ UNSAFE_å‘¢ï¼Ÿè¿™äº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ç»å¸¸è¢«è¯¯è§£å’Œæ»¥ç”¨ï¼›æ­¤å¤–ï¼Œæˆ‘ä»¬é¢„è®¡ï¼Œåœ¨å¼‚æ­¥æ¸²æŸ“ä¸­ï¼Œå®ƒä»¬æ½œåœ¨çš„è¯¯ç”¨é—®é¢˜å¯èƒ½æ›´å¤§ã€‚æˆ‘ä»¬å°†åœ¨å³å°†å‘å¸ƒçš„ç‰ˆæœ¬ä¸­ä¸ºè¿™äº›ç”Ÿå‘½å‘¨æœŸæ·»åŠ  â€œUNSAFE_â€ å‰ç¼€ã€‚ï¼ˆ**è¿™é‡Œçš„ â€œunsafeâ€ ä¸æ˜¯æŒ‡å®‰å…¨æ€§ï¼Œè€Œæ˜¯è¡¨ç¤ºä½¿ç”¨è¿™äº›ç”Ÿå‘½å‘¨æœŸçš„ä»£ç åœ¨ React çš„æœªæ¥ç‰ˆæœ¬ä¸­æ›´æœ‰å¯èƒ½å‡ºç° bugï¼Œå°¤å…¶æ˜¯åœ¨å¯ç”¨å¼‚æ­¥æ¸²æŸ“ä¹‹åã€‚**ï¼‰[ä¸ºä»€ä¹ˆåŠ UNSAFE_](https://zh-hans.reactjs.org/blog/2018/03/27/update-on-async-rendering.html)

æŒ‚è½½æ—¶ï¼š
1. constructor
2. getDerivedStateFromPropsï¼Œè€Œä¸”è¿™ä¸ªé’©å­éœ€è¦æ·»åŠ staticï¼Œæ·»åŠ åˆ°ç±»ä¸Šã€‚è¿˜å¿…é¡»è¿”å›nullæˆ–çŠ¶æ€å¯¹è±¡ï¼ˆä¼šå½±å“åç»­æ¸²æŸ“ï¼Œä¸»è¦ç”¨äºstateçš„çŠ¶æ€åç»­å®Œå…¨å–å†³äºpropsï¼Œæå°‘ç”¨ï¼‰
3. render
4. componentDidMount

æ›´æ–°æ—¶ï¼š
1. getDerivedStateFromProps
2. shouldComponentUpdate
3. render
4. getSnapshotBeforeUpdateï¼Œéœ€è¦è¿”å›å¿«ç…§(ä»»ä½•å€¼éƒ½è¡Œ)æˆ–nullï¼Œ
5. componentDidUpdateï¼Œæœ‰ä¸¤ä¸ªå‚æ•°ï¼ŒprePropså’ŒpreStateï¼Œæ–°çš„ getSnapshotBeforeUpdate ç”Ÿå‘½å‘¨æœŸæ–¹æ³•åœ¨æ›´æ–°ä¹‹å‰ï¼ˆå¦‚ï¼šæ›´æ–° DOM ä¹‹å‰ï¼‰è¢«è°ƒç”¨ã€‚æ­¤ç”Ÿå‘½å‘¨æœŸçš„è¿”å›å€¼å°†ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™ componentDidUpdateã€‚ï¼ˆé€šå¸¸ä¸éœ€è¦ï¼Œä½†åœ¨é‡æ–°æ¸²æŸ“è¿‡ç¨‹ä¸­æ‰‹åŠ¨ä¿ç•™æ»šåŠ¨ä½ç½®ç­‰æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ã€‚ï¼‰

å¸è½½æ—¶ï¼š
1. componentWillUnmount

æ€»ç»“ï¼š
- å³å°†åºŸå¼ƒä¸‰ä¸ªé’©å­
- ä¸¤ä¸ªæ–°å¢çš„é’©å­ï¼ˆå…¶å®åç»­å‡ ä¹ä¸ç”¨ï¼‰

## reactå¸¸è§é—®é¢˜é›†

### ç»„ä»¶é‡å¤æŒ‚è½½

```jsx
const BoxStyle = ({ children })=><div className='card' >{ children }</div>

export default function Home(){
   const [ number , setNumber ] = useState(0)
   const NewIndex = () => <BoxStyle><Index number={number}  /></BoxStyle>
   return <div>
      <NewIndex  />
      <button onClick={ ()=>setNumber(number+1) } >ç‚¹èµ</button>
   </div>
}
```

åœ¨æ¯ä¸€æ¬¡ render è¿‡ç¨‹ä¸­ï¼Œéƒ½å½¢æˆä¸€ä¸ªæ–°ç»„ä»¶ï¼Œ**å¯¹äºæ–°ç»„ä»¶ï¼ŒReact å¤„ç†é€»è¾‘æ˜¯ç›´æ¥å¸è½½è€ç»„ä»¶ï¼Œé‡æ–°æŒ‚è½½æ–°ç»„ä»¶**ï¼Œæ‰€ä»¥æˆ‘ä»¬å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæ³¨æ„ä¸€ä¸ªé—®é¢˜é‚£å°±æ˜¯ï¼š
- å¯¹äºå‡½æ•°ç»„ä»¶ï¼Œä¸è¦åœ¨å…¶å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­å£°æ˜æ–°ç»„ä»¶å¹¶æ¸²æŸ“ï¼Œè¿™æ ·æ¯æ¬¡å‡½æ•°æ›´æ–°ä¼šä¿ƒä½¿ç»„ä»¶é‡å¤æŒ‚è½½ã€‚
- å¯¹äºç±»ç»„ä»¶ï¼Œä¸è¦åœ¨ render å‡½æ•°ä¸­ï¼Œåšå¦‚ä¸ŠåŒæ ·çš„æ“ä½œï¼Œå¦åˆ™ä¹Ÿä¼šä½¿å­ç»„ä»¶é‡å¤æŒ‚è½½ã€‚

### 

å¤§å®¶ç”¨å‡½æ•°ç»„ä»¶+ç±»ç»„ä»¶å¼€å‘çš„æ—¶å€™ï¼Œå¦‚æœç”¨åˆ° React.memo React.PureComponentç­‰apiï¼Œè¦æ³¨æ„ç»™è¿™äº›ç»„ä»¶ç»‘å®šäº‹ä»¶çš„æ–¹å¼:
- å¦‚æœæ˜¯å‡½æ•°ç»„ä»¶ï¼Œé‚£ä¹ˆæƒ³è¦æŒç»­ä¿æŒçº¯ç»„ä»¶çš„æ¸²æŸ“æ§åˆ¶çš„ç‰¹æ€§çš„è¯ï¼Œé‚£ä¹ˆè¯·ç”¨ useCallback,useMemoç­‰apiå¤„ç†ï¼Œ
- å¦‚æœæ˜¯ç±»ç»„ä»¶ï¼Œè¯·ä¸è¦ç”¨ç®­å¤´å‡½æ•°ç»‘å®šäº‹ä»¶ï¼Œç®­å¤´å‡½æ•°åŒæ ·ä¼šé€ æˆå¤±æ•ˆçš„æƒ…å†µã€‚
- PureComponentæ˜¯ React.memoåªèƒ½å¯¹propsçš„æƒ…å†µç¡®å®šæ˜¯å¦æ¸²æŸ“ï¼Œè€ŒPureComponentæ˜¯é’ˆå¯¹propså’Œstateã€‚
- React.memo: ç¬¬äºŒä¸ªå‚æ•° è¿”å› true ç»„ä»¶ä¸æ¸²æŸ“ ï¼Œè¿”å› false ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚ å‚æ•°2å¯ä»¥ä¼ å…¥ä¸€ä¸ªå›è°ƒï¼Œå›è°ƒå†…å¢åŠ ä¸€äº›é€»è¾‘ï¼Œè¿›è€Œå®šåˆ¶æ›´å¤šåœºæ™¯ã€‚
- shouldComponentUpdate: è¿”å› true ç»„ä»¶æ¸²æŸ“ ï¼Œè¿”å› false ç»„ä»¶ä¸æ¸²æŸ“ã€‚



### reactäº‹ä»¶æœºåˆ¶

Reactå¹¶ä¸æ˜¯å°†clickäº‹ä»¶ç»‘å®šåˆ°äº†divçš„çœŸå®DOMä¸Šï¼Œè€Œæ˜¯åœ¨documentå¤„ç›‘å¬äº†æ‰€æœ‰çš„äº‹ä»¶ï¼Œå½“äº‹ä»¶å‘ç”Ÿå¹¶ä¸”å†’æ³¡åˆ°documentå¤„çš„æ—¶å€™ï¼ŒReactå°†äº‹ä»¶å†…å®¹å°è£…å¹¶äº¤ç”±çœŸæ­£çš„å¤„ç†å‡½æ•°è¿è¡Œã€‚è¿™æ ·çš„æ–¹å¼ä¸ä»…ä»…å‡å°‘äº†å†…å­˜çš„æ¶ˆè€—ï¼Œè¿˜èƒ½åœ¨ç»„ä»¶æŒ‚åœ¨é”€æ¯æ—¶ç»Ÿä¸€è®¢é˜…å’Œç§»é™¤äº‹ä»¶ã€‚

å®ç°åˆæˆäº‹ä»¶çš„ç›®çš„å¦‚ä¸‹ï¼š

- åˆæˆäº‹ä»¶é¦–å…ˆæŠ¹å¹³äº†æµè§ˆå™¨ä¹‹é—´çš„å…¼å®¹é—®é¢˜ï¼Œå¦å¤–è¿™æ˜¯ä¸€ä¸ªè·¨æµè§ˆå™¨åŸç”Ÿäº‹ä»¶åŒ…è£…å™¨ï¼Œèµ‹äºˆäº†è·¨æµè§ˆå™¨å¼€å‘çš„èƒ½åŠ›ï¼›
- å¯¹äºåŸç”Ÿæµè§ˆå™¨äº‹ä»¶æ¥è¯´ï¼Œæµè§ˆå™¨ä¼šç»™ç›‘å¬å™¨åˆ›å»ºä¸€ä¸ªäº‹ä»¶å¯¹è±¡ã€‚å¦‚æœä½ æœ‰å¾ˆå¤šçš„äº‹ä»¶ç›‘å¬ï¼Œé‚£ä¹ˆå°±éœ€è¦åˆ†é…å¾ˆå¤šçš„äº‹ä»¶å¯¹è±¡ï¼Œé€ æˆé«˜é¢çš„å†…å­˜åˆ†é…é—®é¢˜ã€‚ä½†æ˜¯å¯¹äºåˆæˆäº‹ä»¶æ¥è¯´ï¼Œæœ‰ä¸€ä¸ªäº‹ä»¶æ± ä¸“é—¨æ¥ç®¡ç†å®ƒä»¬çš„åˆ›å»ºå’Œé”€æ¯ï¼Œå½“äº‹ä»¶éœ€è¦è¢«ä½¿ç”¨æ—¶ï¼Œå°±ä¼šä»æ± å­ä¸­å¤ç”¨å¯¹è±¡ï¼Œäº‹ä»¶å›è°ƒç»“æŸåï¼Œå°±ä¼šé”€æ¯äº‹ä»¶å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œä»è€Œä¾¿äºä¸‹æ¬¡å¤ç”¨äº‹ä»¶å¯¹è±¡ã€‚
  
### Reactçš„äº‹ä»¶å’Œæ™®é€šçš„HTMLäº‹ä»¶æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ

åŒºåˆ«ï¼š
- äº‹ä»¶åç§°ä¸åŒï¼ŒåŸç”Ÿæ˜¯å…¨å°å†™ï¼Œè€Œreactçš„æ˜¯é©¼å³°
- reactçš„äº‹ä»¶ä¸èƒ½ä½¿ç”¨return falseé˜»æ­¢æµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºã€‚å¿…é¡»ä½¿ç”¨evt.preventDefault()
- å¯¹äºäº‹ä»¶å‡½æ•°å¤„ç†è¯­æ³•ï¼ŒåŸç”Ÿäº‹ä»¶ä¸ºå­—ç¬¦ä¸²ï¼Œreact äº‹ä»¶ä¸ºå‡½æ•°ï¼›

åˆæˆäº‹ä»¶æ˜¯reactæ¨¡æ‹ŸåŸç”Ÿdomäº‹ä»¶æ‰€æœ‰èƒ½åŠ›çš„ä¸€ä¸ªäº‹ä»¶å¯¹è±¡ã€‚ä¼˜ç‚¹å¦‚ä¸‹

- å…¼å®¹æ‰€æœ‰æµè§ˆå™¨ï¼Œæ›´å¥½çš„è·¨å¹³å°ï¼›
- å°†äº‹ä»¶ç»Ÿä¸€å­˜æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ï¼Œé¿å…é¢‘ç¹çš„æ–°å¢ä¸åˆ é™¤ï¼ˆåƒåœ¾å›æ”¶ï¼‰ã€‚
- æ–¹ä¾¿ react ç»Ÿä¸€ç®¡ç†å’Œäº‹åŠ¡æœºåˆ¶ã€‚

åŸç”Ÿäº‹ä»¶ä¸åˆæˆäº‹ä»¶æ‰§è¡Œé¡ºåºï¼ŒåŸç”Ÿå…ˆæ‰§è¡Œï¼Œåˆæˆäº‹ä»¶ä¼šå†’æ³¡ç»‘å®šåˆ° document ä¸Šï¼Œæ‰€ä»¥å°½é‡é¿å…åŸç”Ÿäº‹ä»¶ä¸åˆæˆäº‹ä»¶æ··ç”¨ï¼Œå¦‚æœåŸç”Ÿäº‹ä»¶é˜»æ­¢å†’æ³¡ï¼Œå¯èƒ½ä¼šå¯¼è‡´åˆæˆäº‹ä»¶ä¸æ‰§è¡Œï¼Œå› ä¸ºéœ€è¦å†’æ³¡åˆ°document ä¸Šåˆæˆäº‹ä»¶æ‰ä¼šæ‰§è¡Œã€‚

## mobx-react

reactæœ‰å¾ˆå¤šçŠ¶æ€ç®¡ç†çš„ç»„ä»¶ï¼Œæ¯”å¦‚Reduxï¼ŒMobxï¼ŒJumpsuitï¼ŒAlt.jsç­‰ã€‚

éƒ½æ”¯æŒå°†storeä¸Reactç»„ä»¶è¿æ¥ï¼Œå¦‚react-reduxï¼Œmobx-reactï¼›

Mobxå’ŒReduxéƒ½æ˜¯JavaScriptåº”ç”¨çŠ¶æ€ç®¡ç†åº“ï¼Œéƒ½é€‚ç”¨äºReactï¼ŒAngularï¼ŒVueJsç­‰æ¡†æ¶æˆ–åº“ï¼Œè€Œä¸æ˜¯å±€é™äºæŸä¸€ç‰¹å®šUIåº“ã€‚

ä½†reduxå†™èµ·æ¥è¿˜æ˜¯ä¸å¦‚mobxç®€å•æ˜äº†ã€‚

ä½¿ç”¨Reduxå’ŒReactåº”ç”¨è¿æ¥æ—¶ï¼Œéœ€è¦ä½¿ç”¨react-reduxæä¾›çš„Providerå’Œconnectï¼ˆè¿™é‡Œä¹Ÿèƒ½ï¼‰

1. Providerï¼šè´Ÿè´£å°†Storeæ³¨å…¥Reactåº”ç”¨ï¼›
2. connectï¼šè´Ÿè´£å°†store stateæ³¨å…¥å®¹å™¨ç»„ä»¶ï¼Œå¹¶é€‰æ‹©ç‰¹å®šçŠ¶æ€ä½œä¸ºå®¹å™¨ç»„ä»¶propsä¼ é€’ï¼›

å¯¹äºMobxè€Œè¨€ï¼ŒåŒæ ·éœ€è¦ä¸¤ä¸ªæ­¥éª¤ï¼š

1. Providerï¼šä½¿ç”¨mobx-reactæä¾›çš„Providerå°†æ‰€æœ‰storesæ³¨å…¥åº”ç”¨ï¼›
2. ä½¿ç”¨injectå°†ç‰¹å®šstoreæ³¨å…¥æŸç»„ä»¶ï¼Œstoreå¯ä»¥ä¼ é€’çŠ¶æ€æˆ–actionï¼›ç„¶åä½¿ç”¨observerä¿è¯ç»„ä»¶èƒ½å“åº”storeä¸­çš„å¯è§‚å¯Ÿå¯¹è±¡ï¼ˆobservableï¼‰å˜æ›´ï¼Œå³storeæ›´æ–°ï¼Œç»„ä»¶è§†å›¾å“åº”å¼æ›´æ–°ã€‚


mobxçš„æµç¨‹å›¾å¦‚ä¸Šï¼Œé€šå¸¸æ˜¯ï¼šè§¦å‘actionï¼Œåœ¨actionä¸­ä¿®æ”¹stateï¼Œé€šè¿‡computedæ‹¿åˆ°stateçš„è®¡ç®—å€¼ï¼Œè‡ªåŠ¨è§¦å‘å¯¹åº”çš„reactionsï¼Œè¿™é‡ŒåŒ…å«autorunï¼Œæ¸²æŸ“è§†å›¾ç­‰ã€‚æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼šç›¸å¯¹äºreactæ¥è¯´ï¼Œmobxæ²¡æœ‰ä¸€ä¸ªå…¨å±€çš„çŠ¶æ€æ ‘ï¼ŒçŠ¶æ€åˆ†æ•£åœ¨å„ä¸ªç‹¬ç«‹çš„storeä¸­ã€‚mobxçš„å·¥ä½œåŸç†éå¸¸ç®€å•ï¼Œä½¿ç”¨Object.definePropertyæ¥æ‹¦æˆªå¯¹æ•°æ®çš„è®¿é—®ï¼Œä¸€æ—¦å€¼å‘ç”Ÿå˜åŒ–ï¼Œå°†ä¼šè°ƒç”¨reactçš„renderæ–¹æ³•æ¥å®ç°é‡æ–°æ¸²æŸ“è§†å›¾çš„åŠŸèƒ½æˆ–è€…è§¦å‘autorunç­‰ã€‚

Mobxçš„å®ç°æ€æƒ³å’ŒVueå‡ ä¹ä¸€æ ·ï¼Œæ‰€ä»¥å…¶ä¼˜ç‚¹è·ŸVueä¹Ÿå·®ä¸å¤šï¼šé€šè¿‡ç›‘å¬æ•°æ®ï¼ˆå¯¹è±¡ã€æ•°ç»„ï¼‰çš„å±æ€§å˜åŒ–ï¼Œå¯ä»¥é€šè¿‡ç›´æ¥åœ¨æ•°æ®ä¸Šæ›´æ”¹å°±èƒ½è§¦å‘UIçš„æ¸²æŸ“ï¼Œä»è€Œåšåˆ°MVVMã€å“åº”å¼ã€ä¸Šæ‰‹æˆæœ¬ä½ã€å¼€å‘æ•ˆç‡é«˜ï¼Œåœ¨æ•°æ®ç®¡ç†ä¸Šéœ€è¦å†è¯¦ç»†é˜è¿°ä¸‹å…¶åŒºåˆ«ã€‚

Reduxæ˜¯å»ºè®®å…¨å±€å”¯ä¸€Storeçš„ï¼Œå¤šä¸ªReducersä¹Ÿä¼šåœ¨ä¼ é€’ç»™react-reduxä¹‹å‰è¢«åˆå¹¶æˆä¸€ä¸ªroot reducerï¼Œä»»ä½•æ•°æ®çš„æ›´æ”¹ï¼ˆé€šè¿‡Reducerï¼‰éƒ½ä¼šé€šè¿‡è¿™ä¸€ä¸ªstoreæ¥è§¦å‘æ•´ä¸ªUIæ ‘çš„é‡æ–°æ¸²æŸ“ï¼Œå¦‚æœä¸åšä»»ä½•çš„æ€§èƒ½ä¼˜åŒ–ï¼ˆpureRenderç­‰ï¼‰ï¼Œå°±ç®—VD(Virtual Dom)æœ‰äº†å†é«˜çš„æ•ˆç‡æå‡ï¼Œå½“é¡µé¢æ•°æ®é‡ã€DOMæ•°é‡å¤§äº†ï¼Œæ€§èƒ½æ¶ˆè€—ä¹Ÿæ˜¯éå¸¸å¤§çš„ã€‚å¦å¤–ä¸€ç‚¹ï¼ŒReduxå®ç°çš„å¯¹æ•°æ®çš„ç®¡ç†æ˜¯pullæ–¹å¼çš„ï¼Œå°±æ˜¯è¯´å…¶åªèƒ½ç­‰å¾…åº”ç”¨æ´¾å‘æŸä¸ªè¡Œä¸ºï¼ˆActionï¼‰ï¼Œç„¶åé‡æ–°è§¦å‘UIçš„æ¸²æŸ“ï¼Œè€Œåšä¸åˆ°å¯¹è¡Œä¸ºçš„å¯é¢„æœŸï¼›Mobxåˆ™ä¸ä¸€æ ·ï¼Œä»–æ˜¯åŸºäºç›‘å¬æ•°æ®çš„å±æ€§å˜åŒ–æ¥å®ç°çš„ï¼Œè€Œä¸”æ˜¯å¤šstoreçš„ï¼Œå¯¹äºä»»ä½•çš„æ•°æ®å˜æ›´éƒ½æ˜¯ç¬¬ä¸€æ—¶é—´çŸ¥é“çš„ï¼Œæ‰€ä»¥å…¶å®ç°æ–¹å¼æ˜¯åŸºäºpushçš„ç›‘å¬è®¢é˜…æ¨¡å¼è€Œå®ç°ï¼Œè¿™æ ·ï¼Œä»–å°±å¯ä»¥åšåˆ°å¯¹æ•°æ®çš„å¯é¢„æµ‹ä»¥åŠç»†ç²’åº¦çš„æ§åˆ¶ï¼Œç”šè‡³å¯ä»¥é€šè¿‡ä¿®æ”¹Reactç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„æ–¹å¼æ¥å‡å°‘æ€§èƒ½çš„æ¶ˆè€—ï¼Œè€Œæ— éœ€ä½¿ç”¨è€…å¯¹è¿™äº›ç»†èŠ‚å…³å¿ƒã€‚å½“ç„¶è¿™ä¸€åˆ‡è‚¯å®šæ˜¯æœ‰äº†mobxå¯¹ç»„ä»¶åšobserveæ“ä½œæ‰èƒ½å®ç°çš„ï¼Œæ‰€ä»¥ä¹Ÿå°±æœ‰äº†observerç”¨çš„è¶Šå¤šï¼Œåº”ç”¨æ€§èƒ½è¶Šé«˜çš„è¯´æ³•ã€‚

åœ¨ React çŠ¶æ€ç®¡ç†å·¥å…·ä¸­ï¼Œæ— è®ºæ˜¯ react-redux ï¼Œè¿˜æ˜¯ mobx-reactï¼Œä¸€æ–¹é¢æƒ³è¦æŠŠ state å’Œ dispatch å‡½æ•°ä¼ é€’ç»™ç»„ä»¶ï¼Œå¦ä¸€æ–¹é¢è®¢é˜… state å˜åŒ–ï¼Œæ¥ä¿ƒä½¿ä¸šåŠ¡ç»„ä»¶æ›´æ–°ï¼Œé‚£ä¹ˆæ•´ä¸ªæµç¨‹ä¸­ï¼Œéœ€è¦ä¸€ä¸ªæˆ–å¤šä¸ª HOC æ¥æå®šã€‚äºæ˜¯ react-redux æä¾›äº† connectï¼Œmobx-react æä¾›äº† inject ï¼Œobserver ç­‰ä¼˜ç§€çš„ hocã€‚

### observer / observable

- observableæ˜¯å°†æ•°æ®æ”¹ä¸ºå“åº”å¼ï¼Œè¿™æ ·çš„è¯ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±å¯ä»¥å°†@observerç›‘æµ‹çš„ç»„ä»¶è‡ªåŠ¨æ›´æ–°ã€‚
- è€Œä¸”æ­£å¸¸çš„è®©reacté¡µé¢æ›´æ–°éœ€è¦ä½¿ç”¨this.setStateæ‰å¯ä»¥ï¼Œä½¿ç”¨è£…é¥°å™¨åï¼Œåªéœ€@observable xxx = 1; ç„¶å@observer æ•´ä¸ªç»„ä»¶å³å¯ã€‚

- observer å‡½æ•°/è£…é¥°å™¨å¯ä»¥ç”¨æ¥å°† React ç»„ä»¶è½¬å˜æˆå“åº”å¼ç»„ä»¶ã€‚ å®ƒç”¨ mobx.autorun åŒ…è£…äº†ç»„ä»¶çš„ render å‡½æ•°ä»¥ç¡®ä¿ä»»ä½•ç»„ä»¶æ¸²æŸ“ä¸­ä½¿ç”¨çš„æ•°æ®å˜åŒ–æ—¶éƒ½å¯ä»¥å¼ºåˆ¶åˆ·æ–°ç»„ä»¶ã€‚ observer æ˜¯ç”±å•ç‹¬çš„ mobx-react åŒ…æä¾›çš„ã€‚
- `import { useLocalObservable, Observer } from 'mobx-react'`ï¼Œå½“ç„¶é™¤äº†å‡½æ•°observerï¼Œè¿˜æœ‰ç»„ä»¶Observer

### inject/provide

- ä¸‹é¢çš„å«ä¹‰æ˜¯ï¼Œä»æ ¹ç»„ä»¶providerçš„storeæ‹¿å‡ºè¿™ä¸‰ä¸ªå¯¹è±¡ï¼Œç„¶åä½œä¸ºpropsä¼ ç»™FormSearchã€‚
```js
export default inject(
  'commonStore',
  'supplierLevelStore',
  'afterClassifyNewStore'
)(observer(FormSearch));
```

- Provideræ˜¯mobx-reactçš„ç»„ä»¶ï¼Œç„¶åå°†storeé‡Œæ‰€æœ‰çš„å¯¼å‡ºéƒ½ä¼ ç»™å­ç»„ä»¶
```js
<Provider {...stores}>
	<ConfigProvider locale={zhCN}>
		<HashRouter>
			<MyRouter />
		</HashRouter>
	</ConfigProvider>
</Provider>,
```

- ConfigProvideræ˜¯antdé…ç½®è¯­è¨€åŒ…çš„ã€‚

### @action vs @action.bound

action è£…é¥°å™¨/å‡½æ•°éµå¾ª javascript ä¸­æ ‡å‡†çš„ç»‘å®šè§„åˆ™ã€‚ ä½†æ˜¯ï¼Œaction.bound å¯ä»¥ç”¨æ¥è‡ªåŠ¨åœ°å°†åŠ¨ä½œç»‘å®šåˆ°ç›®æ ‡å¯¹è±¡ã€‚ æ³¨æ„ï¼Œä¸ action ä¸åŒçš„æ˜¯ï¼Œ(@)action.bound ä¸éœ€è¦ä¸€ä¸ªnameå‚æ•°ï¼Œåç§°å°†å§‹ç»ˆåŸºäºåŠ¨ä½œç»‘å®šçš„å±æ€§ã€‚

```js
class Ticker {
  @observable tick = 0

  @action.bound
  increment() {
      this.tick++ // 'this' æ°¸è¿œéƒ½æ˜¯æ­£ç¡®çš„
  }

  // ç­‰ä»·äºä¸‹é¢çš„
  @action
  increment = () => {

  }
}

const ticker = new Ticker()
setInterval(ticker.increment, 1000)
```

æ³¨æ„: **action.bound ä¸è¦å’Œç®­å¤´å‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼›ç®­å¤´å‡½æ•°å·²ç»æ˜¯ç»‘å®šè¿‡çš„å¹¶ä¸”ä¸èƒ½é‡æ–°ç»‘å®šã€‚**


### è£…é¥°å™¨

## reactå…¨å®¶æ¡¶è·¯çº¿

reactå†™ä»£ç çš„æ–¹å¼ï¼Œæ›´åƒvueä¸­renderå‡½æ•°æ–¹å¼ã€‚

å› ä¸ºä½ æ˜¯æƒ³å­¦Reactï¼Œæ‰€ä»¥æˆ‘ç»™ä½ è”ç³»ä¸€ä¸ªæ•´ä½“çš„è·¯çº¿ï¼Œä¹Ÿç›¸å½“äºReactå…¨å®¶æ¡¶ã€‚
- é¦–å…ˆReactæ¡†æ¶åŸºç¡€ï¼Œç›´æ¥æ ¹æ®å®˜æ–¹æ–‡æ¡£å­¦ä¹ æœ€æ–°çš„ç‰ˆæœ¬ã€‚
- ç„¶åReact routerï¼Œä¹Ÿå°±æ˜¯è·¯ç”±ï¼Œå­¦ä¹ æœ€æ–°çš„v4ç‰ˆæœ¬ã€‚
- å½“ä½ éœ€è¦è¿›è¡Œæ•°æ®ç®¡ç†æ—¶ï¼Œå°±å¯ä»¥å­¦ä¹ reduxæˆ–è€…mobxï¼Œä¸è¿‡å¤§å¤šæ•°å…¬å¸éƒ½æ˜¯ä½¿ç”¨reduxã€‚
- å½“ä½ éœ€è¦è¿›è¡Œå¤æ‚çš„å¼‚æ­¥æ“ä½œæˆ–è€…è¿›è¡Œå¼‚æ­¥actionæ—¶ï¼Œå°±éœ€è¦ç”¨åˆ°rxjsé…åˆredux-observableæˆ–è€…redux-sagaã€‚
- å½“ç„¶ï¼Œä½ è¿˜éœ€è¦æŒæ¡ä¸€å¥—UIç»„ä»¶åº“çš„ç”¨æ³•ã€‚æ¨èèš‚èšé‡‘æœçš„ant designã€‚

- æˆ‘æ˜¯å‰å¤©åˆšæ¥çš„æ–°åŒå­¦ï¼Œæ˜¨å¤©æŠŠé¡¹ç›®å’Œæƒé™è·‘èµ·æ¥ï¼Œç„¶åè¯„å®¡ä¸€ä¸ªéœ€æ±‚ï¼Œçœ‹ä¸‹reactç›¸å…³çš„ä¸œè¥¿
- ä»Šå¤©ä¸»è¦ç»“åˆé¡¹ç›®ï¼Œ

## reactã€react-dom
- react
- react-dom

Reactåœ¨v0.14ä¹‹å‰æ˜¯æ²¡æœ‰react-domçš„ï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½åŒ…å«åœ¨reacté‡Œã€‚ä»v0.14(2015-10)å¼€å§‹ï¼Œreactæ‰è¢«æ‹†åˆ†æˆreactå’Œreact-domã€‚ä¸ºä»€ä¹ˆè¦æŠŠreactå’Œreact-domåˆ†å¼€å‘¢ï¼Ÿå› ä¸ºæœ‰äº†react-nativeã€‚reactåªåŒ…å«äº†Webå’ŒMobileé€šç”¨çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œè´Ÿè´£Domæ“ä½œçš„åˆ†åˆ°react-domä¸­ï¼Œè´Ÿè´£Mobileçš„åŒ…å«åœ¨react-nativeä¸­ã€‚

## react-routerã€react-router-dom
- react-router
- react-router-dom

react-router:å…·æœ‰switch route routerç­‰æ–¹æ³• ï¼Œä½†ç„¡æ³•é€éæ“ä½œDOMä¾†è·³è½‰

react-router-dom :æ˜¯ä»¥react-routerç‚ºæ ¸å¿ƒï¼Œæä¾›BrowserRouter ã€Route Linkç­‰ç­‰ ï¼Œå¯ä»¥ç”¨æ“ä½œDOMçš„æ–¹å¼ä¾†æ”¹è®Špath

æ‰€ä»¥å¯¦éš›ä¸Šæˆ‘å€‘åªè¦å¼•å…¥react-router-domå³å¯ä¾†å¯¦ä½œreact-routerçš„åŠŸèƒ½

```
"react-router-dom": "^5.1.2",
```

exacté»˜è®¤ä¸ºfalseï¼Œå¦‚æœä¸ºtrueæ—¶ï¼Œéœ€è¦å’Œè·¯ç”±ç›¸åŒæ—¶æ‰èƒ½åŒ¹é…ï¼Œä½†æ˜¯å¦‚æœæœ‰æ–œæ ä¹Ÿæ˜¯å¯ä»¥åŒ¹é…ä¸Šçš„ã€‚ å¦‚æœåœ¨çˆ¶è·¯ç”±ä¸­åŠ äº†exactï¼Œæ˜¯ä¸èƒ½åŒ¹é…å­è·¯ç”±çš„,å»ºè®®åœ¨å­è·¯ç”±ä¸­åŠ exact

stricté»˜è®¤ä¸ºfalseï¼Œå¦‚æœä¸ºtrueæ—¶ï¼Œè·¯ç”±åé¢æœ‰æ–œæ è€Œurlä¸­æ²¡æœ‰æ–œæ ï¼Œæ˜¯ä¸åŒ¹é…çš„

åœ¨historyæ¨¡å¼ä¸‹ç”¨popstateç›‘å¬è·¯ç”±å˜åŒ–ï¼Œåœ¨hashæ¨¡å¼ä¸‹ç”¨hashchangeç›‘å¬è·¯ç”±çš„å˜åŒ–ã€‚

## mobxã€

å…¶å®@observable key = value; åªæ˜¯extendObservable(this, { key: value })çš„è¯­æ³•ç³–ã€‚å› æ­¤åœ¨ES5ç¯å¢ƒä¸‹ä½ ä¹Ÿèƒ½ä½¿ç”¨

## ä¸€äº›ç‚¹

- å®‰è£…pretterå³å¯æ ¼å¼åŒ– vscodeé‡Œçš„ä»£ç ã€‚

## ä¸€ã€todoListæ¡ˆä¾‹ç›¸å…³çŸ¥è¯†ç‚¹
		1.æ‹†åˆ†ç»„ä»¶ã€å®ç°é™æ€ç»„ä»¶ï¼Œæ³¨æ„ï¼šclassNameã€styleçš„å†™æ³•
		2.åŠ¨æ€åˆå§‹åŒ–åˆ—è¡¨ï¼Œå¦‚ä½•ç¡®å®šå°†æ•°æ®æ”¾åœ¨å“ªä¸ªç»„ä»¶çš„stateä¸­ï¼Ÿ
					â€”â€”æŸä¸ªç»„ä»¶ä½¿ç”¨ï¼šæ”¾åœ¨å…¶è‡ªèº«çš„stateä¸­
					â€”â€”æŸäº›ç»„ä»¶ä½¿ç”¨ï¼šæ”¾åœ¨ä»–ä»¬å…±åŒçš„çˆ¶ç»„ä»¶stateä¸­ï¼ˆå®˜æ–¹ç§°æ­¤æ“ä½œä¸ºï¼šçŠ¶æ€æå‡ï¼‰
		3.å…³äºçˆ¶å­ä¹‹é—´é€šä¿¡ï¼š
				1.ã€çˆ¶ç»„ä»¶ã€‘ç»™ã€å­ç»„ä»¶ã€‘ä¼ é€’æ•°æ®ï¼šé€šè¿‡propsä¼ é€’
				2.ã€å­ç»„ä»¶ã€‘ç»™ã€çˆ¶ç»„ä»¶ã€‘ä¼ é€’æ•°æ®ï¼šé€šè¿‡propsä¼ é€’ï¼Œè¦æ±‚çˆ¶æå‰ç»™å­ä¼ é€’ä¸€ä¸ªå‡½æ•°
		4.æ³¨æ„defaultChecked å’Œ checkedçš„åŒºåˆ«ï¼Œç±»ä¼¼çš„è¿˜æœ‰ï¼šdefaultValue å’Œ value
		5.çŠ¶æ€åœ¨å“ªé‡Œï¼Œæ“ä½œçŠ¶æ€çš„æ–¹æ³•å°±åœ¨å“ªé‡Œ

## äºŒã€githubæœç´¢æ¡ˆä¾‹ç›¸å…³çŸ¥è¯†ç‚¹
		1.è®¾è®¡çŠ¶æ€æ—¶è¦è€ƒè™‘å…¨é¢ï¼Œä¾‹å¦‚å¸¦æœ‰ç½‘ç»œè¯·æ±‚çš„ç»„ä»¶ï¼Œè¦è€ƒè™‘è¯·æ±‚å¤±è´¥æ€ä¹ˆåŠã€‚
		2.ES6å°çŸ¥è¯†ç‚¹ï¼šè§£æ„èµ‹å€¼+é‡å‘½å
					let obj = {a:{b:1}}
					const {a} = obj; //ä¼ ç»Ÿè§£æ„èµ‹å€¼
					const {a:{b}} = obj; //è¿ç»­è§£æ„èµ‹å€¼
					const {a:{b:value}} = obj; //è¿ç»­è§£æ„èµ‹å€¼+é‡å‘½å
		3.æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒæœºåˆ¶
					1.å…ˆè®¢é˜…ï¼Œå†å‘å¸ƒï¼ˆç†è§£ï¼šæœ‰ä¸€ç§éš”ç©ºå¯¹è¯çš„æ„Ÿè§‰ï¼‰
					2.é€‚ç”¨äºä»»æ„ç»„ä»¶é—´é€šä¿¡
					3.è¦åœ¨ç»„ä»¶çš„componentWillUnmountä¸­å–æ¶ˆè®¢é˜…
		4.fetchå‘é€è¯·æ±‚ï¼ˆå…³æ³¨åˆ†ç¦»çš„è®¾è®¡æ€æƒ³ï¼‰
					try {
						const response= await fetch(`/api1/search/users2?q=${keyWord}`)
						const data = await response.json()
						console.log(data);
					} catch (error) {
						console.log('è¯·æ±‚å‡ºé”™',error);
					}
				

## ä¸‰ã€è·¯ç”±çš„åŸºæœ¬ä½¿ç”¨
			1.æ˜ç¡®å¥½ç•Œé¢ä¸­çš„å¯¼èˆªåŒºã€å±•ç¤ºåŒº
			2.å¯¼èˆªåŒºçš„aæ ‡ç­¾æ”¹ä¸ºLinkæ ‡ç­¾
						<Link to="/xxxxx">Demo</Link>
			3.å±•ç¤ºåŒºå†™Routeæ ‡ç­¾è¿›è¡Œè·¯å¾„çš„åŒ¹é…
						<Route path='/xxxx' component={Demo}/>
			4.<App>çš„æœ€å¤–ä¾§åŒ…è£¹äº†ä¸€ä¸ª<BrowserRouter>æˆ–<HashRouter>

## å››ã€è·¯ç”±ç»„ä»¶ä¸ä¸€èˆ¬ç»„ä»¶
			1.å†™æ³•ä¸åŒï¼š
						ä¸€èˆ¬ç»„ä»¶ï¼š<Demo/>
						è·¯ç”±ç»„ä»¶ï¼š<Route path="/demo" component={Demo}/>
			2.å­˜æ”¾ä½ç½®ä¸åŒï¼š
						ä¸€èˆ¬ç»„ä»¶ï¼šcomponents
						è·¯ç”±ç»„ä»¶ï¼špages
			3.æ¥æ”¶åˆ°çš„propsä¸åŒï¼š
						ä¸€èˆ¬ç»„ä»¶ï¼šå†™ç»„ä»¶æ ‡ç­¾æ—¶ä¼ é€’äº†ä»€ä¹ˆï¼Œå°±èƒ½æ”¶åˆ°ä»€ä¹ˆ
						è·¯ç”±ç»„ä»¶ï¼šæ¥æ”¶åˆ°ä¸‰ä¸ªå›ºå®šçš„å±æ€§
											history:
														go: Æ’ go(n)
														goBack: Æ’ goBack()
														goForward: Æ’ goForward()
														push: Æ’ push(path, state)
														replace: Æ’ replace(path, state)
											location:
														pathname: "/about"
														search: ""
														state: undefined
											match:
														params: {}
														path: "/about"
														url: "/about"

## äº”ã€NavLinkä¸å°è£…NavLink
				1.NavLinkå¯ä»¥å®ç°è·¯ç”±é“¾æ¥çš„é«˜äº®ï¼Œé€šè¿‡activeClassNameæŒ‡å®šæ ·å¼å

## å…­ã€Switchçš„ä½¿ç”¨
				1.é€šå¸¸æƒ…å†µä¸‹ï¼Œpathå’Œcomponentæ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚
				2.Switchå¯ä»¥æé«˜è·¯ç”±åŒ¹é…æ•ˆç‡(å•ä¸€åŒ¹é…)ã€‚

## ä¸ƒã€è§£å†³å¤šçº§è·¯å¾„åˆ·æ–°é¡µé¢æ ·å¼ä¸¢å¤±çš„é—®é¢˜
				1.public/index.html ä¸­ å¼•å…¥æ ·å¼æ—¶ä¸å†™ ./ å†™ / ï¼ˆå¸¸ç”¨ï¼‰
				2.public/index.html ä¸­ å¼•å…¥æ ·å¼æ—¶ä¸å†™ ./ å†™ %PUBLIC_URL% ï¼ˆå¸¸ç”¨ï¼‰
				3.ä½¿ç”¨HashRouter

## å…«ã€è·¯ç”±çš„ä¸¥æ ¼åŒ¹é…ä¸æ¨¡ç³ŠåŒ¹é…
				1.é»˜è®¤ä½¿ç”¨çš„æ˜¯æ¨¡ç³ŠåŒ¹é…ï¼ˆç®€å•è®°ï¼šã€è¾“å…¥çš„è·¯å¾„ã€‘å¿…é¡»åŒ…å«è¦ã€åŒ¹é…çš„è·¯å¾„ã€‘ï¼Œä¸”é¡ºåºè¦ä¸€è‡´ï¼‰
				2.å¼€å¯ä¸¥æ ¼åŒ¹é…ï¼š<Route exact={true} path="/about" component={About}/>
				3.ä¸¥æ ¼åŒ¹é…ä¸è¦éšä¾¿å¼€å¯ï¼Œéœ€è¦å†å¼€ï¼Œæœ‰äº›æ—¶å€™å¼€å¯ä¼šå¯¼è‡´æ— æ³•ç»§ç»­åŒ¹é…äºŒçº§è·¯ç”±

## ä¹ã€Redirectçš„ä½¿ç”¨	
				1.ä¸€èˆ¬å†™åœ¨æ‰€æœ‰è·¯ç”±æ³¨å†Œçš„æœ€ä¸‹æ–¹ï¼Œå½“æ‰€æœ‰è·¯ç”±éƒ½æ— æ³•åŒ¹é…æ—¶ï¼Œè·³è½¬åˆ°RedirectæŒ‡å®šçš„è·¯ç”±
				2.å…·ä½“ç¼–ç ï¼š
						<Switch>
							<Route path="/about" component={About}/>
							<Route path="/home" component={Home}/>
							<Redirect to="/about"/>
						</Switch>

## åã€åµŒå¥—è·¯ç”±
				1.æ³¨å†Œå­è·¯ç”±æ—¶è¦å†™ä¸Šçˆ¶è·¯ç”±çš„pathå€¼
				2.è·¯ç”±çš„åŒ¹é…æ˜¯æŒ‰ç…§æ³¨å†Œè·¯ç”±çš„é¡ºåºè¿›è¡Œçš„

## åä¸€ã€å‘è·¯ç”±ç»„ä»¶ä¼ é€’å‚æ•°
				1.paramså‚æ•°
							è·¯ç”±é“¾æ¥(æºå¸¦å‚æ•°)ï¼š<Link to='/demo/test/tom/18'}>è¯¦æƒ…</Link>
							æ³¨å†Œè·¯ç”±(å£°æ˜æ¥æ”¶)ï¼š<Route path="/demo/test/:name/:age" component={Test}/>
							æ¥æ”¶å‚æ•°ï¼šthis.props.match.params
				2.searchå‚æ•°
							è·¯ç”±é“¾æ¥(æºå¸¦å‚æ•°)ï¼š<Link to='/demo/test?name=tom&age=18'}>è¯¦æƒ…</Link>
							æ³¨å†Œè·¯ç”±(æ— éœ€å£°æ˜ï¼Œæ­£å¸¸æ³¨å†Œå³å¯)ï¼š<Route path="/demo/test" component={Test}/>
							æ¥æ”¶å‚æ•°ï¼šthis.props.location.search
							å¤‡æ³¨ï¼šè·å–åˆ°çš„searchæ˜¯urlencodedç¼–ç å­—ç¬¦ä¸²ï¼Œéœ€è¦å€ŸåŠ©querystringè§£æ
				3.stateå‚æ•°
							è·¯ç”±é“¾æ¥(æºå¸¦å‚æ•°)ï¼š<Link to={{pathname:'/demo/test',state:{name:'tom',age:18}}}>è¯¦æƒ…</Link>
							æ³¨å†Œè·¯ç”±(æ— éœ€å£°æ˜ï¼Œæ­£å¸¸æ³¨å†Œå³å¯)ï¼š<Route path="/demo/test" component={Test}/>
							æ¥æ”¶å‚æ•°ï¼šthis.props.location.state
							å¤‡æ³¨ï¼šåˆ·æ–°ä¹Ÿå¯ä»¥ä¿ç•™ä½å‚æ•°
				


## åäºŒã€ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª
					å€ŸåŠ©this.prosp.historyå¯¹è±¡ä¸Šçš„APIå¯¹æ“ä½œè·¯ç”±è·³è½¬ã€å‰è¿›ã€åé€€
							-this.prosp.history.push()
							-this.prosp.history.replace()
							-this.prosp.history.goBack()
							-this.prosp.history.goForward()
							-this.prosp.history.go()

## åä¸‰ã€BrowserRouterä¸HashRouterçš„åŒºåˆ«
			1.åº•å±‚åŸç†ä¸ä¸€æ ·ï¼š
						BrowserRouterä½¿ç”¨çš„æ˜¯H5çš„history APIï¼Œä¸å…¼å®¹IE9åŠä»¥ä¸‹ç‰ˆæœ¬ã€‚
						HashRouterä½¿ç”¨çš„æ˜¯URLçš„å“ˆå¸Œå€¼ã€‚
			2.pathè¡¨ç°å½¢å¼ä¸ä¸€æ ·
						BrowserRouterçš„è·¯å¾„ä¸­æ²¡æœ‰#,ä¾‹å¦‚ï¼šlocalhost:3000/demo/test
						HashRouterçš„è·¯å¾„åŒ…å«#,ä¾‹å¦‚ï¼šlocalhost:3000/#/demo/test
			3.åˆ·æ–°åå¯¹è·¯ç”±stateå‚æ•°çš„å½±å“
						(1).BrowserRouteræ²¡æœ‰ä»»ä½•å½±å“ï¼Œå› ä¸ºstateä¿å­˜åœ¨historyå¯¹è±¡ä¸­ã€‚
						(2).HashRouteråˆ·æ–°åä¼šå¯¼è‡´è·¯ç”±stateå‚æ•°çš„ä¸¢å¤±ï¼ï¼ï¼
			4.å¤‡æ³¨ï¼šHashRouterå¯ä»¥ç”¨äºè§£å†³ä¸€äº›è·¯å¾„é”™è¯¯ç›¸å…³çš„é—®é¢˜ã€‚

## åå››ã€antdçš„æŒ‰éœ€å¼•å…¥+è‡ªå®šä¸»é¢˜
			1.å®‰è£…ä¾èµ–ï¼šyarn add react-app-rewired customize-cra babel-plugin-import less less-loader
			2.ä¿®æ”¹package.json
					....
						"scripts": {
							"start": "react-app-rewired start",
							"build": "react-app-rewired build",
							"test": "react-app-rewired test",
							"eject": "react-scripts eject"
						},
					....
			3.æ ¹ç›®å½•ä¸‹åˆ›å»ºconfig-overrides.js
					//é…ç½®å…·ä½“çš„ä¿®æ”¹è§„åˆ™
					const { override, fixBabelImports,addLessLoader} = require('customize-cra');
					module.exports = override(
						fixBabelImports('import', {
							libraryName: 'antd',
							libraryDirectory: 'es',
							style: true,
						}),
						addLessLoader({
							lessOptions:{
								javascriptEnabled: true,
								modifyVars: { '@primary-color': 'green' },
							}
						}),
					);
				4.å¤‡æ³¨ï¼šä¸ç”¨åœ¨ç»„ä»¶é‡Œäº²è‡ªå¼•å…¥æ ·å¼äº†ï¼Œå³ï¼šimport 'antd/dist/antd.css'åº”è¯¥åˆ æ‰

## 1.æ±‚å’Œæ¡ˆä¾‹_reduxç²¾ç®€ç‰ˆ
		(1).å»é™¤Countç»„ä»¶è‡ªèº«çš„çŠ¶æ€
		(2).srcä¸‹å»ºç«‹:
						-redux
							-store.js
							-count_reducer.js

		(3).store.jsï¼š
					1).å¼•å…¥reduxä¸­çš„createStoreå‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ªstore
					2).createStoreè°ƒç”¨æ—¶è¦ä¼ å…¥ä¸€ä¸ªä¸ºå…¶æœåŠ¡çš„reducer
					3).è®°å¾—æš´éœ²storeå¯¹è±¡

		(4).count_reducer.jsï¼š
					1).reducerçš„æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ï¼špreState,actionï¼Œè¿”å›åŠ å·¥åçš„çŠ¶æ€
					2).reduceræœ‰ä¸¤ä¸ªä½œç”¨ï¼šåˆå§‹åŒ–çŠ¶æ€ï¼ŒåŠ å·¥çŠ¶æ€
					3).reducerè¢«ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ï¼Œæ˜¯storeè‡ªåŠ¨è§¦å‘çš„ï¼Œ
									ä¼ é€’çš„preStateæ˜¯undefined,
									ä¼ é€’çš„actionæ˜¯:{type:'@@REDUX/INIT_a.2.b.4}

		(5).åœ¨index.jsä¸­ç›‘æµ‹storeä¸­çŠ¶æ€çš„æ”¹å˜ï¼Œä¸€æ—¦å‘ç”Ÿæ”¹å˜é‡æ–°æ¸²æŸ“<App/>
				å¤‡æ³¨ï¼šreduxåªè´Ÿè´£ç®¡ç†çŠ¶æ€ï¼Œè‡³äºçŠ¶æ€çš„æ”¹å˜é©±åŠ¨ç€é¡µé¢çš„å±•ç¤ºï¼Œè¦é æˆ‘ä»¬è‡ªå·±å†™ã€‚


## 2.æ±‚å’Œæ¡ˆä¾‹_reduxå®Œæ•´ç‰ˆ
		æ–°å¢æ–‡ä»¶ï¼š
			1.count_action.js ä¸“é—¨ç”¨äºåˆ›å»ºactionå¯¹è±¡
			2.constant.js æ”¾ç½®å®¹æ˜“å†™é”™çš„typeå€¼



## 3.æ±‚å’Œæ¡ˆä¾‹_reduxå¼‚æ­¥actionç‰ˆ
		 (1).æ˜ç¡®ï¼šå»¶è¿Ÿçš„åŠ¨ä½œä¸æƒ³äº¤ç»™ç»„ä»¶è‡ªèº«ï¼Œæƒ³äº¤ç»™action
		 (2).ä½•æ—¶éœ€è¦å¼‚æ­¥actionï¼šæƒ³è¦å¯¹çŠ¶æ€è¿›è¡Œæ“ä½œï¼Œä½†æ˜¯å…·ä½“çš„æ•°æ®é å¼‚æ­¥ä»»åŠ¡è¿”å›ã€‚
		 (3).å…·ä½“ç¼–ç ï¼š
		 			1).yarn add redux-thunkï¼Œå¹¶é…ç½®åœ¨storeä¸­
		 			2).åˆ›å»ºactionçš„å‡½æ•°ä¸å†è¿”å›ä¸€èˆ¬å¯¹è±¡ï¼Œè€Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¸­å†™å¼‚æ­¥ä»»åŠ¡ã€‚
		 			3).å¼‚æ­¥ä»»åŠ¡æœ‰ç»“æœåï¼Œåˆ†å‘ä¸€ä¸ªåŒæ­¥çš„actionå»çœŸæ­£æ“ä½œæ•°æ®ã€‚
		 (4).å¤‡æ³¨ï¼šå¼‚æ­¥actionä¸æ˜¯å¿…é¡»è¦å†™çš„ï¼Œå®Œå…¨å¯ä»¥è‡ªå·±ç­‰å¾…å¼‚æ­¥ä»»åŠ¡çš„ç»“æœäº†å†å»åˆ†å‘åŒæ­¥actionã€‚





## 4.æ±‚å’Œæ¡ˆä¾‹_react-reduxåŸºæœ¬ä½¿ç”¨
			(1).æ˜ç¡®ä¸¤ä¸ªæ¦‚å¿µï¼š
						1).UIç»„ä»¶:ä¸èƒ½ä½¿ç”¨ä»»ä½•reduxçš„apiï¼Œåªè´Ÿè´£é¡µé¢çš„å‘ˆç°ã€äº¤äº’ç­‰ã€‚
						2).å®¹å™¨ç»„ä»¶ï¼šè´Ÿè´£å’Œreduxé€šä¿¡ï¼Œå°†ç»“æœäº¤ç»™UIç»„ä»¶ã€‚
			(2).å¦‚ä½•åˆ›å»ºä¸€ä¸ªå®¹å™¨ç»„ä»¶â€”â€”â€”â€”é react-redux çš„ connectå‡½æ•°
							connect(mapStateToProps,mapDispatchToProps)(UIç»„ä»¶)
								-mapStateToProps:æ˜ å°„çŠ¶æ€ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡
								-mapDispatchToProps:æ˜ å°„æ“ä½œçŠ¶æ€çš„æ–¹æ³•ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡
			(3).å¤‡æ³¨1ï¼šå®¹å™¨ç»„ä»¶ä¸­çš„storeæ˜¯é propsä¼ è¿›å»çš„ï¼Œè€Œä¸æ˜¯åœ¨å®¹å™¨ç»„ä»¶ä¸­ç›´æ¥å¼•å…¥
			(4).å¤‡æ³¨2ï¼šmapDispatchToPropsï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡


## 5.æ±‚å’Œæ¡ˆä¾‹_react-reduxä¼˜åŒ–
			(1).å®¹å™¨ç»„ä»¶å’ŒUIç»„ä»¶æ•´åˆä¸€ä¸ªæ–‡ä»¶
			(2).æ— éœ€è‡ªå·±ç»™å®¹å™¨ç»„ä»¶ä¼ é€’storeï¼Œç»™<App/>åŒ…è£¹ä¸€ä¸ª<Provider store={store}>å³å¯ã€‚
			(3).ä½¿ç”¨äº†react-reduxåä¹Ÿä¸ç”¨å†è‡ªå·±æ£€æµ‹reduxä¸­çŠ¶æ€çš„æ”¹å˜äº†ï¼Œå®¹å™¨ç»„ä»¶å¯ä»¥è‡ªåŠ¨å®Œæˆè¿™ä¸ªå·¥ä½œã€‚
			(4).mapDispatchToPropsä¹Ÿå¯ä»¥ç®€å•çš„å†™æˆä¸€ä¸ªå¯¹è±¡
			(5).ä¸€ä¸ªç»„ä»¶è¦å’Œreduxâ€œæ‰“äº¤é“â€è¦ç»è¿‡å“ªå‡ æ­¥ï¼Ÿ
							(1).å®šä¹‰å¥½UIç»„ä»¶---ä¸æš´éœ²
							(2).å¼•å…¥connectç”Ÿæˆä¸€ä¸ªå®¹å™¨ç»„ä»¶ï¼Œå¹¶æš´éœ²ï¼Œå†™æ³•å¦‚ä¸‹ï¼š
									connect(
										state => ({key:value}), //æ˜ å°„çŠ¶æ€
										{key:xxxxxAction} //æ˜ å°„æ“ä½œçŠ¶æ€çš„æ–¹æ³•
									)(UIç»„ä»¶)
							(4).åœ¨UIç»„ä»¶ä¸­é€šè¿‡this.props.xxxxxxxè¯»å–å’Œæ“ä½œçŠ¶æ€



## 6.æ±‚å’Œæ¡ˆä¾‹_react-reduxæ•°æ®å…±äº«ç‰ˆ
			(1).å®šä¹‰ä¸€ä¸ªPsersonç»„ä»¶ï¼Œå’ŒCountç»„ä»¶é€šè¿‡reduxå…±äº«æ•°æ®ã€‚
			(2).ä¸ºPersonç»„ä»¶ç¼–å†™ï¼šreducerã€actionï¼Œé…ç½®constantå¸¸é‡ã€‚
			(3).é‡ç‚¹ï¼šPersonçš„reducerå’ŒCountçš„Reducerè¦ä½¿ç”¨combineReducersè¿›è¡Œåˆå¹¶ï¼Œ
					åˆå¹¶åçš„æ€»çŠ¶æ€æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ï¼ï¼
			(4).äº¤ç»™storeçš„æ˜¯æ€»reducerï¼Œæœ€åæ³¨æ„åœ¨ç»„ä»¶ä¸­å–å‡ºçŠ¶æ€çš„æ—¶å€™ï¼Œè®°å¾—â€œå–åˆ°ä½â€ã€‚

## 7.æ±‚å’Œæ¡ˆä¾‹_react-reduxå¼€å‘è€…å·¥å…·çš„ä½¿ç”¨
			(1).yarn add redux-devtools-extension
			(2).storeä¸­è¿›è¡Œé…ç½®
					import {composeWithDevTools} from 'redux-devtools-extension'
					const store = createStore(allReducer,composeWithDevTools(applyMiddleware(thunk)))

## 8.æ±‚å’Œæ¡ˆä¾‹_react-reduxæœ€ç»ˆç‰ˆ
			(1).æ‰€æœ‰å˜é‡åå­—è¦è§„èŒƒï¼Œå°½é‡è§¦å‘å¯¹è±¡çš„ç®€å†™å½¢å¼ã€‚
			(2).reducersæ–‡ä»¶å¤¹ä¸­ï¼Œç¼–å†™index.jsä¸“é—¨ç”¨äºæ±‡æ€»å¹¶æš´éœ²æ‰€æœ‰çš„reducer

## 1. setState

### setStateæ›´æ–°çŠ¶æ€çš„2ç§å†™æ³•

```
	(1). setState(stateChange, [callback])------å¯¹è±¡å¼çš„setState
            1.stateChangeä¸ºçŠ¶æ€æ”¹å˜å¯¹è±¡(è¯¥å¯¹è±¡å¯ä»¥ä½“ç°å‡ºçŠ¶æ€çš„æ›´æ”¹)
            2.callbackæ˜¯å¯é€‰çš„å›è°ƒå‡½æ•°, å®ƒåœ¨çŠ¶æ€æ›´æ–°å®Œæ¯•ã€ç•Œé¢ä¹Ÿæ›´æ–°å(renderè°ƒç”¨å)æ‰è¢«è°ƒç”¨
					
	(2). setState(updater, [callback])------å‡½æ•°å¼çš„setState
            1.updaterä¸ºè¿”å›stateChangeå¯¹è±¡çš„å‡½æ•°ã€‚
            2.updaterå¯ä»¥æ¥æ”¶åˆ°stateå’Œpropsã€‚
            4.callbackæ˜¯å¯é€‰çš„å›è°ƒå‡½æ•°, å®ƒåœ¨çŠ¶æ€æ›´æ–°ã€ç•Œé¢ä¹Ÿæ›´æ–°å(renderè°ƒç”¨å)æ‰è¢«è°ƒç”¨ã€‚
æ€»ç»“:
		1.å¯¹è±¡å¼çš„setStateæ˜¯å‡½æ•°å¼çš„setStateçš„ç®€å†™æ–¹å¼(è¯­æ³•ç³–)
		2.ä½¿ç”¨åŸåˆ™ï¼š
				(1).å¦‚æœæ–°çŠ¶æ€ä¸ä¾èµ–äºåŸçŠ¶æ€ ===> ä½¿ç”¨å¯¹è±¡æ–¹å¼
				(2).å¦‚æœæ–°çŠ¶æ€ä¾èµ–äºåŸçŠ¶æ€ ===> ä½¿ç”¨å‡½æ•°æ–¹å¼
				(3).å¦‚æœéœ€è¦åœ¨setState()æ‰§è¡Œåè·å–æœ€æ–°çš„çŠ¶æ€æ•°æ®, 
					è¦åœ¨ç¬¬äºŒä¸ªcallbackå‡½æ•°ä¸­è¯»å–
```



------



## 2. lazyLoad

### è·¯ç”±ç»„ä»¶çš„lazyLoad

```js
	//1.é€šè¿‡Reactçš„lazyå‡½æ•°é…åˆimport()å‡½æ•°åŠ¨æ€åŠ è½½è·¯ç”±ç»„ä»¶ ===> è·¯ç”±ç»„ä»¶ä»£ç ä¼šè¢«åˆ†å¼€æ‰“åŒ…
	const Login = lazy(()=>import('@/pages/Login'))
	
	//2.é€šè¿‡<Suspense>æŒ‡å®šåœ¨åŠ è½½å¾—åˆ°è·¯ç”±æ‰“åŒ…æ–‡ä»¶å‰æ˜¾ç¤ºä¸€ä¸ªè‡ªå®šä¹‰loadingç•Œé¢
	<Suspense fallback={<h1>loading.....</h1>}>
        <Switch>
            <Route path="/xxx" component={Xxxx}/>
            <Redirect to="/login"/>
        </Switch>
    </Suspense>
```



------



## 3. Hooks

#### 1. React Hook/Hooksæ˜¯ä»€ä¹ˆ?

```
(1). Hookæ˜¯React 16.8.0ç‰ˆæœ¬å¢åŠ çš„æ–°ç‰¹æ€§/æ–°è¯­æ³•
(2). å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§
```

#### 2. ä¸‰ä¸ªå¸¸ç”¨çš„Hook

```
(1). State Hook: React.useState()
(2). Effect Hook: React.useEffect()
(3). Ref Hook: React.useRef()
```

#### 3. State Hook

```
(1). State Hookè®©å‡½æ•°ç»„ä»¶ä¹Ÿå¯ä»¥æœ‰stateçŠ¶æ€, å¹¶è¿›è¡ŒçŠ¶æ€æ•°æ®çš„è¯»å†™æ“ä½œ
(2). è¯­æ³•: const [xxx, setXxx] = React.useState(initValue)  
(3). useState()è¯´æ˜:
        å‚æ•°: ç¬¬ä¸€æ¬¡åˆå§‹åŒ–æŒ‡å®šçš„å€¼åœ¨å†…éƒ¨ä½œç¼“å­˜
        è¿”å›å€¼: åŒ…å«2ä¸ªå…ƒç´ çš„æ•°ç»„, ç¬¬1ä¸ªä¸ºå†…éƒ¨å½“å‰çŠ¶æ€å€¼, ç¬¬2ä¸ªä¸ºæ›´æ–°çŠ¶æ€å€¼çš„å‡½æ•°
(4). setXxx()2ç§å†™æ³•:
        setXxx(newValue): å‚æ•°ä¸ºéå‡½æ•°å€¼, ç›´æ¥æŒ‡å®šæ–°çš„çŠ¶æ€å€¼, å†…éƒ¨ç”¨å…¶è¦†ç›–åŸæ¥çš„çŠ¶æ€å€¼
        setXxx(value => newValue): å‚æ•°ä¸ºå‡½æ•°, æ¥æ”¶åŸæœ¬çš„çŠ¶æ€å€¼, è¿”å›æ–°çš„çŠ¶æ€å€¼, å†…éƒ¨ç”¨å…¶è¦†ç›–åŸæ¥çš„çŠ¶æ€å€¼
```


```js
export default function App() {
  const [visible, setVisible] = useState(true);

	// 5såéšè—ï¼Œä¼šè§¦å‘åˆ·æ–°
  setTimeout(() => {
    setVisible(false);
  }, 5000);

  return (
    <div>
      <h1>Hello StackBlitz!</h1>
      {visible && <p>Start editing to see some magic happen :)</p>}
    </div>
  );
}
```

æ³¨æ„ï¼š
- useStateæ–¹æ³•ä½¿ç”¨çš„æ˜¯è¦†ç›–çš„æ–¹å¼ï¼Œå› æ­¤åœ¨æ›´æ–°å¯¹è±¡ç±»å‹æ—¶ï¼Œåˆ‡è®°è¦åˆå¹¶æ—§çš„çŠ¶æ€ï¼Œå¦åˆ™æ—§çš„çŠ¶æ€ä¼šä¸¢å¤±ï¼Œ
- useStateä½¿ç”¨åï¼Œä¼šæ˜¯é¡µé¢é‡æ–°renderï¼Œå› ä¸ºå…¶å®å°±æ˜¯this.setStateçš„è¯­æ³•ç³–ã€‚

#### 4. Effect Hook

```
(1). Effect Hook å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ(ç”¨äºæ¨¡æ‹Ÿç±»ç»„ä»¶ä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­)
(2). Reactä¸­çš„å‰¯ä½œç”¨æ“ä½œ:
        å‘ajaxè¯·æ±‚æ•°æ®è·å–
        è®¾ç½®è®¢é˜… / å¯åŠ¨å®šæ—¶å™¨
        æ‰‹åŠ¨æ›´æ”¹çœŸå®DOM
(3). è¯­æ³•å’Œè¯´æ˜: 
        useEffect(() => { 
          // åœ¨æ­¤å¯ä»¥æ‰§è¡Œä»»ä½•å¸¦å‰¯ä½œç”¨æ“ä½œ
          return () => { // åœ¨ç»„ä»¶å¸è½½å‰æ‰§è¡Œ
            // åœ¨æ­¤åšä¸€äº›æ”¶å°¾å·¥ä½œ, æ¯”å¦‚æ¸…é™¤å®šæ—¶å™¨/å–æ¶ˆè®¢é˜…ç­‰
          }
        }, [stateValue]) // å¦‚æœæŒ‡å®šçš„æ˜¯[], å›è°ƒå‡½æ•°åªä¼šåœ¨ç¬¬ä¸€æ¬¡render()åæ‰§è¡Œ
    
(4). å¯ä»¥æŠŠ useEffect Hook çœ‹åšå¦‚ä¸‹ä¸‰ä¸ªå‡½æ•°çš„ç»„åˆ
        componentDidMount()
        componentDidUpdate()
    	componentWillUnmount() 
```

#### 5. Ref Hook

```
(1). Ref Hookå¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸­å­˜å‚¨/æŸ¥æ‰¾ç»„ä»¶å†…çš„æ ‡ç­¾æˆ–ä»»æ„å…¶å®ƒæ•°æ®
(2). è¯­æ³•: const refContainer = useRef()
(3). ä½œç”¨:ä¿å­˜æ ‡ç­¾å¯¹è±¡,åŠŸèƒ½ä¸React.createRef()ä¸€æ ·
```



------



## 4. Fragment

### ä½¿ç”¨

	<Fragment><Fragment>
	<></>

### ä½œç”¨

> å¯ä»¥ä¸ç”¨å¿…é¡»æœ‰ä¸€ä¸ªçœŸå®çš„DOMæ ¹æ ‡ç­¾äº†



<hr/>

## 5. Context

### ç†è§£

> ä¸€ç§ç»„ä»¶é—´é€šä¿¡æ–¹å¼, å¸¸ç”¨äºã€ç¥–ç»„ä»¶ã€‘ä¸ã€åä»£ç»„ä»¶ã€‘é—´é€šä¿¡

### ä½¿ç”¨

```js
1) åˆ›å»ºContextå®¹å™¨å¯¹è±¡ï¼š
	const XxxContext = React.createContext()  
	
2) æ¸²æŸ“å­ç»„æ—¶ï¼Œå¤–é¢åŒ…è£¹xxxContext.Provider, é€šè¿‡valueå±æ€§ç»™åä»£ç»„ä»¶ä¼ é€’æ•°æ®ï¼š
	<xxxContext.Provider value={æ•°æ®}>
		å­ç»„ä»¶
    </xxxContext.Provider>
    
3) åä»£ç»„ä»¶è¯»å–æ•°æ®ï¼š

	//ç¬¬ä¸€ç§æ–¹å¼:ä»…é€‚ç”¨äºç±»ç»„ä»¶ 
	  static contextType = xxxContext  // å£°æ˜æ¥æ”¶context
	  this.context // è¯»å–contextä¸­çš„valueæ•°æ®
	  
	//ç¬¬äºŒç§æ–¹å¼: å‡½æ•°ç»„ä»¶ä¸ç±»ç»„ä»¶éƒ½å¯ä»¥
	  <xxxContext.Consumer>
	    {
	      value => ( // valueå°±æ˜¯contextä¸­çš„valueæ•°æ®
	        è¦æ˜¾ç¤ºçš„å†…å®¹
	      )
	    }
	  </xxxContext.Consumer>
```

### æ³¨æ„

	åœ¨åº”ç”¨å¼€å‘ä¸­ä¸€èˆ¬ä¸ç”¨context, ä¸€èˆ¬éƒ½å®ƒçš„å°è£…reactæ’ä»¶



<hr/>


## 6. ç»„ä»¶ä¼˜åŒ–

### Componentçš„2ä¸ªé—®é¢˜ 

> 1. åªè¦æ‰§è¡ŒsetState(),å³ä½¿ä¸æ”¹å˜çŠ¶æ€æ•°æ®, ç»„ä»¶ä¹Ÿä¼šé‡æ–°render()
>
> 2. åªå½“å‰ç»„ä»¶é‡æ–°render(), å°±ä¼šè‡ªåŠ¨é‡æ–°renderå­ç»„ä»¶ ==> æ•ˆç‡ä½

### æ•ˆç‡é«˜çš„åšæ³•

>  åªæœ‰å½“ç»„ä»¶çš„stateæˆ–propsæ•°æ®å‘ç”Ÿæ”¹å˜æ—¶æ‰é‡æ–°render()

### åŸå› 

>  Componentä¸­çš„shouldComponentUpdate()æ€»æ˜¯è¿”å›true

### è§£å†³

	åŠæ³•1: 
		é‡å†™shouldComponentUpdate()æ–¹æ³•
		æ¯”è¾ƒæ–°æ—§stateæˆ–propsæ•°æ®, å¦‚æœæœ‰å˜åŒ–æ‰è¿”å›true, å¦‚æœæ²¡æœ‰è¿”å›false
	åŠæ³•2:  
		ä½¿ç”¨PureComponent
		PureComponenté‡å†™äº†shouldComponentUpdate(), åªæœ‰stateæˆ–propsæ•°æ®æœ‰å˜åŒ–æ‰è¿”å›true
		æ³¨æ„: 
			åªæ˜¯è¿›è¡Œstateå’Œpropsæ•°æ®çš„æµ…æ¯”è¾ƒ, å¦‚æœåªæ˜¯æ•°æ®å¯¹è±¡å†…éƒ¨æ•°æ®å˜äº†, è¿”å›false  
			ä¸è¦ç›´æ¥ä¿®æ”¹stateæ•°æ®, è€Œæ˜¯è¦äº§ç”Ÿæ–°æ•°æ®
	é¡¹ç›®ä¸­ä¸€èˆ¬ä½¿ç”¨PureComponentæ¥ä¼˜åŒ–



<hr/>


## 7. render props

### å¦‚ä½•å‘ç»„ä»¶å†…éƒ¨åŠ¨æ€ä¼ å…¥å¸¦å†…å®¹çš„ç»“æ„(æ ‡ç­¾)?

	Vueä¸­: 
		ä½¿ç”¨slotæŠ€æœ¯, ä¹Ÿå°±æ˜¯é€šè¿‡ç»„ä»¶æ ‡ç­¾ä½“ä¼ å…¥ç»“æ„  <AA><BB/></AA>
	Reactä¸­:
		ä½¿ç”¨children props: é€šè¿‡ç»„ä»¶æ ‡ç­¾ä½“ä¼ å…¥ç»“æ„
		ä½¿ç”¨render props: é€šè¿‡ç»„ä»¶æ ‡ç­¾å±æ€§ä¼ å…¥ç»“æ„, ä¸€èˆ¬ç”¨renderå‡½æ•°å±æ€§

### children props

	<A>
	  <B>xxxx</B>
	</A>
	{this.props.children}
	é—®é¢˜: å¦‚æœBç»„ä»¶éœ€è¦Aç»„ä»¶å†…çš„æ•°æ®, ==> åšä¸åˆ° 

### render props

	<A render={(data) => <C data={data}></C>}></A>
	Aç»„ä»¶: {this.props.render(å†…éƒ¨stateæ•°æ®)}
	Cç»„ä»¶: è¯»å–Aç»„ä»¶ä¼ å…¥çš„æ•°æ®æ˜¾ç¤º {this.props.data} 



<hr/>

## 8. é”™è¯¯è¾¹ç•Œ

#### ç†è§£ï¼š

é”™è¯¯è¾¹ç•Œï¼šç”¨æ¥æ•è·åä»£ç»„ä»¶é”™è¯¯ï¼Œæ¸²æŸ“å‡ºå¤‡ç”¨é¡µé¢

#### ç‰¹ç‚¹ï¼š

åªèƒ½æ•è·åä»£ç»„ä»¶ç”Ÿå‘½å‘¨æœŸäº§ç”Ÿçš„é”™è¯¯ï¼Œä¸èƒ½æ•è·è‡ªå·±ç»„ä»¶äº§ç”Ÿçš„é”™è¯¯å’Œå…¶ä»–ç»„ä»¶åœ¨åˆæˆäº‹ä»¶ã€å®šæ—¶å™¨ä¸­äº§ç”Ÿçš„é”™è¯¯

##### ä½¿ç”¨æ–¹å¼ï¼š

getDerivedStateFromErroré…åˆcomponentDidCatch

```js
// ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œä¸€æ—¦åå°ç»„ä»¶æŠ¥é”™ï¼Œå°±ä¼šè§¦å‘
static getDerivedStateFromError(error) {
    console.log(error);
    // åœ¨renderä¹‹å‰è§¦å‘
    // è¿”å›æ–°çš„state
    return {
        hasError: true,
    };
}

componentDidCatch(error, info) {
    // ç»Ÿè®¡é¡µé¢çš„é”™è¯¯ã€‚å‘é€è¯·æ±‚å‘é€åˆ°åå°å»
    console.log(error, info);
}
```

## 9. ç»„ä»¶é€šä¿¡æ–¹å¼æ€»ç»“

#### æ–¹å¼ï¼š

		propsï¼š
			(1).children props
			(2).render props
		æ¶ˆæ¯è®¢é˜…-å‘å¸ƒï¼š
			pubs-subã€eventç­‰ç­‰
		é›†ä¸­å¼ç®¡ç†ï¼š
			reduxã€dvaç­‰ç­‰
		conText:
			ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼

#### ç»„ä»¶é—´çš„å…³ç³»

		çˆ¶å­ç»„ä»¶ï¼šprops
		å…„å¼Ÿç»„ä»¶(éåµŒå¥—ç»„ä»¶)ï¼šæ¶ˆæ¯è®¢é˜…-å‘å¸ƒã€é›†ä¸­å¼ç®¡ç†
		ç¥–å­™ç»„ä»¶(è·¨çº§ç»„ä»¶)ï¼šæ¶ˆæ¯è®¢é˜…-å‘å¸ƒã€é›†ä¸­å¼ç®¡ç†ã€conText(ç”¨çš„å°‘)



## æ³¨æ„

- è¦æ¥å—reactçš„ä¸åŒï¼Œä¸è¦ä¸Šæ¥å°±å‘ç€vueæ”¹ï¼Œè¦æ€è€ƒ

### diff

- ä½¿ç”¨ç´¢å¼•ä½œä¸ºkeyï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè™šæ‹Ÿdomä¼šé‡å»ºï¼Œå¹¶ä¸èƒ½æœ‰æ•ˆåˆ©ç”¨ä¹‹å‰å·²ç»çº¯åœ¨çš„è™šæ‹Ÿdomï¼›ä¸»è¦é’ˆå¯¹é€†åºæ·»åŠ æˆ–é€†åºåˆ é™¤ç­‰ç ´åé¡ºåºçš„æ“ä½œä¼šå¼•å‘é”™è¯¯ã€‚
- å¦‚æœæ¶‰åŠåˆ°inputè¾“å…¥çš„å†…å®¹ï¼Œæ•°æ®ä¼šé”™ä¹±ã€‚

## è„šæ‰‹æ¶

### publicæ–‡ä»¶å¤¹

- reactåˆ›å»ºçš„é¡¹ç›®è‡ªåŠ¨è®¾ç½®ä¸ºgitä»“åº“äº†ï¼Œè¿˜å†™äº†.gitignore
- %PUBLIC_URL%ä»£è¡¨publicæ–‡ä»¶å¤¹çš„è·¯å¾„
- `<meta name="theme-color" content="#000000" />`ä»…ç”¨äºé…ç½®æµè§ˆå™¨é¡µç­¾+åœ°å€æ çš„é¢œè‰²ï¼ˆä»…æ”¯æŒå®‰å“æ‰‹æœºæµè§ˆå™¨ï¼‰
- `<link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />`ç”¨äºå°†æŒ‡å®šç½‘é¡µæ·»åŠ åˆ°æ¡Œé¢ä¸Šçš„å›¾æ ‡
- `<link rel="manifest" href="%PUBLIC_URL%/manifest.json" />` webåº”ç”¨ä¹Ÿå¯ä»¥é€šè¿‡åŠ ä¸ªå£³å˜æˆå®‰å“æˆ–iosåº”ç”¨ï¼Œè€Œå¯¹åº”çš„é…ç½®æ–‡ä»¶å°±æ˜¯é€šè¿‡manifest.json
- robots.textæ–‡ä»¶æ˜¯ç»™çˆ¬è™«ç”¨çš„ï¼ŒæŒ‡ç¤ºçˆ¬è™«å“ªäº›å†…å®¹å¯ä»¥çˆ¬å–ï¼Œå“ªäº›ä¸å¯ä»¥ã€‚å…¶å®å°±æ˜¯çˆ¬è™«åè®®

### srcæ–‡ä»¶å¤¹

- App.jsï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶ï¼Œè¿˜å¯ä»¥æ˜¯jsxï¼Œreactä¼šåŠ è½½.jså’Œ.jsxä¸¤ç§èµ„æºæ–‡ä»¶
- App.cssï¼Œæ ·å¼æ–‡ä»¶
- index.css æ˜¯é€šç”¨çš„æ ·å¼ï¼Œä¸ºäº†é˜²æ­¢å„ç»„ä»¶æ ·å¼å†²çªï¼Œå¯ä»¥é‡‡ç”¨æ¨¡å—åŒ–çš„æ–¹å¼ï¼Œindex.module.ccsï¼Œç„¶åimport cssModule1 from 'index.module.ccs'; ä½¿ç”¨æ—¶å°±æ˜¯ç›´æ¥cssModule1.testå³å¯ã€‚
- index.js æ–‡ä»¶ æ˜¯webpackå…¥å£æ–‡ä»¶
- `<React.StrictMode>`ä¸»è¦ç”¨æ¥æ£€æŸ¥ç»„ä»¶é‡Œé¢çš„ä¸€äº›è¯­æ³•æ˜¯å¦ç¬¦åˆreactæœ€æ–°çš„è¯­æ³•ã€‚
- reportWebVitalsæ˜¯ä½¿ç”¨web-vitalsè¿™ä¸ªåº“ï¼Œæ¥æ£€æµ‹é¡µé¢æ€§èƒ½çš„
- setUpTests.jsæ˜¯ç”¨äºåšç»„ä»¶æµ‹è¯•ï¼Œåˆ©ç”¨jest-dom


- ES7 React/Redux/GraphQL/React-Native snippets è¿™ä¸ªæ’ä»¶æä¾›å¾ˆå¤šä»£ç ç‰‡æ®µï¼Œè¦å–„äºä½¿ç”¨

### todoList

- checkoutboxï¼Œé»˜è®¤é€‰ä¸­ç”¨defaultCheckedï¼Œè¿™æ ·åç»­å°±è¿˜å¯ä»¥æ›´æ”¹ï¼Œå¦‚æœä½¿ç”¨checkedå±æ€§ï¼Œåˆ™éœ€è¦å€ŸåŠ©onChangeäº‹ä»¶ï¼›ä½†éœ€è¦æ³¨æ„defaultCheckedåªä¼šåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æœ‰æ•ˆï¼Œåç»­çŠ¶æ€å˜æ›´äº†ï¼Œè¿˜æ˜¯éœ€è¦ä»checkedå±æ€§é‡Œè·å–å€¼ã€‚ç±»ä¼¼çš„è¿˜æœ‰defaultValueå’Œvalue
- å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œåœ¨vueä¸­ä¸€èˆ¬ä¸­emitï¼Œå…¶å®ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡propså°†çˆ¶ç»„ä»¶é‡Œçš„æ–¹æ³•ä¼ è¿›æ¥ï¼Œç„¶ååœ¨å­ç»„ä»¶é‡Œè°ƒç”¨ï¼Œå› ä¸ºæ˜¯å¼•ç”¨ç±»å‹ï¼Œçˆ¶ç»„ä»¶é‡Œä¹Ÿå°±æ‰§è¡Œäº†ï¼Œä»è€Œæ‹¿åˆ°æ•°æ®
- æ—¶é—´æˆ³æœ‰å¯èƒ½é‡å¤ï¼Œå¯ä»¥åˆ©ç”¨uuiåº“ï¼Œä½†æ¯”è¾ƒå¤§ï¼Œå¯ä»¥ä½¿ç”¨æ›´å°çš„nanoid
- å¼•å…¥ä¸œè¥¿çš„è§„èŒƒï¼Œç¬¬ä¸‰æ–¹çš„å°½é‡å¾€ä¸Šé ï¼Œè‡ªå·±çš„æ¨¡å—å¾€åé ï¼Œæ ·å¼æ”¾åœ¨æœ€åã€‚
- çŠ¶æ€åœ¨å“ªä¸ªç»„ä»¶é‡Œï¼Œæ“ä½œçŠ¶æ€çš„æ–¹æ³•ä¹Ÿåœ¨å“ªä¸ªç»„ä»¶é‡Œ
- åœ¨reactä¸­ç›´æ¥ä½¿ç”¨confirmç±»çš„æ–¹æ³•æ—¶ï¼Œå¯èƒ½å‡ºç°è­¦å‘Šï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨window.confirm

### ajaxè¯·æ±‚

- axiosä¹Ÿæ˜¯å°è£…çš„XMLHttpRequestï¼Œä½†æœ‰äº†Promiseçš„ç‰ˆæœ¬ã€‚
- feHelper chromeæ’ä»¶ï¼Œå¯ä»¥å°†åå°response.sendè¿”å›çš„jsonæ•°æ®è‡ªåŠ¨æ ¼å¼åŒ–åœ¨æµè§ˆå™¨çª—å£ä¸Šï¼Œä¸ç”¨åœ¨å¤åˆ¶åˆ°json.cné‡Œäº†ã€‚
- åœ¨reactä¸­è§£å†³è·¨åŸŸçš„ä¸€ç§ç®€å•æ–¹å¼ï¼Œä»£ç†ï¼Œåœ¨package.jsoné‡Œå¢åŠ ä¸€è¡Œï¼š"proxy": "localhost:port"å°±å¯ä»¥äº†ã€‚æ¯”å¦‚æœ¬åœ°expressæœåŠ¡å™¨å¼€å¯ä¸€ä¸ª3000ç«¯å£ï¼Œç„¶ååœ¨5000ç«¯å£çš„å‰ç«¯æœåŠ¡ä¸Šè¯·æ±‚3000è¿™ä¸ªè‚¯å®šè·¨åŸŸï¼Œä½†å¦‚æœå¢åŠ ä¸€ä¸ª"proxy": "localhost:5000"ï¼Œåˆ™è¯·æ±‚å…ˆä¼šç»è¿‡æœ¬åœ°é™æ€æœåŠ¡å™¨å¤„ç†ï¼Œä¹Ÿå°±æ˜¯3000ç«¯å£çš„é™æ€æœåŠ¡(æ¯”å¦‚å¯ä»¥è·å–index.html)ï¼›å¦‚æœ3000ç«¯å£çš„å‰ç«¯æœåŠ¡æ²¡æœ‰ï¼Œåˆ™ä¼šè¯·æ±‚5000ç«¯å£ï¼Œä»è€Œç»•è¿‡äº†è·¨åŸŸã€‚ä¹Ÿå°±æ˜¯ä¸­é—´ä»£ç†ã€‚ã€‚ã€‚ç¼ºç‚¹æ˜¯åªèƒ½é…ç½®ä¸€ä¸ªåç«¯åœ°å€ã€‚
- å…¶å®ä¸Šé¢çš„proxyåªæ˜¯http-proxy-middleçš„ç®€å†™å½¢å¼ã€‚å› æ­¤å¯ä»¥åœ¨srcé‡Œæ–°å¢ä¸€ä¸ªsetupProxy.jsæ–‡ä»¶ï¼Œå¼•å…¥è¿™ä¸ªåº“ï¼Œç„¶ååŒ¹é…è§„åˆ™è½¬å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨ã€‚æ³¨æ„è¿™ä¸ªæ–‡ä»¶åä¸èƒ½æ”¹ï¼Œæ˜¯reactè‡ªåŠ¨å»æ‰¾çš„æ–‡ä»¶åï¼Œä¸“é—¨ç”¨æ¥è®¾ç½®ä»£ç†ã€‚
- changeOriginçš„ä½œç”¨ï¼Œæ˜¯æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­hostå­—æ®µçš„å€¼ã€‚å…¶å®æ˜¯é˜²æ­¢åç«¯æœåŠ¡å™¨å¯¹å‰ç«¯çš„hostæœ‰æ ¡éªŒï¼Œå¼€æ˜¯å¦é€šè¿‡æºç«™è¿˜æ˜¯ä»£ç†æœåŠ¡å™¨å‘å‡ºæ¥çš„è¯·æ±‚ã€‚
- pathRewriteçš„ä½œç”¨æ˜¯å…ˆåŒ¹é…å¸¦æœ‰xxxå‰ç¼€çš„è·¯å¾„ï¼ŒåŒ¹é…åˆ°åï¼Œå†å»æ‰å‰ç¼€ï¼Œå› ä¸ºåç«¯åœ°å€ä¸Šå¯èƒ½å°±æ²¡æœ‰è¿™ä¸ªå‰ç¼€ã€‚
- è§£æ„èµ‹å€¼è¿˜å¯ä»¥è¿ç»­ä»å­å¯¹è±¡é‡Œç»§ç»­è§£æ„å¦‚ä¸‹ï¼šconst { a: { aa: newAa }} = thisï¼Œå°±æ˜¯è·å–this.a.aaï¼ŒåŒæ—¶é‡å‘½åä¸ºäº†newAa
- åœ¨reactä¸­å¤šç§åœºæ™¯ä¸‹ï¼Œå°±éœ€è¦ä¸‰å…ƒè¿ç®—ç¬¦äº†ã€‚

### å…„å¼Ÿç»„ä»¶é€šä¿¡

- è®¢é˜…å‘å¸ƒï¼Œåˆ©ç”¨PubSubJsè¿™ä¸ªåº“
- è¿˜å¯ä»¥ä½¿ç”¨ros???
- axios
- fetch,xhréƒ½æ˜¯åº•å±‚çš„å®ç°ï¼Œfetchæ”¯æŒpromiseï¼Œä½†å¯èƒ½æœ‰å…¼å®¹æ€§ï¼Œå…³æ³¨åˆ†ç¦»çš„æ€æƒ³ã€‚

## è·¯ç”±

### histroy

- å¯ä»¥å€ŸåŠ©histroyè¿™ä¸ªåº“ï¼Œ

### react-router

### react-router-dom

- å®¶é‡Œä¹°çš„å°ç±³æˆ–åä¸ºç›’å­å°±æ˜¯è·¯ç”±å™¨ï¼Œç„¶åè·¯ç”±å™¨åé¢çš„ç½‘çº¿æ¥å£å°±å¯ä»¥ç†è§£ä¸ºè·¯ç”±ã€‚
- å°è®°ä¸­æ–‡ï¼Œæ•´åˆå¾ˆå¤šå®˜ç½‘æ–‡æ¡£çš„ä¸­æ–‡ç‰ˆæœ¬
- Linkç›¸å½“äºåŸç”Ÿçš„aï¼Œè¿™äº›Linkæ ‡ç­¾éœ€è¦ç”¨BrowserRouterç­‰ç»„ä»¶åŒ…æ‹¬æ‰è¡Œã€‚ä½†Linkæ²¡æœ‰é«˜äº®æ•ˆæœï¼Œå¯ä»¥æ”¹ä¸ºNavLinkï¼Œè¿˜å¯ä»¥é€šè¿‡activeClassNameæ¥è‡ªå®šä¹‰é«˜äº®æ•ˆæœ
- BrowserRouterï¼Œç›¸å½“äºè·¯ç”±å™¨ï¼Œé‡Œé¢å…·ä½“çš„Linkç›¸å½“äºè·³è½¬é“¾æ¥ï¼Œè€ŒRouteç›¸å½“äºå…·ä½“çš„è·¯ç”±ç»„ä»¶ã€‚è¿™äº›éƒ½å¿…é¡»åŒ…è£¹åœ¨åŒä¸€ä¸ªè·¯ç”±å™¨BroswerRouter(æˆ–è€…HashRouter)ä¸‹ï¼Œå…¶å®ç›¸å½“äºvueä¸­çš„router-viewï¼ŒåŒ…æ‹¬ä¸‹ä¸»åº”ç”¨ã€‚
- hashæ¨¡å¼çš„è·¯ç”±ï¼Œåœ¨#å·åé¢çš„èµ„æºï¼Œåç«¯æœåŠ¡å™¨æ˜¯è·å–ä¸åˆ°çš„ã€‚
- è·¯ç”±ç»„ä»¶`<Route></Route>`å…¶å®å°±æ˜¯æ¯ä¸ªè·¯ç”±åŒ¹é…å‡ºæ¥çš„componentï¼Œè·¯ç”±å™¨ä¼šç»™è·¯ç”±ç»„ä»¶ä¼ é€’histroy,locationï¼Œmatchç­‰ç›¸å…³çš„ä¿¡æ¯ï¼Œåç»­å¯ä»¥åœ¨ç»„ä»¶constructoré‡Œæ‰“å°æµ‹è¯•ã€‚
- æ ‡ç­¾ä½“å†…éƒ¨çš„å€¼æ˜¯ä½œä¸ºprops.childrenä¼ åˆ°å­ç»„ä»¶é‡Œçš„ã€‚
- ä¸€ä¸ªpathå¯¹åº”å¤šä¸ªç»„ä»¶ï¼Œåˆ™å¤šä¸ªç»„ä»¶éƒ½ä¼šå±•ç¤ºï¼›æŒ‰ç†è¯´åŒ¹é…å®Œä¸€ä¸ªåï¼Œåæ¥çš„å°±ä¸åº”è¯¥å†å±•ç¤ºäº†ã€‚å› æ­¤å¯ä»¥å€ŸåŠ©  react-router-domé‡Œçš„Switchç»„ä»¶ï¼Œå°±åªå±•ç¤ºåŒ¹é…çš„ç¬¬ä¸€ä¸ªè·¯ç”±ç»„ä»¶ã€‚
- åœ¨reactä¸­ï¼Œå¦‚æœä½¿ç”¨histroyæ¨¡å¼ï¼ŒåŒæ—¶index.htmlé‡Œé¢å¼•å…¥çš„èµ„æºè·¯å¾„æ˜¯ç›¸å¯¹è·¯å¾„æ—¶ï¼Œåœ¨é»˜å†™é¡µé¢åˆ·æ–°æ—¶ï¼Œè¿™ä¸ªèµ„æºå¯èƒ½åŠ è½½ä¸æˆåŠŸã€‚ã€‚ã€‚å› ä¸ºè·¯å¾„é”™äº†ï¼Œçœ‹ä¸‹è¿”å›çš„èµ„æºå³å¯ã€‚ å¯ä»¥æ”¹ä¸ºç»å¯¹ï¼Œæˆ–è€…ä½¿ç”¨%PUBLIC_URL%ï¼Œæˆ–è€…ä½¿ç”¨hashæ¨¡å¼ï¼Œå› ä¸ºhashæ¨¡å¼#å·åé¢çš„è·¯å¾„ä¸ä¼šå‘ç»™åç«¯æœåŠ¡å™¨  
- åŒ…å®‰è£…å™¨å°½é‡ä¸è¦æ··ç”¨å®‰è£…ï¼Œå®¹æ˜“ä¸¢å¤±èµ„æºï¼›ä½†å¯åŠ¨æ—¶æ— æ‰€è°“
- æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœç»™/a/b/cè·¯å¾„ï¼Œå¯ä»¥åŒ¹é…åˆ°/aè·¯ç”±ç»„ä»¶ï¼›å¦‚æœæƒ³ä¸¥æ ¼åŒ¹é…ï¼Œå¯ä»¥ä½¿ç”¨extraå¼€å¯ä¸¥æ ¼åŒ¹é…æ¨¡å¼ã€‚ä¹Ÿå°±æ˜¯é»˜è®¤çš„æ¨¡ç³ŠåŒ¹é…ï¼Œæ˜¯å¦å¼€å¯æ ¹æ®éœ€è¦ã€‚æ¯”å¦‚è¦åŒ¹é…äºŒçº§è·¯ç”±å°±ä¸è¦å¼€å¯extra
- è¿›å…¥é¦–é¡µï¼Œä¸€èˆ¬ä¼šé»˜è®¤ä¸€ä¸ªè·¯ç”±ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨`<Redirect to="/home">`é‡å®šå‘ç»„ä»¶ï¼Œä¸€èˆ¬å†™åœ¨è·¯ç”±ç»„ä»¶çš„æœ€ä¸‹æ–¹
- åŠ¨æ€è·¯ç”±ï¼Œparamsæ–¹å¼éœ€è¦å£°æ˜/a/:id/:nameæ¥æ”¶ï¼Œå¯¹åº”/a/12/josnè¿™ä¸ªè·¯ç”±ï¼Œå…¶å®ä¼šå°†{ id:12, name: 'josn' }æ”¾åœ¨ä¼ ç»™è·¯ç”±ç»„ä»¶çš„å¯¹è±¡çš„matchå±æ€§ä¸Šï¼Œå…¶å®ç±»ä¼¼vueä¸­çš„paramsä¼ å‚
- åŠ¨æ€è·¯ç”±ï¼Œsearchæ–¹å¼ï¼Œä¸éœ€è¦å£°æ˜å¦‚ä½•æ¥æ”¶ã€‚ç›´æ¥åœ¨props.loacation.searchä¸Šã€‚ä½†ä¸æ˜¯å¯¹è±¡æ¨¡å¼ï¼Œéœ€è¦è‡ªå·±æ•´ç†ï¼Œä¹Ÿå¯ä»¥å€ŸåŠ©querystringè¿™ä¸ªåº“ã€‚ï¼ˆä½†éœ€è¦æ³¨æ„è·å–åˆ°searchæ˜¯urlencodedç¼–ç çš„å­—ç¬¦ä¸²ï¼‰
- stateå‚æ•°ï¼Œä¸ä¼šåœ¨urlé‡Œæ˜¾ç¤ºï¼Œå¦‚ä¸‹ï¼š`<Link to={{ pathname: 'xxx', state: { a: 'xx' } }}></Link>`ï¼Œè¿™ç§æ–¹å¼ç±»ä¼¼åœ¨vueä¸­çš„this.$router.push({})ï¼Œè¿™ç§æ–¹å¼è™½ç„¶åœ¨urlé‡Œçœ‹ä¸åˆ°ï¼Œä½†åˆ·æ–°åä¾ç„¶å¯ä»¥ä¿ç•™å‚æ•°ï¼Œå› ä¸ºhistroyå¯¹è±¡ä¸Šä¸€ç›´ä¿ç•™ç€å‘¢ã€‚ä½†å¯¹äºhashRouteråˆ·æ–°åæ‚”å¯¼è‡´stateå‚æ•°ä¸¢å¤±ï¼Œå› ä¸ºæ²¡æœ‰åˆ©ç”¨histroyå¯¹è±¡
- push,replaceçš„æ–¹å¼ï¼Œé»˜è®¤æ˜¯pushæ¨¡å¼ï¼Œæƒ³replaceåªéœ€åœ¨ç»„ä»¶ä¸Šæ·»åŠ replaceå±æ€§å³å¯
- ä¸Šé¢çš„æ–¹å¼éƒ½æ˜¯éœ€è¦æ‰‹åŠ¨ç‚¹å‡»å¯¹åº”çš„ç»„ä»¶æ‰å¯ä»¥ï¼Œé‚£å¦‚æœè®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨5såè·³è½¬å‘¢ï¼Ÿè¿™å°±éœ€è¦ç¼–ç¨‹å¼å¯¼èˆªï¼Œå¯ä»¥å€ŸåŠ©props.histroy.pushä¸Šé¢çš„æ–¹æ³•å®ç°è·³è½¬ã€‚ä½†ä¸€èˆ¬ç»„ä»¶çš„propsä¸Šæ²¡æœ‰historyå¯¹è±¡ã€‚ã€‚ã€‚æ€ä¹ˆåŠå‘¢ï¼Ÿå¯ä»¥ç»™ä¸€èˆ¬ç»„ä»¶ç”¨withRouterç»„ä»¶åŒ…æ‹¬ä¸€ä¸‹ï¼Œå…¶å®å°±æ˜¯åœ¨ç»„ä»¶å¯¼å‡ºæ—¶ç”¨react-router-domé‡Œçš„withRouteråŒ…æ‹¬ä¸€ä¸‹ï¼Œè®©ä¸€èˆ¬ç»„ä»¶å…·å¤‡è·¯ç”±ç»„ä»¶æ‰€ç‰¹æœ‰çš„apiã€‚withRouteræ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›æ–°çš„ç»„ä»¶

## react uiåº“

- å›½å¤–ï¼Œmaterial-ui
- å›½å†…ï¼Œant-design

### 

- antdæ˜¯ä½¿ç”¨lesså†™çš„

- æŒ‰ä½optioné”®ï¼ŒåŒå‡»å•è¯å¯ä»¥é€‰æ‹©å¤šä¸ªï¼Œç„¶åå†å¤åˆ¶ï¼Œæ¯”è¾ƒæ–¹ä¾¿

## redux

- dvaç­‰ç­‰ä¹Ÿæ˜¯é›†ä¸­å¼ç®¡ç†

### reduxæ˜¯ä»€ä¹ˆ

- ä¸“é—¨åšçŠ¶æ€ç®¡ç†çš„jsåº“ï¼Œä½†ä¸ä»…ä»…æ˜¯æœåŠ¡äºreact
- ä½†å¤šæ•°æƒ…å†µä¸‹ä¸reacté…åˆä½¿ç”¨
- é›†ä¸­å¼ç®¡ç†reactåº”ç”¨ä¸­å¤šä¸ªç»„ä»¶å…±äº«çš„çŠ¶æ€

- è¯»å–reduxçš„å€¼ï¼Œstore.getState();
- å½“stateé‡Œçš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéœ€è¦store.subscribe(() => { this.setState() })
- å¦‚æœå¤šä¸ªç»„ä»¶éƒ½éœ€è¦è®¢é˜…äº‹ä»¶ï¼Œå¯ä»¥å°†storeçš„è®¢é˜…æ”¾åœ¨index.jsxé‡Œäº†ã€‚ è¿™æ ·ä»»ä½•ä¸€ä¸ªç»„ä»¶å¼•èµ·storeçš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œéƒ½ä¼šè§¦å‘è®¢é˜…é‡Œçš„å›è°ƒã€‚ä»è€Œè§¦å‘ä»æ–°æ¸²æŸ“ã€‚ã€‚ã€‚ä¸ç”¨è€ƒè™‘æ•ˆç‡é—®é¢˜ï¼Œå› ä¸ºæœ‰diff
- reduxåªè´Ÿè´£æ•°æ®çš„ç®¡ç†ï¼Œé¡µé¢çš„é‡æ–°æ¸²æŸ“éœ€è¦è‡ªå·±æ¸²æŸ“ã€‚
- reduxå¯ä»¥æœ‰åŒæ­¥å’Œå¼‚æ­¥actionï¼Œå¼‚æ­¥actionè¿˜å¾—å¿…é¡»å€ŸåŠ©reactä¸­çš„applyMiddlewareä»¥åŠredux-thunkï¼Œã€‚ã€‚ã€‚å¼‚æ­¥actionçš„å…¥å‚æ˜¯dispatch

### react-redux

- react-reduxæ˜¯å®˜æ–¹å‡ºçš„reduxï¼Œç›®çš„å°±æ˜¯æ›´èˆ’æœçš„ç”¨reduxï¼Œä¹‹å‰çš„reduxå¹¶ä¸æ˜¯å®˜æ–¹å‡ºçš„ã€‚ 

react-reduxçš„æ¨¡å‹å›¾ï¼š

- æ‰€æœ‰çš„uiç»„ä»¶éƒ½åº”è¯¥è¢«å®¹å™¨ç»„ä»¶åŒ…è£¹ã€‚
- å®¹å™¨ç»„ä»¶æ‰æ˜¯çœŸæ­£ä¸reduxæ‰“äº¤é“çš„ï¼Œé‡Œé¢å¯ä»¥éšæ„çš„ä½¿ç”¨reduxçš„api
- uiç»„ä»¶ä¸­ä¸èƒ½ä½¿ç”¨ä»»ä½•reduxçš„api
- å®¹å™¨ç»„ä»¶ä¼šä¼ ç»™uiç»„ä»¶ä¸€äº›çŠ¶æ€æˆ–æ–¹æ³•
- uiç»„ä»¶å…¶å®å°±æ˜¯çˆ¶å®¹å™¨ç»„ä»¶æ¥æ”¶propsè¿›è€Œå±•ç¤º

- å®¹å™¨ç»„ä»¶å¹¶ä¸æ˜¯æˆ‘ä»¬ç¼–å†™çš„æ™®é€šç»„ä»¶ï¼Œè€Œæ˜¯é€šè¿‡ç¬¬ä¸‰æ–¹åº“react-reduxåˆ›å»ºï¼›å¯ä»¥ç†è§£ä¸ºå®¹å™¨ç»„ä»¶å°±æ˜¯ä¸€ä¸ªæ¡¥æ¢
- æ¡¥æ¢è¿æ¥çš„ä¸¤ä¾§åˆ†åˆ«æ˜¯uiç»„ä»¶å’Œstoreï¼Œ
- ç”¨react-reduxä¸­çš„connectå‡½æ•°å…³è”uiç»„ä»¶å’Œstore
- react-reduxçš„æ€æƒ³æ˜¯è¿æ¥ï¼Œè€Œä¸æ˜¯ä¹‹å‰å¸¸è§„çˆ¶å­ç»„ä»¶çš„åŒ…è£¹ã€‚ã€‚ã€‚å¯èƒ½è¿™æ˜¯ä¸ºå‡½æ•°å¼ç¼–ç¨‹å¼€å¯äº†å¤§é—¨å§ã€‚
- ä½¿ç”¨äº†react-reduxåï¼Œä¹Ÿä¸ç”¨åœ¨æ‰‹åŠ¨æ£€æµ‹storeçš„å˜åŒ–è¿›è€Œæ›´æ–°é¡µé¢äº†ã€‚ã€‚ã€‚åš“åš“æ“¦ï¼Œå°è£…çš„å¤Ÿç‹ ã€‚ï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä½•ä¸è‡ªå·±åˆ›å»ºå®¹å™¨ç»„ä»¶çš„åŸå› å§ï¼Œå› ä¸ºconnectå‡½æ•°å®ç°äº†å¤ªå¤šçš„åŠŸèƒ½ï¼‰
- å¦‚æœä¸æƒ³æ¯ä¸ªéƒ½ä¼ åˆ°å­ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨react-reduxçš„providerç»„ä»¶ï¼Œåªéœ€å°†ä¼ ç»™å­ç»„ä»¶çš„å¯¹è±¡ä¼ ç»™providerå°±è¡Œã€‚
- reduxerè¦æ±‚é‡Œé¢çš„æ“ä½œæ˜¯çº¯å‡½æ•°é€»è¾‘ï¼Œå¦‚æœé‡‡ç”¨shiftæˆ–pushè¿™ç§æ”¹å˜æ•°ç»„çš„æ–¹å¼ï¼Œå°±ä¸æ˜¯çº¯å‡½æ•°ï¼Œå› ä¸ºæ”¹å˜äº†åŸæ•°ç»„ã€‚
- reduxè¿˜æœ‰å¯¹åº”çš„è°ƒè¯•å·¥å…·ï¼šRedux DevToolsï¼Œä½†è¿˜éœ€è¦é…åˆå¦å¤–ä¸€ä¸ªåº“redux-devtools-extensionï¼›åˆ©ç”¨è¿™ä¸ªå¼€å‘å·¥å…·å°±å¯ä»¥å®ç°æ—¶é—´æ—…è¡Œäº†ï¼Œç‰›é€¼å•Š
- ç–¯ç‹‚å¥—å¨ƒ
- å¯åŠ¨æœåŠ¡è¿˜å¯ä»¥å€ŸåŠ©ä¸€ä¸ªserveåº“
- reactä¸­çš„lazyå®ç°è·¯ç”±ç»„ä»¶æ‡’åŠ è½½ï¼Œå½“ç½‘é€Ÿå¾ˆæ…¢æ—¶ï¼Œéœ€è¦ç”¨suspenseç»„ä»¶å…œåº•ï¼Œå…¶å®å°±ç›¸å½“äºè¿‡æ¸¡é˜¶æ®µçš„å±•ç¤º

### hooks

### å¤šçº§è·¯ç”±

- ç‚¹å‡»ä¸€ä¸ªé“¾æ¥ï¼Œreactçš„åŒ¹é…é¡ºåºæ˜¯ä»æœ€å¼€å§‹æ³¨å†Œçš„è·¯ç”±å¼€å§‹åŒ¹é…ï¼Œæ­¤æ—¶å°±éœ€è¦çˆ¶ç»„ä»¶çš„æ¨¡ç³ŠåŒ¹é…ã€‚ã€‚ã€‚

## ä¸€äº›ç‚¹

- åœ¨vueä¸­æ˜¾ç¤ºå’Œéšè—ä¸€ä¸ªç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨v-ifæˆ–è€…v-showï¼Œä½†åœ¨reactä¸­ï¼Œå› ä¸ºæ²¡æœ‰æ¨¡æ¿ï¼Œå› æ­¤å½“ä¸ºfalseæ—¶ï¼Œéœ€è¦è¿”å›nullæ‰è¡¨ç¤ºéšè—ç»„ä»¶ã€‚
- react hooksçš„ç”±æ¥ï¼ŒHook æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥**è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§**ã€‚
  - åœ¨ç»„ä»¶ä¹‹é—´å¤ç”¨çŠ¶æ€é€»è¾‘å¾ˆéš¾
  - å¤æ‚ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£(æ¯”å¦‚åˆ†æ•£åœ¨å„ä¸ªç”Ÿå‘½å‘¨æœŸé‡Œçš„é€»è¾‘æˆ–çŠ¶æ€ç­‰ç­‰)
  - classçš„è¡Œä¸ºå¤æ€ªï¼Œæ¯”å¦‚thisç»‘å®šï¼Œå‹ç¼©æ•ˆæœå·®ç­‰

ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼ŒHook ä½¿ä½ åœ¨é class çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æ›´å¤šçš„ React ç‰¹æ€§ã€‚å…¶å®è¯´ç™½äº†ï¼Œhookçš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³classç»„ä»¶çš„ä¸€äº›ç—›ç‚¹ã€‚

Hook æ˜¯ä¸€äº›å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶é‡Œâ€œé’©å…¥â€ React state åŠç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§çš„å‡½æ•°ã€‚Hook ä¸èƒ½åœ¨ class ç»„ä»¶ä¸­ä½¿ç”¨
- useEffect hookçš„æ‰§è¡Œæ—¶æœºå®åœ¨æ¸²æŸ“å®Œæˆåï¼Œæœ‰ç‚¹ç±»ä¼¼vueä¸­çš„nextTickã€‚å¦‚æœæƒ³åœ¨æ¸²æŸ“å‰æ‰§è¡Œï¼Œåˆ™éœ€è¦ä½¿ç”¨useLayoutEffectï¼›å½“ä½¿ç”¨useEffectäº§ç”Ÿå‰¯ä½œç”¨åï¼Œæƒ³è¦æ¸…é™¤è¿™ä¸ªå‰¯ä½œç”¨ï¼Œåˆ™éœ€è¦è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°å†…éƒ¨å°±æ˜¯æ¸…é™¤å‰¯ä½œç”¨çš„é€»è¾‘ï¼ˆæ¯”å¦‚æ¸…é™¤å®šæ—¶å™¨ï¼‰
- å› ä¸ºhookä¸»è¦ç”¨åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œå‡½æ•°ç»„ä»¶æœ¬æ¥æ˜¯æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸæ¦‚å¿µçš„ï¼Œå¼•å…¥hookçš„åŸå› ä¹‹ä¸€ä¹Ÿå°±æ˜¯å¼•å…¥å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†åˆç¨æœ‰ä¸åŒï¼Œéœ€è¦æ³¨æ„hookä¸ç”Ÿå‘½å‘¨æœŸé’©å­çš„å¯¹åº”å…³ç³»ã€‚


- setStateå¯ä»¥æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå‚æ•°ä¸€æ˜¯æ—§çš„stateå¯¹è±¡ï¼Œå‚æ•°äºŒæ˜¯propså¯¹è±¡ï¼Œæ„å‘³ç€æ— æ³•ç›´æ¥æ‹¿åˆ°æ”¹å˜åçš„æ–°å€¼ã€‚
- åœ¨react ç±»ç»„ä»¶ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œéœ€è¦æ˜¾å¼çš„ç»‘å®šthisï¼Œå› ä¸ºthiså¹¶ä¸ä¼šç»§æ‰¿ï¼Œå¦å¤–ç±»ç»„ä»¶é‡Œçš„æ–¹æ³•ï¼Œé€šå¸¸éƒ½å¸Œæœ›å¼•ç”¨ç»„ä»¶çš„å½“å‰å®ä¾‹ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨bindæˆ–è€…ç›´æ¥å®šä¹‰ä¸€ä¸ªç®­å¤´å‡½æ•°ã€‚è¿˜å¯ä»¥åœ¨htmlå±æ€§ä¸Šä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œç®­å¤´å‡½æ•°çš„ä½œç”¨å°±æ˜¯ä»ä¸Šå±‚å¸¸è§„å‡½æ•°é‡Œè·å–thisã€‚ä½†è¿™ä¸ªæ¨¡å¼æœ‰ä¸ªé—®é¢˜ï¼šå°±æ˜¯ç»„ä»¶æ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™ï¼Œéƒ½ä¼šé‡æ–°åˆ›å»ºå‡½æ•°ï¼Œå¦‚æœå­ç»„ä»¶ä¾èµ–è¿™ä¸ªå‡½æ•°åˆ™ä¼šç›¸åº”çš„é‡æ–°æ¸²æŸ“ã€‚æ‰€ä»¥ä¼˜å…ˆå‰ä¸¤ç§æ–¹å¼ç»‘å®šthis

```js
// ç®­å¤´å‡½æ•°æ–¹å¼ï¼Œå¿…é¡»æ˜¾ç¤ºä¼ é€’äº‹ä»¶å¯¹è±¡eï¼Œå› ä¸ºç®­å¤´å‡½æ•°çš„å…¥å‚å…¶å®ç»§æ‰¿è‡³å¸¸è§„å‡½æ•°çš„å…¥å‚
// è¡Œå†…æ–¹å¼ç»‘å®šå‡½æ•°çš„å‚æ•°ä¸€å°±æ˜¯äº‹ä»¶å¯¹è±¡
<button onClick={(e) => this.deleteRow(id, e)}>Delete Row</button>
// ä¸‹é¢çš„æ–¹å¼å…¶å®ç­‰ä»·äºthis.deleteRow(id)ï¼Œè€Œä¸”äº‹ä»¶å¯¹è±¡é»˜è®¤åœ¨æœ€åä¸€ä½ä¼ å…¥
<button onClick={this.deleteRow.bind(this, id)}>Delete Row</button>

// ç»¼ä¸Šï¼šåœ¨reactä¸­ç»‘å®šçš„å‡½æ•°ï¼Œå…¶å®æ˜¯åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸åƒhtmlé‡Œç»‘å®šçš„æ˜¯å‡½æ•°çš„æ‰§è¡Œï¼Œå¦‚ä¸‹
<button onClick={activateLasers}>
  Activate Lasers
</button>

<button onclick="activateLasers()">
  Activate Lasers
</button>
```


- æˆ‘ä»¬å»ºè®®ä»ç»„ä»¶è‡ªèº«çš„è§’åº¦å‘½å propsï¼Œè€Œä¸æ˜¯ä¾èµ–äºè°ƒç”¨ç»„ä»¶çš„ä¸Šä¸‹æ–‡å‘½åã€‚
- componentDidMount() æ–¹æ³•ä¼šåœ¨ç»„ä»¶å·²ç»è¢«æ¸²æŸ“åˆ° DOM ä¸­åè¿è¡Œ;(componentDidCatchç”Ÿå‘½å‘¨æœŸå¯ä»¥æ•è·é”™è¯¯)
- åœ¨ React ä¸­å¦ä¸€ä¸ªä¸åŒç‚¹æ˜¯ä½ ä¸èƒ½é€šè¿‡è¿”å› false çš„æ–¹å¼é˜»æ­¢é»˜è®¤è¡Œä¸ºã€‚ä½ å¿…é¡»æ˜¾å¼çš„ä½¿ç”¨ preventDefault ã€‚
- React äº‹ä»¶ä¸åŸç”Ÿäº‹ä»¶ä¸å®Œå…¨ç›¸åŒã€‚å¦‚æœæƒ³äº†è§£æ›´å¤šï¼Œè¯·æŸ¥çœ‹ [SyntheticEvent](https://zh-hans.reactjs.org/docs/events.html) å‚è€ƒæŒ‡å—ã€‚


```js
class LoggingButton extends React.Component {
  handleClick() {
    console.log('this is:', this);
  }

  render() {
    // æ­¤è¯­æ³•ç¡®ä¿ `handleClick` å†…çš„ `this` å·²è¢«ç»‘å®šã€‚
    return (
      <button onClick={() => this.handleClick()}>
        Click me
      </button>
    );
  }
}
```
æ­¤è¯­æ³•é—®é¢˜åœ¨äºæ¯æ¬¡æ¸²æŸ“ LoggingButton æ—¶éƒ½ä¼šåˆ›å»ºä¸åŒçš„å›è°ƒå‡½æ•°ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†å¦‚æœè¯¥å›è°ƒå‡½æ•°ä½œä¸º prop ä¼ å…¥å­ç»„ä»¶æ—¶ï¼Œè¿™äº›ç»„ä»¶å¯èƒ½ä¼šè¿›è¡Œé¢å¤–çš„é‡æ–°æ¸²æŸ“ã€‚æˆ‘ä»¬é€šå¸¸å»ºè®®åœ¨æ„é€ å™¨ä¸­ç»‘å®šæˆ–ä½¿ç”¨ class fields è¯­æ³•æ¥é¿å…è¿™ç±»æ€§èƒ½é—®é¢˜ã€‚

```js
<button onClick={(e) => this.deleteRow(id, e)}>Delete Row</button>

<button onClick={this.deleteRow.bind(this, id)}>Delete Row</button>
```
åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼ŒReact çš„äº‹ä»¶å¯¹è±¡ e ä¼šè¢«ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ã€‚å¦‚æœé€šè¿‡ç®­å¤´å‡½æ•°çš„æ–¹å¼ï¼Œäº‹ä»¶å¯¹è±¡å¿…é¡»æ˜¾å¼çš„è¿›è¡Œä¼ é€’ï¼Œè€Œé€šè¿‡ bind çš„æ–¹å¼ï¼Œäº‹ä»¶å¯¹è±¡ä»¥åŠæ›´å¤šçš„å‚æ•°å°†ä¼šè¢«éšå¼çš„è¿›è¡Œä¼ é€’ã€‚


```js
function Mailbox(props) {
  const unreadMessages = props.unreadMessages;
  return (
    <div>
      <h1>Hello!</h1>
      {/* æ³¨æ„è¿™æ˜¯æ³¨é‡Šçš„æ ¼å¼ï¼Œå¦å¤–å°±æ˜¯æ³¨æ„ä¸‹é¢çš„å†™æ³• */}
      {unreadMessages.length > 0 &&
        <h2>
          You have {unreadMessages.length} unread messages.
        </h2>
      }
    </div>
  );
}

const messages = ['React', 'Re: React', 'Re:Re: React'];
ReactDOM.render(
  <Mailbox unreadMessages={messages} />,
  document.getElementById('root')
);
```

- åœ¨ç»„ä»¶çš„ render æ–¹æ³•ä¸­è¿”å› null å¹¶ä¸ä¼šå½±å“ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚è¿”å›nullå°±æ˜¯ä¸æ˜¾ç¤ºç»„ä»¶ï¼Œä½†ç”Ÿå‘½å‘¨æœŸé’©å­ä¾ç„¶ä¼šæ‰§è¡Œ

- è¿™é‡Œä½¿ç”¨äº† ES6 è®¡ç®—å±æ€§åç§°çš„è¯­æ³•æ›´æ–°ç»™å®šè¾“å…¥åç§°å¯¹åº”çš„ state å€¼

```js
this.setState({
  [name]: value
});
// ç­‰åŒ ES5:
var partialState = {};
partialState[name] = value;
this.setState(partialState);
```

- åœ¨å—æ§ç»„ä»¶ä¸ŠæŒ‡å®š value çš„ prop ä¼šé˜»æ­¢ç”¨æˆ·æ›´æ”¹è¾“å…¥ã€‚å¦‚æœä½ æŒ‡å®šäº† valueï¼Œä½†è¾“å…¥ä»å¯ç¼–è¾‘ï¼Œåˆ™å¯èƒ½æ˜¯ä½ æ„å¤–åœ°å°†value è®¾ç½®ä¸º undefined æˆ– nullã€‚

ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†è¿™ä¸€ç‚¹ã€‚ï¼ˆè¾“å…¥æœ€åˆè¢«é”å®šï¼Œä½†åœ¨çŸ­æ—¶é—´å»¶è¿Ÿåå˜ä¸ºå¯ç¼–è¾‘ã€‚ï¼‰

```js
// å…¶å®å°±æ˜¯vulueè®¾ç½®æ­»äº†ï¼Œæ‰€ä»¥æ”¹å˜ä¸äº†
ReactDOM.render(<input value="hi" />, mountNode);

setTimeout(function() {
    // ä½†å¦‚æœè®¾ç½®ä¸ºnullæˆ–undefinedåˆ™å¯ä»¥ç¼–è¾‘
  ReactDOM.render(<input value={null} />, mountNode);
}, 1000);
```

åœ¨reactä¸­è¿˜æœ‰ä¸€ç§éå—æ§ç»„ä»¶ï¼Œå…¶å®å°±æ˜¯vueä¸­çš„refï¼Œæ•°æ®æ”¹å˜åå…¶å®å­˜å‚¨åœ¨æœ¬èº«çš„domèŠ‚ç‚¹ä¸Šï¼Œå› æ­¤å–å€¼æ—¶ä¹Ÿå°±å¯ä»¥ç›´æ¥è·å–domèŠ‚ç‚¹ä¸Šçš„å€¼ã€‚

- è¯­ä¹‰åŒ–çš„ HTML æ˜¯æ— éšœç¢è¾…åŠ©åŠŸèƒ½ç½‘ç»œåº”ç”¨çš„åŸºç¡€ã€‚ åˆ©ç”¨å¤šç§ HTML å…ƒç´ æ¥å¼ºåŒ–æ‚¨ç½‘ç«™ä¸­çš„ä¿¡æ¯é€šå¸¸å¯ä»¥ä½¿æ‚¨ç›´æ¥è·å¾—æ— éšœç¢è¾…åŠ©åŠŸèƒ½ã€‚

- å…³äºåˆ†åŒ…ï¼šå½“ä½¿ç”¨ Babel æ—¶ï¼Œä½ è¦ç¡®ä¿ Babel èƒ½å¤Ÿè§£æåŠ¨æ€ import è¯­æ³•è€Œä¸æ˜¯å°†å…¶è¿›è¡Œè½¬æ¢ã€‚å¯¹äºè¿™ä¸€è¦æ±‚ä½ éœ€è¦ @babel/plugin-syntax-dynamic-import æ’ä»¶ã€‚

```js
// è¿™ç§è¯­æ³•ï¼Œwebpackå¹¶ä¸ä¼šé»˜è®¤æ‹†åˆ†åŒ…
import { add } from './math';
console.log(add(16, 26));

// ä½¿ç”¨ä¹‹åï¼š
// è¿™ç§åŠ¨æ€åŠ è½½ï¼Œå› ä¸ºæ˜¯å¼‚æ­¥åŠ è½½ï¼Œå› æ­¤å¿…é¡»æ‹†åˆ†åŒ…
import("./math").then(math => {
  console.log(math.add(16, 26));
});
```

## æ˜Ÿæ²³sdk

å°ç¨‹åºçš„é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚æ˜¯åˆ†å¼€çš„ï¼Œé€»è¾‘å±‚è¿è¡Œåœ¨ JSCore ä¸­ï¼Œå¹¶æ²¡æœ‰ä¸€ä¸ªå®Œæ•´æµè§ˆå™¨å¯¹è±¡ï¼Œå› è€Œç¼ºå°‘ç›¸å…³çš„DOM APIå’ŒBOM APIã€‚è¿™ä¸€åŒºåˆ«å¯¼è‡´äº†å‰ç«¯å¼€å‘éå¸¸ç†Ÿæ‚‰çš„ä¸€äº›åº“ï¼Œä¾‹å¦‚ jQueryã€ Zepto ç­‰ï¼Œåœ¨å°ç¨‹åºä¸­æ˜¯æ— æ³•è¿è¡Œçš„ã€‚

åŒæ—¶ JSCore çš„ç¯å¢ƒåŒ NodeJS ç¯å¢ƒä¹Ÿæ˜¯ä¸å°½ç›¸åŒï¼Œæ‰€ä»¥ä¸€äº› NPM çš„åŒ…åœ¨å°ç¨‹åºä¸­ä¹Ÿæ˜¯æ— æ³•è¿è¡Œçš„ã€‚

### mpxæ¥å…¥æ˜Ÿæ²³å°ç¨‹åº

ç›®å‰mpxå·²ç»æ”¯æŒæ‰“å‡ºæ˜Ÿæ²³å°ç¨‹åºçš„æ”¯æŒè¯­æ³•ï¼Œå³ddmlã€ddssã€jsã€jsonæ–‡ä»¶

**æ³¨æ„ï¼š**mpxåŸºç¡€åº“2.6.76ç‰ˆæœ¬ä»¥ä¸Šæ‰æ”¯æŒddmlæ‰“åŒ…ï¼Œ2.6.76ç‰ˆæœ¬ä»¥ä¸‹åªèƒ½æŒ‡å®šæ‰“åŒ…æ¨¡å¼ä¸ºwxï¼Œæ‰“åŒ…å®Œæˆåå‚è€ƒå¾®ä¿¡åŸç”Ÿé¡¹ç›®è¿›è¡Œæ¥å…¥

<!-- å¯¼å…¥æ©™å¿ƒä¼˜é€‰å°ç¨‹åºdiståŒ…ï¼ŒæŠ¥é”™ä¿¡æ¯ -->
<!-- Error: ENOENT: no such file or directory, open '/Users/didi/.dimina/builds/88830ab730da357226beb9352e2f2e68/__dist__/app/app-config.json'
at Object.openSync (fs.js:466:3)
at Object.func [as openSync] (electron/js2c/asar_bundle.js:5:1812)
at Object.readFileSync (fs.js:368:35)
at Object.e.readFileSync (electron/js2c/asar_bundle.js:5:8592)
at getFileContent (/Applications/æ˜Ÿæ²³å¼€å‘è€…å·¥å…·.app/Contents/Resources/app/app/app.js:2990:34)
at SimulatorSdkImpl._callee2$ (/Applications/æ˜Ÿæ²³å¼€å‘è€…å·¥å…·.app/Contents/Resources/app/app/app.js:3856:75)
at tryCatch (/Applications/æ˜Ÿæ²³å¼€å‘è€…å·¥å…·.app/Contents/Resources/app/node_modules/regenerator-runtime/runtime.js:63:40)
at Generator.invoke [as _invoke] (/Applications/æ˜Ÿæ²³å¼€å‘è€…å·¥å…·.app/Contents/Resources/app/node_modules/regenerator-runtime/runtime.js:294:22)
at Generator.next (/Applications/æ˜Ÿæ²³å¼€å‘è€…å·¥å…·.app/Contents/Resources/app/node_modules/regenerator-runtime/runtime.js:119:21)
at asyncGeneratorStep (/Applications/æ˜Ÿæ²³å¼€å‘è€…å·¥å…·.app/Contents/Resources/app/app/app.js:141:24)
at _next (/Applications/æ˜Ÿæ²³å¼€å‘è€…å·¥å…·.app/Contents/Resources/app/app/app.js:163:9)
at runMicrotasks (<anonymous>)
at processTicksAndRejections (internal/process/task_queues.js:97:5) -->

<!-- å¯¼å…¥åŸç”Ÿé¡¹ç›®æ—¶ï¼Œæç¤ºï¼šè¯·ä½¿ç”¨1.4.4åŠä»¥ä¸Šç‰ˆæœ¬åŸºç¡€åº“ -->

## æ©™æŒæŸœç»„ä»¶åº“å·¥ç¨‹åŒ–

### åŒ…ç®¡ç† lerna

å°†å¤§å‹ä»£ç ä»“åº“åˆ†å‰²æˆå¤šä¸ªç‹¬ç«‹ç‰ˆæœ¬åŒ–çš„ è½¯ä»¶åŒ…ï¼ˆpackageï¼‰å¯¹äºä»£ç å…±äº«æ¥è¯´éå¸¸æœ‰ç”¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœæŸäº›æ›´æ”¹ è·¨è¶Šäº†å¤šä¸ªä»£ç ä»“åº“çš„è¯å°†å˜å¾—å¾ˆ éº»çƒ¦ å¹¶ä¸”éš¾ä»¥è·Ÿè¸ªï¼Œå¹¶ä¸”ï¼Œ è·¨è¶Šå¤šä¸ªä»£ç ä»“åº“çš„æµ‹è¯•å°†è¿…é€Ÿå˜å¾—éå¸¸å¤æ‚ã€‚

Lerna æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå®ƒä¼˜åŒ–äº†ä½¿ç”¨ git å’Œ npm ç®¡ç†å¤šåŒ…å­˜å‚¨åº“çš„å·¥ä½œæµã€‚

èƒŒæ™¯ï¼š
1. å°†ä¸€ä¸ªå¤§çš„ package åˆ†å‰²æˆä¸€äº›å°çš„ packcage ä¾¿äºåˆ†äº«ï¼Œè°ƒè¯•
2. åœ¨å¤šä¸ª git ä»“åº“ä¸­æ›´æ”¹å®¹æ˜“å˜å¾—æ··ä¹±ä¸”éš¾ä»¥è·Ÿè¸ª
3. åœ¨å¤šä¸ª git ä»“åº“ä¸­ç»´æŠ¤æµ‹è¯•ç¹ç

é—®é¢˜ä¸€ï¼šå‡å¦‚æœ‰ä¸¤ä¸ªç»„ä»¶åº“ï¼Œå­˜åœ¨ä¾èµ–çš„å…³ç³»ï¼Œç›®å‰è”è°ƒæ˜¯é€šè¿‡npm linkçš„æ–¹å¼ï¼Œæ€§èƒ½å¹¶ä¸å¥½ï¼Œæ—¶å¸¸å‡ºç°å¡é¡¿çš„é—®é¢˜ã€‚

ä¸¤ç§å‘å¸ƒæ¨¡å¼ï¼š
- Fixed/Locked mode (default)ï¼Œå‘å¸ƒæ—¶ï¼Œæ‰€æœ‰åŒ…çš„ç‰ˆæœ¬éƒ½ä¼šæ›´æ–°ï¼Œä¸”ä¸€è‡´
- Independent modeï¼Œç‹¬ç«‹æ¨¡å¼ï¼Œæ¯ä¸ª package éƒ½å¯ä»¥æœ‰è‡ªå·±çš„ç‰ˆæœ¬å·ã€‚ç‰ˆæœ¬å·ç»´æŠ¤åœ¨å„è‡ª package.json çš„ version ä¸­ã€‚æ¯æ¬¡å‘å¸ƒå‰éƒ½ä¼šæç¤ºå·²ç»æ›´æ”¹çš„åŒ…ï¼Œä»¥åŠå»ºè®®çš„ç‰ˆæœ¬å·æˆ–è€…è‡ªå®šä¹‰ç‰ˆæœ¬å·ã€‚


- lerna list å¯ä»¥æŸ¥çœ‹å½“å‰é¡¹ç›®ä¸‹çš„package
- lerna linkï¼Œç±»ä¼¼npm link
- lerna add react --scope=xxxï¼Œä»£è¡¨æˆ‘çš„react ä¾èµ–åªå®‰è£…åœ¨xxx åŒ…åä¸‹é¢ï¼Œ è€Œä¸æ˜¯å…¨éƒ¨éƒ½å®‰è£…ï¼Œå¦‚æœéœ€è¦å…¨éƒ¨å®‰è£…çš„è¯ï¼Œ åˆ™ lerna add react å³å¯
- é…ç½®æ–‡ä»¶ï¼šlerna.json

Lerna æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†å¤šä¸ªåŒ…å­˜å‚¨åœ¨å•ä¸ª git ä»“åº“ä¸­çš„å·¥å…·ï¼Œè€Œ Monorepo æ˜¯ä¸€ç§å°†å¤šä¸ªç›¸å…³é¡¹ç›®å­˜å‚¨åœ¨ä¸€ä¸ªå•ç‹¬çš„ä»£ç åº“ä¸­çš„å¼€å‘æ–¹å¼ã€‚Lerna å¯ä»¥ç”¨æ¥ä¼˜åŒ–åœ¨ Monorepo ä¸­ç®¡ç†å¤šä¸ªåŒ…çš„å·¥ä½œæµç¨‹ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´æ–¹ä¾¿åœ°ç»´æŠ¤å’Œå…±äº«ä»£ç ã€‚ä½¿ç”¨ Lerna ç®¡ç† Monorepo å¯ä»¥æ–¹ä¾¿å¼€å‘è€…åœ¨å¤šä¸ªé¡¹ç›®ä¸­å…±äº«ä»£ç ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æ›´è½»æ¾åœ°ç®¡ç†ä¾èµ–å…³ç³»ï¼Œä½¿å¾—é¡¹ç›®å˜å¾—æ›´æ˜“äºç»´æŠ¤ã€‚

Monorepoæ˜¯æŒ‡å°†å¤šä¸ªé¡¹ç›®å­˜å‚¨åœ¨åŒä¸€ä¸ªä»£ç ä»“åº“ä¸­ï¼Œè¿™äº›é¡¹ç›®ä¹‹é—´å¯ä»¥å…±äº«ä»£ç ã€å·¥å…·ã€æ„å»ºé…ç½®ç­‰èµ„æºï¼Œå®ç°é«˜æ•ˆçš„å¼€å‘å’Œéƒ¨ç½²ã€‚

é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå›¢é˜Ÿä¼šæœ‰å¤šä¸ªé¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½æœ‰è‡ªå·±çš„ä»£ç ä»“åº“ã€‚ä½†æ˜¯ï¼Œå½“è¿™äº›é¡¹ç›®ä¹‹é—´æœ‰å…±äº«çš„ä»£ç æˆ–ä¾èµ–å…³ç³»æ—¶ï¼Œç»´æŠ¤å¤šä¸ªç‹¬ç«‹çš„ä»£ç ä»“åº“ä¼šå¸¦æ¥è®¸å¤šé—®é¢˜ï¼Œå¦‚ä»£ç é‡å¤ã€ä¾èµ–ç®¡ç†ã€æ„å»ºå’Œéƒ¨ç½²ç­‰ã€‚

é€šè¿‡é‡‡ç”¨Monorepoçš„æ–¹å¼ï¼Œå¯ä»¥å°†è¿™äº›é¡¹ç›®æ•´åˆåˆ°ä¸€ä¸ªä»£ç ä»“åº“ä¸­ï¼Œç»Ÿä¸€ç®¡ç†å’Œç»´æŠ¤ã€‚è¿™æ ·å¯ä»¥é¿å…é‡å¤ä»£ç ã€æé«˜ä»£ç é‡ç”¨ç‡ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¤Ÿæ›´æ–¹ä¾¿åœ°ç®¡ç†ä¾èµ–ã€å‡çº§ç‰ˆæœ¬ã€æ„å»ºå’Œéƒ¨ç½²ç­‰ï¼Œä»è€Œæé«˜å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚

Yarn Workspaceså’ŒLernaéƒ½æ˜¯ç”¨æ¥ç®¡ç†Monorepoï¼ˆå¤šåŒ…å­˜å‚¨åº“ï¼‰çš„å·¥å…·ï¼Œä½†å®ƒä»¬åœ¨å®ç°ä¸Šæœ‰äº›ä¸åŒã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒä»¬çš„åŒºåˆ«å¦‚ä¸‹ï¼š

- å®ç°æ–¹å¼ä¸åŒï¼šYarn Workspaces æ˜¯å†…ç½®åœ¨Yarnä¸­çš„ç‰¹æ€§ï¼Œè€ŒLernaåˆ™æ˜¯ä¸€ä¸ªå•ç‹¬çš„CLIå·¥å…·ï¼Œéœ€è¦å•ç‹¬å®‰è£…ã€‚
- åŠŸèƒ½ä¸åŒï¼šYarn Workspaces ä¸»è¦ç”¨äºç®¡ç†ä¾èµ–å…³ç³»ï¼Œå®ƒå°†å¤šä¸ªåŒ…ï¼ˆpackageï¼‰è§†ä¸ºä¸€ä¸ªæ•´ä½“æ¥è¿›è¡Œå®‰è£…å’Œæ›´æ–°ã€‚Lernaåˆ™ä¸ä»…æä¾›äº†ç±»ä¼¼çš„ä¾èµ–ç®¡ç†åŠŸèƒ½ï¼Œè¿˜åŒ…å«äº†è¯¸å¦‚å‘å¸ƒã€æµ‹è¯•å’Œæ„å»ºç­‰åŠŸèƒ½ã€‚
- é…ç½®æ–¹å¼ä¸åŒï¼šYarn Workspaces éœ€è¦åœ¨package.jsonä¸­é…ç½®"workspaces"å±æ€§æ¥æŒ‡å®šåŒ…å«çš„æ‰€æœ‰åŒ…ã€‚è€ŒLernaéœ€è¦åœ¨lerna.jsonæˆ–è€…é€šè¿‡å‘½ä»¤è¡Œé€‰é¡¹æ¥é…ç½®ã€‚
- åº”ç”¨åœºæ™¯ä¸åŒï¼šYarn Workspaces æ›´é€‚åˆäºçº¯ç²¹çš„ä¾èµ–ç®¡ç†ï¼Œè€ŒLernaåˆ™æ›´é€‚åˆäºå¤§å‹çš„Monorepoé¡¹ç›®ï¼Œå…¶ä¸­éœ€è¦å¤„ç†å¤šä¸ªç›¸äº’ä¾èµ–çš„åŒ…ï¼Œä»¥åŠè¿›è¡Œè‡ªåŠ¨åŒ–çš„å‘å¸ƒã€æµ‹è¯•å’Œæ„å»ºç­‰æ“ä½œã€‚

æ€»ä¹‹ï¼ŒYarn Workspaceså’ŒLernaéƒ½æ˜¯å¾ˆå¥½çš„ç®¡ç†Monorepoçš„å·¥å…·ï¼Œå…·ä½“ä½¿ç”¨å“ªä¸ªå–å†³äºé¡¹ç›®çš„å…·ä½“éœ€æ±‚ã€‚

#### lerna bootstrap

åœ¨ä¸€ä¸ªå¤šåŒ…çš„å·¥ä½œåŒºä¸­ï¼Œä¸åŒçš„åŒ…ä¹‹é—´å¾ˆå¯èƒ½å­˜åœ¨ç›¸äº’ä¾èµ–çš„æƒ…å†µï¼Œè€Œè¿™äº›ä¾èµ–çš„ç®¡ç†å¯èƒ½ä¼šæ¯”è¾ƒå¤æ‚ã€‚ä¸ºäº†è®©å¤šä¸ªåŒ…ä¹‹é—´çš„ä¾èµ–æ›´åŠ æ¸…æ™°æ˜äº†ï¼Œå¯ä»¥ä½¿ç”¨ lerna bootstrap å‘½ä»¤å°†è¿™äº›åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»é“¾æ¥åœ¨ä¸€èµ·ã€‚

å…·ä½“æ¥è¯´ï¼Œlerna bootstrap å‘½ä»¤ä¼šåœ¨å½“å‰å·¥ä½œåŒºä¸­çš„æ‰€æœ‰åŒ…ä¸­å®‰è£…ä¾èµ–ï¼Œç„¶åé€šè¿‡ç¬¦å·é“¾æ¥çš„æ–¹å¼å°†åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»å»ºç«‹èµ·æ¥ï¼Œä½¿å¾—ä¸åŒåŒ…ä¹‹é—´çš„ä¾èµ–å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œè€Œä¸éœ€è¦é€šè¿‡ npm ç­‰åŒ…ç®¡ç†å·¥å…·è¿›è¡Œå®‰è£…ã€‚è¿™æ ·å¯ä»¥å¤§å¤§ç®€åŒ–åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»ç®¡ç†ï¼Œæé«˜é¡¹ç›®çš„å¼€å‘æ•ˆç‡ã€‚

#### lerna publish çš„å·¥ä½œåŸç†å¦‚ä¸‹ï¼š

1. ç¡®å®šå“ªäº›åŒ…éœ€è¦å‘å¸ƒï¼šlerna changed å‘½ä»¤ä¼šæ£€æŸ¥æ¯ä¸ªåŒ…çš„å˜æ›´è®°å½•ï¼Œå¹¶è¾“å‡ºéœ€è¦è¢«å‘å¸ƒçš„åŒ…ã€‚
2. æ›´æ–°æ¯ä¸ªåŒ…çš„ç‰ˆæœ¬å·ï¼šæ ¹æ®å‘½ä»¤è¡Œå‚æ•°ã€Git commit message æˆ–å…¶ä»–é…ç½®æ–‡ä»¶ï¼Œè‡ªåŠ¨æ›´æ–°æ¯ä¸ªåŒ…çš„ç‰ˆæœ¬å·ï¼Œå¹¶æ›´æ–°æ¯ä¸ªåŒ…çš„ package.json æ–‡ä»¶ã€‚
3. å‘å¸ƒæ¯ä¸ªåŒ…ï¼šå¯¹äºæ¯ä¸ªéœ€è¦å‘å¸ƒçš„åŒ…ï¼ŒLerna ä¼šåœ¨ npm registry ä¸­å‘å¸ƒä¸€ä¸ªæ–°ç‰ˆæœ¬ã€‚
4. åˆ›å»º Git tagï¼šæ¯ä¸ªå‘å¸ƒç‰ˆæœ¬ä¼šè‡ªåŠ¨åœ¨ Git ä¸­æ‰“ä¸€ä¸ª tagï¼Œtag åç§°ä¸º v<package-version>ã€‚

**æ³¨æ„ï¼Œ**å¦‚æœä½ çš„ packages ä½¿ç”¨äº† Git dependenciesï¼Œåˆ™å®ƒä»¬çš„ç‰ˆæœ¬å·ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°å¹¶è¢«æäº¤åˆ° Git ä»“åº“ä¸­ã€‚Git dependencies æŒ‡çš„
æ˜¯åœ¨ package.json æ–‡ä»¶ä¸­å£°æ˜çš„ä¾èµ–ä¸ºä¸€ä¸ª Git ä»“åº“åœ°å€ï¼Œè€Œä¸æ˜¯æŒ‡å‘ä¸€ä¸ªå·²ç»å‘å¸ƒåˆ° npm registry çš„åŒ…ã€‚

[å‚è€ƒLerna --å¤šåŒ…å­˜å‚¨ç®¡ç†å·¥å…·ï¼ˆä¸€ï¼‰](https://segmentfault.com/a/1190000023954051)


### dumi æ˜¯ä¸€æ¬¾ä¸ºç»„ä»¶å¼€å‘åœºæ™¯è€Œç”Ÿçš„æ–‡æ¡£å·¥å…·ï¼Œ

dumiï¼Œä¸­æ–‡å‘éŸ³å˜Ÿç±³ï¼Œæ˜¯ä¸€æ¬¾ä¸ºç»„ä»¶å¼€å‘åœºæ™¯è€Œç”Ÿçš„æ–‡æ¡£å·¥å…·ï¼Œä¸ father ä¸€èµ·ä¸ºå¼€å‘è€…æä¾›ä¸€ç«™å¼çš„ç»„ä»¶å¼€å‘ä½“éªŒï¼Œ**father è´Ÿè´£æ„å»º**ï¼Œè€Œ dumi è´Ÿè´£ç»„ä»¶å¼€å‘åŠç»„ä»¶æ–‡æ¡£ç”Ÿæˆã€‚

é…ç½®ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º .umirc.ts æˆ– config/config.ts æ–‡ä»¶ï¼Œéƒ½å¯å¯¹ dumi è¿›è¡Œé…ç½®ï¼š

```js
import { defineConfig } from 'dumi';

export default defineConfig({
  title: 'dumi',
  favicon: 'https://user-images.githubusercontent.com/9554297/83762004-a0761b00-a6a9-11ea-83b4-9c8ff721d4b8.png',
  logo: 'https://user-images.githubusercontent.com/9554297/83762004-a0761b00-a6a9-11ea-83b4-9c8ff721d4b8.png',
  outputPath: 'docs-dist',
  mode: 'site', // ç”¨äºè®¾å®šæ–‡æ¡£çš„å±•ç°æ¨¡å¼ï¼Œé»˜è®¤ä¸ºæ–‡æ¡£æ¨¡å¼ï¼Œé…ç½®ä¸º site æ—¶å¯æ— ç¼åˆ‡æ¢ä¸ºç«™ç‚¹æ¨¡å¼ã€‚
  resolve: {
    includes: [
			// é…ç½® dumi å—…æ¢çš„æ–‡æ¡£ç›®å½•ï¼Œdumi ä¼šå°è¯•åœ¨é…ç½®çš„ç›®å½•ä¸­é€’å½’å¯»æ‰¾ markdown æ–‡ä»¶ï¼Œé»˜è®¤å€¼ä¸º docs ç›®å½•ã€src ç›®å½•ï¼ˆæ™®é€šé¡¹ç›®ï¼‰ï¼Œ
			// å¦‚æœç¯å¢ƒä¸º lerna é¡¹ç›®ï¼Œåˆ™ src ç›®å½•å˜ä¸º packages/pkg/src ç›®å½•ï¼Œé€šå¸¸ä¸éœ€è¦é…ç½®ï¼Œé™¤éè‡ªåŠ¨å—…æ¢å‡ºç°äº†ã€è¯¯ä¼¤ã€ã€‚
      'packages/1/docs',
      'packages/Shorten/docs',
      'docs'
    ],
    excludes: [
      'packages/main'
    ]
  },
});
```

### ä»£ç è§„èŒƒ

åœ¨æœ‰äº†Huskyèµ‹èƒ½ä¹‹åï¼Œæˆ‘ä»¬æœ‰èƒ½åŠ›åœ¨Gitçš„é’©å­é‡Œåšä¸€äº›äº‹æƒ…ï¼Œé¦–å…ˆä¸å¾—ä¸æçš„æ˜¯ä»£ç çš„æäº¤è§„èŒƒå’Œè§„èŒƒçš„æ ¡éªŒï¼Œä¼˜é›…çš„æäº¤ï¼Œæ–¹ä¾¿å›¢é˜Ÿåä½œå’Œå¿«é€Ÿå®šä½é—®é¢˜ã€‚é¦–æ¨Commitlintï¼Œå¦å¤–@åŠ ç¥ æ¨èäº†Gitmojiä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„å·¥å…·ã€‚

åœ¨é¡¹ç›®çš„ .git/hooks ç›®å½•ä¸­ï¼Œæœ‰ä¸€äº› .sample ç»“å°¾çš„é’©å­ç¤ºä¾‹è„šæœ¬ï¼Œå¦‚æœæƒ³å¯ç”¨å¯¹åº”çš„é’©å­ï¼Œåªéœ€æ‰‹åŠ¨åˆ é™¤åç¼€ï¼Œå³å¯ã€‚ï¼ˆåˆ é™¤æŸä¸€ä¸ª hook çš„åç¼€ .sample å³å¯å¯ç”¨è¯¥ hook è„šæœ¬ï¼Œé»˜è®¤æ˜¯ä¸å¯ç”¨çš„ã€‚ï¼‰

```
Git Hook	è°ƒç”¨æ—¶æœº	è¯´æ˜
pre-applypatch	git amæ‰§è¡Œå‰	
applypatch-msg	git amæ‰§è¡Œå‰	
post-applypatch	git amæ‰§è¡Œå	ä¸å½±å“git amçš„ç»“æœ
pre-commit	git commitæ‰§è¡Œå‰	å¯ä»¥ç”¨git commit --no-verifyç»•è¿‡
commit-msg	git commitæ‰§è¡Œå‰	å¯ä»¥ç”¨git commit --no-verifyç»•è¿‡
post-commit	git commitæ‰§è¡Œå	ä¸å½±å“git commitçš„ç»“æœ
pre-merge-commit	git mergeæ‰§è¡Œå‰	å¯ä»¥ç”¨git merge --no-verifyç»•è¿‡ã€‚
prepare-commit-msg	git commitæ‰§è¡Œåï¼Œç¼–è¾‘å™¨æ‰“å¼€ä¹‹å‰	
pre-rebase	git rebaseæ‰§è¡Œå‰	
post-checkout	git checkoutæˆ–git switchæ‰§è¡Œå	å¦‚æœä¸ä½¿ç”¨--no-checkoutå‚æ•°ï¼Œåˆ™åœ¨git cloneä¹‹åä¹Ÿä¼šæ‰§è¡Œã€‚
post-merge	git commitæ‰§è¡Œå	åœ¨æ‰§è¡Œgit pullæ—¶ä¹Ÿä¼šè¢«è°ƒç”¨
pre-push	git pushæ‰§è¡Œå‰	
pre-receive	git-receive-packæ‰§è¡Œå‰	
update		
post-receive	git-receive-packæ‰§è¡Œå	ä¸å½±å“git-receive-packçš„ç»“æœ
post-update	å½“ git-receive-packå¯¹ git push ä½œå‡ºååº”å¹¶æ›´æ–°ä»“åº“ä¸­çš„å¼•ç”¨æ—¶	
push-to-checkout	å½“`git-receive-packå¯¹git pushåšå‡ºååº”å¹¶æ›´æ–°ä»“åº“ä¸­çš„å¼•ç”¨æ—¶ï¼Œä»¥åŠå½“æ¨é€è¯•å›¾æ›´æ–°å½“å‰è¢«ç­¾å‡ºçš„åˆ†æ”¯ä¸”receive.denyCurrentBranché…ç½®è¢«è®¾ç½®ä¸ºupdateInsteadæ—¶	
pre-auto-gc	git gc --autoæ‰§è¡Œå‰	
post-rewrite	æ‰§è¡Œgit commit --amendæˆ–git rebaseæ—¶	
sendemail-validate	git send-emailæ‰§è¡Œå‰	
fsmonitor-watchman	é…ç½®core.fsmonitorè¢«è®¾ç½®ä¸º.git/hooks/fsmonitor-watchmanæˆ–.git/hooks/fsmonitor-watchmanv2æ—¶	
p4-pre-submit	git-p4 submitæ‰§è¡Œå‰	å¯ä»¥ç”¨git-p4 submit --no-verifyç»•è¿‡
p4-prepare-changelist	git-p4 submitæ‰§è¡Œåï¼Œç¼–è¾‘å™¨å¯åŠ¨å‰	å¯ä»¥ç”¨git-p4 submit --no-verifyç»•è¿‡
p4-changelist	git-p4 submitæ‰§è¡Œå¹¶ç¼–è¾‘å®Œchangelist messageå	å¯ä»¥ç”¨git-p4 submit --no-verifyç»•è¿‡
p4-post-changelist	git-p4 submitæ‰§è¡Œå	
post-index-change	ç´¢å¼•è¢«å†™å…¥åˆ°read-cache.c do_write_locked_indexå	
```

ã€ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸å»æ”¹åŠ¨ .git/hooks é‡Œé¢çš„æ–‡ä»¶ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨ husky ã€‘

å‡è®¾ä½ çš„ husky å®‰è£…æ˜¯æ­£å¸¸çš„ï¼Œé‚£ä¹ˆ husky ä¸ºä½ å®‰è£…çš„ hooks å°†ä¼šç”Ÿæ•ˆã€‚è¿™æ ·æˆ‘ä»¬åœ¨ **git commit çš„æ—¶å€™ä¼šè§¦å‘ pre-commit é’©å­ä»è€Œè§¦å‘åˆ° huksy**ã€‚

```json
"husky": {
	"hooks": {
		"pre-commit": "npm run lint", // 
		"commit-msg": "commitlint -e $GIT_PARAMS" // ä½¿ç”¨commit-msgè¿™ä¸ªgit hookæ¥æ ¡éªŒæˆ‘ä»¬commitæ—¶æ·»åŠ çš„å¤‡æ³¨ä¿¡æ¯æ˜¯å¦ç¬¦åˆè§„èŒƒã€‚
		// $GIT_PARAMSï¼Œè¿™é‡Œæ˜¯gitçš„å˜é‡ï¼Œæ„æ€æ˜¯åœ¨â€™commit-msgâ€™è¿™ä¸ªé’©å­å†…è·å–commité‡Œçš„å†…å®¹è¿›è¡Œcommitlintæ£€æµ‹ï¼Œå¦‚æœæœè¯¥é’©å­è„šæœ¬ä»¥éé›¶å€¼é€€å‡ºï¼ŒGit å°†æ”¾å¼ƒæäº¤
	}
}

// Git é’©å­å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°å’Œ stdin è·å–å‚æ•°ã€‚Husky ï¼ˆHuskyï¼‰ä½¿å®ƒä»¬å¯ä»¥é€šè¿‡ HUSKY_GIT_PARAMS å’Œ HUSKY_GIT_STDIN ç¯å¢ƒå˜é‡è¿›è¡Œè®¿é—®ã€‚
// å‚è€ƒï¼šhttps://www.breword.com/typicode-husky
"commit-msg": "echo $HUSKY_GIT_PARAMS"
```

lint-staged æ˜¯ä¸€ä¸ªåœ¨ git æš‚å­˜æ–‡ä»¶ä¸Šï¼ˆä¹Ÿå°±æ˜¯è¢« git add çš„æ–‡ä»¶ï¼‰è¿è¡Œå·²é…ç½®çš„ linterï¼ˆæˆ–å…¶ä»–ï¼‰ä»»åŠ¡ã€‚lint-staged æ€»æ˜¯å°†æ‰€æœ‰æš‚å­˜æ–‡ä»¶çš„åˆ—è¡¨ä¼ é€’ç»™ä»»åŠ¡ã€‚

```json
// åœ¨ commit ä¹‹å‰ï¼Œå°†æš‚å­˜åŒºçš„å†…å®¹åšä¸€æ¬¡ ä»£ç ç¾åŒ– å’Œ ä»£ç æ£€æŸ¥ï¼Œç„¶åå†æ·»åŠ åˆ°æš‚å­˜åŒºï¼›ç„¶åå† commitï¼Œå®Œç¾ï¼ï¼
"husky": {
  "hooks": {
    "pre-commit": "lint-staged"
  }
},
"lint-staged": {
	// ä½†æ˜¯å°½é‡ä¸è¦ä½¿ç”¨prettierï¼Œå› ä¸ºä¼šå¤šå‡ºå¾ˆå¤šé¢å¤–çš„é—®é¢˜
  "src/**/*.{js,vue}": ["prettier --write", "eslint --cache --fix", "git add"]
}
```

[å‚è€ƒhuskyä¸ºä½•æ”¾å¼ƒäº†ä¼ ç»Ÿçš„jsé…ç½®](https://juejin.cn/post/7000186205224566791#heading-8)

prepare æ˜¯ NPM æ“ä½œç”Ÿå‘½å‘¨æœŸä¸­çš„ä¸€ç¯ï¼Œåœ¨æ‰§è¡Œ install çš„æ—¶å€™ä¼šæŒ‰ç”Ÿå‘½å‘¨æœŸé¡ºåºæ‰§è¡Œç›¸åº”é’©å­ï¼š
NPM7ï¼š preinstall -> install -> postinstall -> prepublish -> preprepare -> prepare -> postprepare

ç»¼ä¸Šåˆ©ç”¨ï¼š
1. åˆ©ç”¨husky é…ç½® git hooksï¼Œ
2. ç„¶ååœ¨é’©å­é‡Œä½¿ç”¨eslintå¯¹ä»£ç è¿›è¡Œæ ¼å¼æ£€æŸ¥
3. åœ¨git commitæ—¶å†å¯¹æäº¤çš„commitåšæ ¼å¼æ ¡éªŒï¼Œå…·ä½“ä»€ä¹ˆæ ¼å¼ï¼Œå°±å¾—æœ‰ä¸ªè§„èŒƒæ¯”å¦‚æ˜¯[commitlint](https://commitlint.js.org/#/) 


commitlint æ ¡éªŒæäº¤ä¿¡æ¯ï¼Œcommitizen è¾…åŠ©å¡«å†™æäº¤ä¿¡æ¯ï¼›åœ¨ Git æäº¤å·¥ä½œæµç¨‹ä¸­ï¼Œcommitlint ä½œç”¨äº commit-msg é˜¶æ®µï¼Œcommitizenä½œç”¨äº pre-commitã€‚äº’ä¸å¹²æ‰°ï¼Œå„å¸å…¶èŒï¼Œç›¸è¾…ç›¸æˆã€‚

[å‚è€ƒ commitlint å’Œ commitizen å…±ç”¨è§„åˆ™é…ç½®](https://juejin.cn/post/6975836256441729032)

```json
{
  "scripts": {
    "commit": "git-cz"
  },
  "config": {
    "commitizen": {
      "path": "@commitlint/cz-commitlint",
			"path": "config/cz-changelog/index.js" // å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„ï¼Œå…¶å®å°±æ˜¯é¢„è®¾çš„è§„èŒƒé›†åˆï¼Œå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆcommit message
    }
  }
}
```

[å¦‚ä½•é…ç½® Git Commit Message(å­—èŠ‚)](https://zhuanlan.zhihu.com/p/69635847)
[è®©ä½ çš„commit æ›´æœ‰ä»·å€¼](https://segmentfault.com/a/1190000023388007)

### ç”ŸæˆchangeLog

### æç¤ºç»„ä»¶åº“ plop

å…¶å®å°±æ˜¯æ–°å»ºé¡¹ç›®æ—¶ï¼Œäº¤äº’ç”¨çš„ï¼Œå‘½ä»¤å¼äº¤äº’

é…ç½®æ–‡ä»¶å°±æ˜¯æ ¹ç›®å½•çš„ï¼š.plopfile.js



## react

reactç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„jsåº“ï¼Œ

å‘é€æ•°æ®ï¼Œå¤„ç†æ•°æ®éƒ½ä¸å¹²ï¼Œåªåšæ“ä½œdomå±‚é¢é¡µé¢

åŸç”Ÿçš„ç—›ç‚¹ï¼šæ“ä½œçœŸå®domï¼ˆæ¯æ¬¡éƒ½é‡å»ºçœŸå®domï¼Œæˆæœ¬é«˜ï¼›è™šæ‹Ÿdomä¼šé‡ç”¨ä¹‹å‰çš„ï¼Ÿï¼‰ï¼Œæ²¡æœ‰ç»„ä»¶åŒ–ï¼Œ

- å‘½ä»¤å¼ç¼–ç  -ã€‹ å£°æ˜å¼ç»„ä»¶ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡å’Œç»„ä»¶å¤ç”¨ç‡
- react-native ä½¿ç”¨jsç¼–å†™iosæˆ–è€…adroidåº”ç”¨
- diffç®—æ³• + è™šæ‹Ÿdom

### reactæºç è°ƒè¯•

ç”±äºé€’å½’æ‰§è¡Œï¼Œæ‰€ä»¥æ›´æ–°ä¸€æ—¦å¼€å§‹ï¼Œä¸­é€”å°±æ— æ³•ä¸­æ–­ã€‚å½“å±‚çº§å¾ˆæ·±æ—¶ï¼Œé€’å½’æ›´æ–°æ—¶é—´è¶…è¿‡äº†16msï¼Œç”¨æˆ·äº¤äº’å°±ä¼šå¡é¡¿ï¼Œå› æ­¤æå‡ºäº†è§£å†³åŠæ³•â€”â€”ç”¨å¯ä¸­æ–­çš„å¼‚æ­¥æ›´æ–°ä»£æ›¿åŒæ­¥çš„æ›´æ–°ã€‚

- Reconciler(åè°ƒå™¨)ï¼Œè´Ÿè´£æ‰¾å‡ºå˜åŒ–çš„ç»„ä»¶
- Rendererï¼ˆæ¸²æŸ“å™¨ï¼‰ï¼Œè´Ÿè´£å°†å˜åŒ–çš„ç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢
- Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰â€”â€” è°ƒåº¦ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œé«˜ä¼˜ä»»åŠ¡ä¼˜å…ˆè¿›å…¥Reconcilerï¼ˆreact16å¼•å…¥ï¼‰

åœ¨React16ä¸­ï¼ŒReconcilerä¸Rendererä¸å†æ˜¯äº¤æ›¿å·¥ä½œã€‚å½“Schedulerå°†ä»»åŠ¡äº¤ç»™Reconcileråï¼ŒReconcilerä¼šä¸ºå˜åŒ–çš„è™šæ‹ŸDOMæ‰“ä¸Šä»£è¡¨å¢/åˆ /æ›´æ–°çš„æ ‡è®°ï¼Œæ•´ä¸ªSchedulerä¸Reconcilerçš„å·¥ä½œéƒ½åœ¨å†…å­˜ä¸­è¿›è¡Œã€‚åªæœ‰å½“æ‰€æœ‰ç»„ä»¶éƒ½å®ŒæˆReconcilerçš„å·¥ä½œï¼Œæ‰ä¼šç»Ÿä¸€äº¤ç»™Rendererã€‚

16.6mså†…ï¼šjsæ‰§è¡Œ-ã€‹å¸ƒå±€-ã€‹æ ·å¼ç»˜åˆ¶
[è¾“å…¥å­—ç¬¦è¶Šå¤šï¼Œæ¸²æŸ“çš„èŠ‚ç‚¹è¶Šå¤šï¼Œè¶Šè€ƒéªŒæ€§èƒ½](https://codesandbox.io/s/concurrent-ibzkq)

å°†åŒæ­¥æ›´æ–°æ›´æ¢ä¸ºå¯ä¸­æ–­çš„å¼‚æ­¥æ›´æ–°

React16é‡‡ç”¨æ–°çš„Reconcilerï¼Œä¸»è¦è§£å†³å¤§ä»»åŠ¡å¯ä»¥åˆ†ç‰‡ï¼Œä»è€Œé¿å…æ¸²æŸ“å¤§ä»»åŠ¡å¡é¡¿ã€‚ Reconcilerå†…éƒ¨é‡‡ç”¨äº†Fiberçš„æ¶æ„ã€‚

Fiberå¹¶ä¸æ˜¯è®¡ç®—æœºæœ¯è¯­ä¸­çš„æ–°åè¯ï¼Œä»–çš„ä¸­æ–‡ç¿»è¯‘å«åšçº¤ç¨‹ï¼Œä¸è¿›ç¨‹ï¼ˆProcessï¼‰ã€çº¿ç¨‹ï¼ˆThreadï¼‰ã€åç¨‹ï¼ˆCoroutineï¼‰åŒä¸ºç¨‹åºæ‰§è¡Œè¿‡ç¨‹ã€‚

åœ¨å¾ˆå¤šæ–‡ç« ä¸­å°†çº¤ç¨‹ç†è§£ä¸ºåç¨‹çš„ä¸€ç§å®ç°ã€‚åœ¨JSä¸­ï¼Œåç¨‹çš„å®ç°ä¾¿æ˜¯Generatorã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†çº¤ç¨‹(Fiber)ã€åç¨‹(Generator)ç†è§£ä¸ºä»£æ•°æ•ˆåº”æ€æƒ³åœ¨JSä¸­çš„ä½“ç°ã€‚

React Fiberå¯ä»¥ç†è§£ä¸ºï¼š

Reactå†…éƒ¨å®ç°çš„ä¸€å¥—çŠ¶æ€æ›´æ–°æœºåˆ¶ã€‚æ”¯æŒä»»åŠ¡ä¸åŒä¼˜å…ˆçº§ï¼Œå¯ä¸­æ–­ä¸æ¢å¤ï¼Œå¹¶ä¸”æ¢å¤åå¯ä»¥å¤ç”¨ä¹‹å‰çš„ä¸­é—´çŠ¶æ€ã€‚

**å…¶ä¸­æ¯ä¸ªä»»åŠ¡æ›´æ–°å•å…ƒä¸ºReact Elementå¯¹åº”çš„FiberèŠ‚ç‚¹**ã€‚

æˆ‘ä»¬äº†è§£äº†Fiberçš„èµ·æºä¸æ¶æ„ï¼Œå…¶ä¸­FiberèŠ‚ç‚¹å¯ä»¥æ„æˆFiberæ ‘ã€‚é‚£ä¹ˆFiberæ ‘å’Œé¡µé¢å‘ˆç°çš„DOMæ ‘æœ‰ä»€ä¹ˆå…³ç³»ï¼ŒReactåˆæ˜¯å¦‚ä½•æ›´æ–°DOMçš„å‘¢ï¼Ÿ
****

- æ¯ä¸€ä¸ªå‡½æ•°ç»„ä»¶ç”¨å¯¹åº”çš„å‡½æ•°ç»„ä»¶çš„ fiber å¯¹è±¡å»ä¿å­˜ hooks ä¿¡æ¯ã€‚æ‰€ä»¥æˆ‘ä»¬åªèƒ½ä» fiberæ‰¾åˆ°çº¿ç´¢ã€‚

### reactå…¥é—¨

æ–°å»ºhtmlï¼Œå¼•å…¥ä¸‹é¢ä¸‰ä¸ªæ–‡ä»¶ï¼Œç›´æ¥æ“ä½œï¼š

- babel -ã€‹es6è½¬es5ï¼Œè¿˜å¯ä»¥è§£æimportï¼Œjsxï¼ˆè½¬ä¸ºjsï¼‰ç­‰è¯­æ³•
- reactï¼šæ ¸å¿ƒåº“
- react-domï¼šä¾èµ–reactï¼Œæ“ä½œdom

```html
<!-- åªåœ¨æœ¬åœ°å­¦ä¹ é˜¶æ®µä½¿ç”¨ï¼Œç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œé¡¹ç›®åºå¤§ï¼Œæµè§ˆå™¨é babelè¿è¡Œæ—¶è§£æå¾ˆè€—æ—¶ -->
<script type="text/babel">
    // å®šä¹‰è™šæ‹Ÿdomï¼Œå³ä¾§ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯jsxï¼Œé babelè§£æ
    const vDom = <h1>hello,react</h1>

    React.render(vDom, document.getElementById('#app'))
</script>
```

### è™šæ‹Ÿdomçš„ä¸¤ç§åˆ›å»ºæ–¹å¼

 - ä½¿ç”¨jsxï¼Œç®€æ´æ–¹ä¾¿
 - ä½¿ç”¨jsï¼ŒReact.createElement('h1', { id: 'titlt' }, 'hello, react')

å› æ­¤ä½¿ç”¨jsxè¯­æ³•å¯ä»¥æå¤§çš„å‡è½»ç¼–ç è´Ÿæ‹…ã€‚è™½ç„¶ç”¨jsxå‡è½»äº†å¼€å‘è€…çš„æˆæœ¬ï¼Œä½†babelæœ€ç»ˆä¹Ÿä¼šè½¬ä¸ºä¸Šé¢çš„jså½¢å¼ã€‚

### è™šæ‹Ÿdomä¸çœŸå®dom

- è™šæ‹Ÿdomå…¶å®å°±æ˜¯ä¸€èˆ¬çš„Objectå¯¹è±¡è€Œå·²ã€‚
- æ¯”çœŸå®domæ›´åŠ è½»é‡ã€‚
- è™šæ‹Ÿdomæœ€ç»ˆä¼šè½¬ä¸ºçœŸå®dom

### jsxçš„è¯­æ³•

- å…¨ç§°javascript xml
- ä¸€ç§ç±»ä¼¼xmlçš„jsæ‰©å±•è¯­æ³•
- æœ¬è´¨æ˜¯React.createElement()æ–¹æ³•çš„è¯­æ³•ç³–
- ä½œç”¨ç”¨æ¥ç®€åŒ–å¼€å‘è€…åˆ›å»ºè™šæ‹Ÿdom

xmlæ—©æœŸç”¨äºå­˜å‚¨å’Œä¼ è¾“æ•°æ®ï¼Œå¦‚ä¸‹å…¶å®ä¸»è¦ä¸ºäº†å­˜å‚¨tomå’Œ17ï¼Œå¤šäº†å¾ˆå¤šä¸œè¥¿ï¼Œåæ¥å‡ºç°äº†æ›´åŠ æ–¹ä¾¿çš„jsonæ•°æ®æ ¼å¼

```xml
<student>
    <name>tom</name>
    <age>17</age>
</student>
```

è¯­æ³•è§„åˆ™ï¼š
- è™šæ‹Ÿdomï¼Œä¸è¦å¼•å·
- æ··å…¥jsè¡¨è¾¾å¼éœ€è¦{}ï¼Œæ³¨æ„æ˜¯è¡¨è¾¾å¼ï¼ï¼ï¼ã€‚
- æ ·å¼çš„ç±»åä½¿ç”¨className
- å†…æ•›æ ·å¼ä¸èƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯ï¼šstyle={{ key:value }}çš„å½¢å¼
- jsxä¸èƒ½æœ‰å¤šä¸ªæ ¹æ ‡ç­¾
- jsxé‡Œçš„æ ‡ç­¾å¿…é¡»é—­åˆ
- å°å†™æ ‡ç­¾éƒ½é»˜è®¤æ˜¯htmlçš„åŒåæ ‡ç­¾ï¼Œè‹¥htmlä¸­æ²¡æœ‰è¯¥æ ‡ç­¾ï¼Œåˆ™æŠ¥é”™ï¼Œä½†å¯ä»¥æ˜¾ç¤ºã€‚
- é¦–å­—ç¬¦å¤§å†™çš„æ ‡ç­¾æ˜¯è‡ªå®šä¹‰çš„ç»„ä»¶ã€‚

### jsxå°ç»ƒä¹ 

- jsxå¦‚æœæ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œjsxä¼šéå†æ¸²æŸ“ã€‚ä½†ä¼ å…¥ä¸€ä¸ªå¯¹è±¡åˆ™ä¸å¯ä»¥
- è¡¨è¾¾å¼ï¼Œä¸€ä¸ªè¡¨è¾¾å¼ä¼šäº§ç”Ÿä¸€ä¸ªå€¼ï¼›åˆ¤æ–­æ˜¯å¦ä¸ºè¡¨è¾¾å¼ï¼Œåªéœ€è¦ç”¨ä¸€ä¸ªå˜é‡æ¥æ”¶è¡¨è¾¾å¼çš„è¿”å›å€¼å³å¯ï¼Œèƒ½æ¥æ”¶åˆ°åˆ™ä¸ºè¡¨è¾¾å¼

### reactæ˜¯é¢å‘ç»„ä»¶ç¼–ç¨‹

- å‡½æ•°ç»„ä»¶ï¼Œåå­—é¦–å­—æ¯å¤§å†™
- babelï¼Œ è¯•ä¸€è¯•ï¼Œæ€ä¹ˆå¢åŠ es5çš„é€‰é¡¹
- å‡½æ•°ç»„ä»¶è¢«babelç¼–è¯‘åï¼Œå¼€å¯äº†ä¸¥æ ¼æ¨¡å¼ï¼Œå› æ­¤å†…éƒ¨çš„thisä¼šæŒ‡å‘undefinedï¼Œæ•´ä¸ªå‡½æ•°éƒ½å¤„åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹

```js
class P {}
const p1 = new P();

console.log(p1);
// PÂ {} ï¼Œ æ§åˆ¶å°çš„æ‰“å°æ•ˆæœï¼ŒPè¡¨ç¤ºè¿™ä¸ªå®ä¾‹çš„ç±»ã€‚åé¢çš„{}æ‰æ˜¯å®ä¾‹
// classé‡Œçš„thisæŒ‡å‘å®ä¾‹ã€‚
```

- ç±»ä¸­çš„æ„é€ å™¨ä¸æ˜¯å¿…é¡»å†™çš„ï¼Œ
- åœ¨reactä¸­ï¼Œç»‘å®šå‡½æ•°åªæ˜¯å°†å‡½æ•°çš„å¼•ç”¨èµ‹å€¼ç»™äº†onClickç­‰ï¼Œå¹¶ä¸æ˜¯å®ä¾‹è°ƒç”¨ï¼Œå› æ­¤ä¼šä¸¢å¤±ä¸€äº›ä¿¡æ¯ã€‚
- ç±»ä¸­çš„æ–¹æ³•é»˜è®¤æ˜¯å¼€å¯äº†å±€éƒ¨çš„ä¸¥æ ¼æ¨¡å¼ï¼Œå› æ­¤æ–¹æ³•ä¸­çš„thisä¼šæŒ‡å‘undefined
- å¦å¤–ç±»ä¸­çš„renderå‡½æ•°ï¼Œä¹‹æ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨thisï¼Œæ˜¯å› ä¸ºreactå®ä¾‹åŒ–ç»„ä»¶åï¼Œé€šè¿‡å®ä¾‹è°ƒç”¨çš„renderæ–¹æ³•ï¼Œå› æ­¤thiså¹¶æ²¡æœ‰ä¸¢å¤±
- å¯ä»¥è‡ªå·±æµ‹è¯•ï¼Œå®ä¾‹åŒ–ç±»ç»„ä»¶ï¼Œç„¶åç”¨å®ä¾‹å»è°ƒç”¨é‡Œé¢çš„érenderæ–¹æ³•ï¼Œçœ‹çœ‹thiså°±çŸ¥é“äº†ã€‚
- åœ¨constructoré‡Œä½¿ç”¨bindï¼Œå…¶å®ç›¸å½“äºå°†åŸå‹ä¸Šçš„æ–¹æ³•ç»‘å®šthisåé‡æ–°èµ‹å€¼åˆ°å½“å‰å®ä¾‹çš„åŒåå±æ€§ä¸Šäº†ï¼Œåç»­é¡µé¢æ¸²æŸ“å˜ä¼˜å…ˆä½¿ç”¨å½“å‰å®ä¾‹ä¸Šçš„æ–¹æ³•ï¼Œç„¶åæ‰æ˜¯åŸå‹ä¸Šçš„ã€‚
- this.stateæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åsetStateç”¨æ¥æ›´æ”¹stateï¼Œå½“ç„¶è¿˜å¯ä»¥å®šä¹‰å…¶ä»–å±æ€§ï¼Œæ¯”å¦‚peiqiç­‰ç­‰

### props

- å±•å¼€è¿ç®—ç¬¦ï¼Œä¸»è¦ç”¨åœ¨æ•°ç»„ä¸Šï¼Œä½†ä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨å¯¹è±¡ä¸Šï¼Œå¦‚ä¸‹ï¼Œéœ€è¦{}è¯­æ³•ï¼Œæ³¨æ„åœ¨reactä¸­åªèƒ½ä½¿ç”¨åœ¨ç»„ä»¶çš„å±æ€§ä¼ é€’ä¸­

```js
var obj1 = { foo: 'bar', x: 42 };
var obj2 = { foo: 'baz', y: 13 };

var clonedObj = { ...obj1 };
// å…‹éš†åçš„å¯¹è±¡: { foo: "bar", x: 42 }
```
- å¯¹ç»„ä»¶çš„æ ‡ç­¾å±æ€§è¿›è¡Œç±»å‹é™åˆ¶ï¼Œéœ€è¦å¼•å…¥ç‹¬ç«‹çš„PropsTypesï¼Œåœ¨reactä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åº“

```js
import PropTypes from 'prop-types';

class Greeting extends React.Component {
  render() {
    return (
      <h1>Hello, {this.props.name}</h1>
    );
  }
}

// ç»™ç»„ä»¶çš„propTypeså±æ€§ä¸Šæ·»åŠ ï¼Œæ³¨æ„å’ŒPropTypesä¸å®¹
Greeting.propTypes = {
  name: PropTypes.string
};

// ç»™ç±»è‡ªèº«æ·»åŠ å±æ€§,è€Œä¸æ˜¯ä¸Šé¢åˆ†å¼€çš„å†™æ³•
class Greeting extends React.Component {
    static propTypes = {
        name: PropTypes.string
    }
}

const p = { age: 1, name: 'jon' }
// å¦‚ä¸‹ä¼ é€’å¯¹è±¡
ReactDOM.render(<Greeting {...p}/>, ele)
```

### æ„é€ å™¨

æ„é€ å™¨é»˜è®¤æ¥å—propså‚æ•°ï¼Œå¹¶æ‰§è¡Œsuper(props)ï¼Œè¿™æ ·çš„è¯æ‰ä¼šåœ¨å®ä¾‹ä¸Šä½¿ç”¨this.propsï¼›å¦‚æœå†™äº†constructorï¼Œä½†å¹¶æ²¡æœ‰ä¼ é€’propsï¼Œåˆ™this.propsæ˜¯undefined

é€šå¸¸ï¼Œåœ¨ React ä¸­ï¼Œæ„é€ å‡½æ•°ä»…ç”¨äºä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š

- é€šè¿‡ç»™ this.state èµ‹å€¼å¯¹è±¡æ¥åˆå§‹åŒ–å†…éƒ¨ stateã€‚
- ä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ç»‘å®šå®ä¾‹

### å‡½æ•°å¼ç»„ä»¶

- æ˜¯ä¸€ä¸ªçº¯å‡½æ•°
- æ²¡æœ‰è‡ªèº«çŠ¶æ€ï¼Œåªæ¥æ”¶å¤–éƒ¨æ•°æ®
- äº§å‡º VNode çš„æ–¹å¼ï¼šå•çº¯çš„å‡½æ•°è°ƒç”¨

```jsx
// å‚æ•°ä¸€props
function Person (props) {
    const { name, age } = props;
    return (
        <div>
            <p>{name}</p>
            <p>{age}</p>
        </div>
    )
}
Person.propTypes = {
    name: PropTypes.string,
    age: PropTypes.number.isRequired
}
Person.defaultProps = {};
```

### refs

- refæœ€ç»ˆæ‹¿åˆ°çš„æ˜¯çœŸå®dom
- refå¯ä»¥æ”¯æŒå­—ç¬¦ä¸²(æ•ˆç‡ä½ï¼Œreactæœ¬èº«å¸®ä½ æ”¶é›†åˆ°refsä¸Š)ã€å›è°ƒå‡½æ•°(å…¶å®å°±æ˜¯åœ¨å‡½æ•°å†…éƒ¨ï¼Œå°†å…ƒç´ æŒ‚åœ¨å®ä¾‹ä¸Šï¼Œç„¶åå†è·å–)ã€
- å›è°ƒå‡½æ•°æ‰§è¡Œæ¬¡æ•°ï¼Ÿæ›´æ–°æ—¶ä¼šæ‰§è¡Œä¸¤æ¬¡ï¼Œå¯ä»¥å°†æ–¹æ³•ç›´æ¥å®šä¹‰åœ¨classçš„æ–¹æ³•é‡Œï¼Œå½“ç„¶ä¹Ÿæ— å…³ç´§è¦
- jsxä¸­æ³¨é‡Šå¦‚ä½•å†™ï¼Œéœ€è¦ { // } æˆ–è€… { /* xxx */ }æ‰å¯ä»¥ï¼Œæ³¨æ„æƒ³ä½¿ç”¨jsçš„æ³¨é‡Šæ–¹å¼ï¼Œå¿…é¡»åœ¨jsçš„ç¯å¢ƒä¸­ï¼Œä¹Ÿå°±æ˜¯{} 
- React.createRef() è¿”å›ä¸€ä¸ªå®¹å™¨ï¼Œè¯¥å®¹å™¨å¯ä»¥å­˜å‚¨è¢«refæ ‡è¯†çš„èŠ‚ç‚¹ï¼Œä»currentå±æ€§ä¸Šè·å–å…ƒç´ èŠ‚ç‚¹ã€‚è€Œä¸”æ˜¯ä¸“äººä¸“ç”¨ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹éœ€è¦å»ºä¸€ä¸ªcreateRef()ã€‚ã€‚ã€‚reactæ¨èè¿™ç§æ–¹å¼ï¼Œè™½ç„¶ç¹ç

- é¿å…é¢‘ç¹ä½¿ç”¨refï¼Œå¯ä»¥å€ŸåŠ©event.targetï¼Œä¹Ÿå°±æ˜¯æ“ä½œçš„å…ƒç´ å’Œç»‘å®šäº‹ä»¶çš„å…ƒç´ æ˜¯åŒä¸€ä¸ª

React.forwardRef ä¼šåˆ›å»ºä¸€ä¸ªReactç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶èƒ½å¤Ÿå°†å…¶æ¥å—çš„ ref å±æ€§è½¬å‘åˆ°å…¶ç»„ä»¶æ ‘ä¸‹çš„å¦ä¸€ä¸ªç»„ä»¶ä¸­ã€‚è¿™ç§æŠ€æœ¯å¹¶ä¸å¸¸è§ï¼Œä½†åœ¨ä»¥ä¸‹ä¸¤ç§åœºæ™¯ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼š
- è½¬å‘ refs åˆ° DOM ç»„ä»¶
- åœ¨é«˜é˜¶ç»„ä»¶ä¸­è½¬å‘ refs
  
React.forwardRef æ¥å—æ¸²æŸ“å‡½æ•°ä½œä¸ºå‚æ•°ã€‚React å°†ä½¿ç”¨ props å’Œ ref ä½œä¸ºå‚æ•°æ¥è°ƒç”¨æ­¤å‡½æ•°ã€‚æ­¤å‡½æ•°åº”è¿”å› React èŠ‚ç‚¹ã€‚

```js
const FancyButton = React.forwardRef((props, ref) => (
  <button ref={ref} className="FancyButton">
    {props.children}
  </button>
));

// You can now get a ref directly to the DOM button:
const ref = React.createRef();
<FancyButton ref={ref}>Click me!</FancyButton>;
```
åœ¨ä¸Šè¿°çš„ç¤ºä¾‹ä¸­ï¼ŒReact ä¼šå°† `<FancyButton ref={ref}>` å…ƒç´ çš„ ref ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™ React.forwardRef å‡½æ•°ä¸­çš„æ¸²æŸ“å‡½æ•°ã€‚è¯¥æ¸²æŸ“å‡½æ•°ä¼šå°† ref ä¼ é€’ç»™ `<button ref={ref}>` å…ƒç´ ã€‚

å› æ­¤ï¼Œå½“ React é™„åŠ äº† ref å±æ€§ä¹‹åï¼Œref.current å°†ç›´æ¥æŒ‡å‘ <button> DOM å…ƒç´ å®ä¾‹ã€‚


- useImperativeHandle(ref, createHandle, [deps])
useImperativeHandle å¯ä»¥è®©ä½ åœ¨ä½¿ç”¨ ref æ—¶è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”å½“é¿å…ä½¿ç”¨ ref è¿™æ ·çš„å‘½ä»¤å¼ä»£ç ã€‚useImperativeHandle åº”å½“ä¸ forwardRef ä¸€èµ·ä½¿ç”¨ï¼š

```js
function FancyInput(props, ref) {
  const inputRef = useRef();
  useImperativeHandle(ref, () => ({
    focus: () => {
      inputRef.current.focus();
    }
  }));
  return <input ref={inputRef} />;
}
FancyInput = forwardRef(FancyInput);
```
åœ¨æœ¬ä¾‹ä¸­ï¼Œæ¸²æŸ“ <FancyInput ref={inputRef} /> çš„çˆ¶ç»„ä»¶å¯ä»¥è°ƒç”¨ inputRef.current.focus()ã€‚



### äº‹ä»¶

- reactçš„äº‹ä»¶å‘½åonClickæ–¹å¼ï¼Œæ˜¯ä¸ºäº†æ›´å¥½çš„å…¼å®¹æ€§
- reactä¸­çš„äº‹ä»¶éƒ½æ˜¯åˆ©ç”¨äº‹ä»¶ä»£ç†

### éå—æ§ç»„ä»¶

- ç°ç”¨ç°å–

### å—æ§ç»„ä»¶

- å…¶å®å°±æ˜¯é€šè¿‡stateæ¥ç»´æŠ¤ä¸€äº›å˜é‡ï¼Œæœ‰ç‚¹ç±»ä¼¼vueä¸­çš„åŒå‘æ•°æ®ç»‘å®š
- #regionï¼Œ#endregion æ”¾åœ¨æ³¨é‡Šçš„ä¸¤å¤´ï¼Œå¯ä»¥èµ·åˆ°æŠ˜å æ•ˆæœ

### é«˜é˜¶å‡½æ•°

- è‹¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™ä¸ºé«˜é˜¶ï¼Œå¦‚Promise,setTimeoutï¼Œæ•°ç»„æ–¹æ³•ç­‰
- è‹¥å‡½æ•°è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿæ˜¯é«˜é˜¶

### å‡½æ•°æŸ¯åŠ›åŒ–

- å‡½æ•°è°ƒç”¨ç»§ç»­è¿”å›å‡½æ•°ï¼Œæœ€åç»Ÿä¸€å¤„ç†(ä¸€èˆ¬æ˜¯æ— æ³•åŒæ—¶æ¥æ”¶åˆ°å¤šä¸ªå‚æ•°æ‰ä½¿ç”¨)

### æ—§çš„ç”Ÿå‘½å‘¨æœŸ

æŒ‚è½½ï¼šmount
å¸è½½ï¼šunmout

- ReactDOM.unmountComponentAtNode(el)ï¼Œå¸è½½ç»„ä»¶
- componentDidMount
- componentWillUnmount
- render

æŒ‚è½½æ—¶ï¼š
1. constructor 
2. componentWillMount
3. render
3. componentDidMount

çˆ¶ç»„ä»¶renderæ›´æ–°æ—¶ï¼š
1. componentWillReceivePropsï¼Œè¿™é‡Œä¸»è¦æ˜¯å­ç»„ä»¶æ¥åˆ°propsï¼Œé¡µé¢ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¸ä¼šæ‰§è¡Œè¯¥é’©å­ï¼Œåç»­çš„æ›´æ–°æ‰ä¼šæ‰§è¡Œ
2. shouldComponentUpdate
3. componentWillUpdate
4. render
5. componentDidUpdate

setStateæ—¶ï¼š
1. setStateè°ƒç”¨
2. shouldComponentUpdateï¼Œè¿”å›å¸ƒå°”å€¼ï¼Œtrueåˆ™ç»§ç»­å¾€ä¸‹èµ°
3. componentWillUpdate
4. render
5. componentDidUpdate


forceUpdateè°ƒç”¨æ—¶ï¼š
0. forceUpdateè°ƒç”¨æ—¶ï¼š
1. componenetWillUpdate
2. render
3. componentDidUpdate

å¸è½½ç»„ä»¶æ—¶ï¼ŒReactDOM.unmountComponentAtNode()è§¦å‘ï¼š
1. componentWillUnmountï¼Œæ²¡æœ‰åƒvueä¸­çš„destroyedé’©å­

- è‡³äºç¬¬ä¸€æ¬¡çš„é’©å­æ²¡æœ‰æ‰§è¡Œï¼Œåº”è¯¥æ˜¯æ¡†æ¶åˆå§‹åŒ–æ—¶çš„é€»è¾‘ï¼Œå¾…æ ¸å®ï¼Ÿï¼Ÿï¼Ÿ
- åœ¨componentDidMounté’©å­é‡Œå‘é€è¯·æ±‚ï¼Œæ‰§è¡Œä¸€äº›åˆå§‹åŒ–çš„æ“ä½œï¼Œé‚£åœ¨componentWillMounté‡Œå¯ä»¥æ‹¿åˆ°this.stateå—ï¼Ÿä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå› æ­¤è¯·æ±‚å¯ä»¥æ”¾åœ¨è¿™é‡Œå§

### æ–°çš„ç”Ÿå‘½å‘¨æœŸ

- æ–°ç‰ˆæœ¬ä¸‹çš„reactè¿˜å¯ä»¥ä½¿ç”¨æ—§çš„é’©å­ï¼Œä½†ä¼šæ§åˆ¶å°è­¦å‘Šï¼Œä½†å¦‚æœåœ¨å°±é’©å­é‡Œå‰é¢åŠ ä¸Šï¼šUNSAFE_ å°±å¯ä»¥å¹²æ‰è­¦å‘Šäº†
- åªæœ‰ä¸‰ä¸ªå¸¦willçš„é’©å­ï¼Œæ‰éœ€è¦åŠ  UNSAFE_ï¼Œé™¤äº†componentWillUnmountä¸éœ€è¦ã€‚
- ä¸ºä»€ä¹ˆåŠ UNSAFE_å‘¢ï¼Ÿè¿™äº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ç»å¸¸è¢«è¯¯è§£å’Œæ»¥ç”¨ï¼›æ­¤å¤–ï¼Œæˆ‘ä»¬é¢„è®¡ï¼Œåœ¨å¼‚æ­¥æ¸²æŸ“ä¸­ï¼Œå®ƒä»¬æ½œåœ¨çš„è¯¯ç”¨é—®é¢˜å¯èƒ½æ›´å¤§ã€‚æˆ‘ä»¬å°†åœ¨å³å°†å‘å¸ƒçš„ç‰ˆæœ¬ä¸­ä¸ºè¿™äº›ç”Ÿå‘½å‘¨æœŸæ·»åŠ  â€œUNSAFE_â€ å‰ç¼€ã€‚ï¼ˆ**è¿™é‡Œçš„ â€œunsafeâ€ ä¸æ˜¯æŒ‡å®‰å…¨æ€§ï¼Œè€Œæ˜¯è¡¨ç¤ºä½¿ç”¨è¿™äº›ç”Ÿå‘½å‘¨æœŸçš„ä»£ç åœ¨ React çš„æœªæ¥ç‰ˆæœ¬ä¸­æ›´æœ‰å¯èƒ½å‡ºç° bugï¼Œå°¤å…¶æ˜¯åœ¨å¯ç”¨å¼‚æ­¥æ¸²æŸ“ä¹‹åã€‚**ï¼‰[ä¸ºä»€ä¹ˆåŠ UNSAFE_](https://zh-hans.reactjs.org/blog/2018/03/27/update-on-async-rendering.html)

æŒ‚è½½æ—¶ï¼š
1. constructor
2. getDerivedStateFromPropsï¼Œè€Œä¸”è¿™ä¸ªé’©å­éœ€è¦æ·»åŠ staticï¼Œæ·»åŠ åˆ°ç±»ä¸Šã€‚è¿˜å¿…é¡»è¿”å›nullæˆ–çŠ¶æ€å¯¹è±¡ï¼ˆä¼šå½±å“åç»­æ¸²æŸ“ï¼Œä¸»è¦ç”¨äºstateçš„çŠ¶æ€åç»­å®Œå…¨å–å†³äºpropsï¼Œæå°‘ç”¨ï¼‰
3. render
4. componentDidMount

æ›´æ–°æ—¶ï¼š
1. getDerivedStateFromProps
2. shouldComponentUpdate
3. render
4. getSnapshotBeforeUpdateï¼Œéœ€è¦è¿”å›å¿«ç…§(ä»»ä½•å€¼éƒ½è¡Œ)æˆ–nullï¼Œ
5. componentDidUpdateï¼Œæœ‰ä¸¤ä¸ªå‚æ•°ï¼ŒprePropså’ŒpreStateï¼Œæ–°çš„ getSnapshotBeforeUpdate ç”Ÿå‘½å‘¨æœŸæ–¹æ³•åœ¨æ›´æ–°ä¹‹å‰ï¼ˆå¦‚ï¼šæ›´æ–° DOM ä¹‹å‰ï¼‰è¢«è°ƒç”¨ã€‚æ­¤ç”Ÿå‘½å‘¨æœŸçš„è¿”å›å€¼å°†ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™ componentDidUpdateã€‚ï¼ˆé€šå¸¸ä¸éœ€è¦ï¼Œä½†åœ¨é‡æ–°æ¸²æŸ“è¿‡ç¨‹ä¸­æ‰‹åŠ¨ä¿ç•™æ»šåŠ¨ä½ç½®ç­‰æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ã€‚ï¼‰

å¸è½½æ—¶ï¼š
1. componentWillUnmount

æ€»ç»“ï¼š
- å³å°†åºŸå¼ƒä¸‰ä¸ªé’©å­
- ä¸¤ä¸ªæ–°å¢çš„é’©å­ï¼ˆå…¶å®åç»­å‡ ä¹ä¸ç”¨ï¼‰

## reactå¸¸è§é—®é¢˜é›†

### reactäº‹ä»¶æœºåˆ¶

Reactå¹¶ä¸æ˜¯å°†clickäº‹ä»¶ç»‘å®šåˆ°äº†divçš„çœŸå®DOMä¸Šï¼Œè€Œæ˜¯åœ¨documentå¤„ç›‘å¬äº†æ‰€æœ‰çš„äº‹ä»¶ï¼Œå½“äº‹ä»¶å‘ç”Ÿå¹¶ä¸”å†’æ³¡åˆ°documentå¤„çš„æ—¶å€™ï¼ŒReactå°†äº‹ä»¶å†…å®¹å°è£…å¹¶äº¤ç”±çœŸæ­£çš„å¤„ç†å‡½æ•°è¿è¡Œã€‚è¿™æ ·çš„æ–¹å¼ä¸ä»…ä»…å‡å°‘äº†å†…å­˜çš„æ¶ˆè€—ï¼Œè¿˜èƒ½åœ¨ç»„ä»¶æŒ‚åœ¨é”€æ¯æ—¶ç»Ÿä¸€è®¢é˜…å’Œç§»é™¤äº‹ä»¶ã€‚

å®ç°åˆæˆäº‹ä»¶çš„ç›®çš„å¦‚ä¸‹ï¼š

- åˆæˆäº‹ä»¶é¦–å…ˆæŠ¹å¹³äº†æµè§ˆå™¨ä¹‹é—´çš„å…¼å®¹é—®é¢˜ï¼Œå¦å¤–è¿™æ˜¯ä¸€ä¸ªè·¨æµè§ˆå™¨åŸç”Ÿäº‹ä»¶åŒ…è£…å™¨ï¼Œèµ‹äºˆäº†è·¨æµè§ˆå™¨å¼€å‘çš„èƒ½åŠ›ï¼›
- å¯¹äºåŸç”Ÿæµè§ˆå™¨äº‹ä»¶æ¥è¯´ï¼Œæµè§ˆå™¨ä¼šç»™ç›‘å¬å™¨åˆ›å»ºä¸€ä¸ªäº‹ä»¶å¯¹è±¡ã€‚å¦‚æœä½ æœ‰å¾ˆå¤šçš„äº‹ä»¶ç›‘å¬ï¼Œé‚£ä¹ˆå°±éœ€è¦åˆ†é…å¾ˆå¤šçš„äº‹ä»¶å¯¹è±¡ï¼Œé€ æˆé«˜é¢çš„å†…å­˜åˆ†é…é—®é¢˜ã€‚ä½†æ˜¯å¯¹äºåˆæˆäº‹ä»¶æ¥è¯´ï¼Œæœ‰ä¸€ä¸ªäº‹ä»¶æ± ä¸“é—¨æ¥ç®¡ç†å®ƒä»¬çš„åˆ›å»ºå’Œé”€æ¯ï¼Œå½“äº‹ä»¶éœ€è¦è¢«ä½¿ç”¨æ—¶ï¼Œå°±ä¼šä»æ± å­ä¸­å¤ç”¨å¯¹è±¡ï¼Œäº‹ä»¶å›è°ƒç»“æŸåï¼Œå°±ä¼šé”€æ¯äº‹ä»¶å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œä»è€Œä¾¿äºä¸‹æ¬¡å¤ç”¨äº‹ä»¶å¯¹è±¡ã€‚
  
### Reactçš„äº‹ä»¶å’Œæ™®é€šçš„HTMLäº‹ä»¶æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ

åŒºåˆ«ï¼š
- äº‹ä»¶åç§°ä¸åŒï¼ŒåŸç”Ÿæ˜¯å…¨å°å†™ï¼Œè€Œreactçš„æ˜¯é©¼å³°
- reactçš„äº‹ä»¶ä¸èƒ½ä½¿ç”¨return falseé˜»æ­¢æµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºã€‚å¿…é¡»ä½¿ç”¨evt.preventDefault()
- å¯¹äºäº‹ä»¶å‡½æ•°å¤„ç†è¯­æ³•ï¼ŒåŸç”Ÿäº‹ä»¶ä¸ºå­—ç¬¦ä¸²ï¼Œreact äº‹ä»¶ä¸ºå‡½æ•°ï¼›

åˆæˆäº‹ä»¶æ˜¯reactæ¨¡æ‹ŸåŸç”Ÿdomäº‹ä»¶æ‰€æœ‰èƒ½åŠ›çš„ä¸€ä¸ªäº‹ä»¶å¯¹è±¡ã€‚ä¼˜ç‚¹å¦‚ä¸‹

- å…¼å®¹æ‰€æœ‰æµè§ˆå™¨ï¼Œæ›´å¥½çš„è·¨å¹³å°ï¼›
- å°†äº‹ä»¶ç»Ÿä¸€å­˜æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ï¼Œé¿å…é¢‘ç¹çš„æ–°å¢ä¸åˆ é™¤ï¼ˆåƒåœ¾å›æ”¶ï¼‰ã€‚
- æ–¹ä¾¿ react ç»Ÿä¸€ç®¡ç†å’Œäº‹åŠ¡æœºåˆ¶ã€‚

åŸç”Ÿäº‹ä»¶ä¸åˆæˆäº‹ä»¶æ‰§è¡Œé¡ºåºï¼ŒåŸç”Ÿå…ˆæ‰§è¡Œï¼Œåˆæˆäº‹ä»¶ä¼šå†’æ³¡ç»‘å®šåˆ° document ä¸Šï¼Œæ‰€ä»¥å°½é‡é¿å…åŸç”Ÿäº‹ä»¶ä¸åˆæˆäº‹ä»¶æ··ç”¨ï¼Œå¦‚æœåŸç”Ÿäº‹ä»¶é˜»æ­¢å†’æ³¡ï¼Œå¯èƒ½ä¼šå¯¼è‡´åˆæˆäº‹ä»¶ä¸æ‰§è¡Œï¼Œå› ä¸ºéœ€è¦å†’æ³¡åˆ°document ä¸Šåˆæˆäº‹ä»¶æ‰ä¼šæ‰§è¡Œã€‚

## mobx-react

reactæœ‰å¾ˆå¤šçŠ¶æ€ç®¡ç†çš„ç»„ä»¶ï¼Œæ¯”å¦‚Reduxï¼ŒMobxï¼ŒJumpsuitï¼ŒAlt.jsç­‰ã€‚

éƒ½æ”¯æŒå°†storeä¸Reactç»„ä»¶è¿æ¥ï¼Œå¦‚react-reduxï¼Œmobx-reactï¼›

Mobxå’ŒReduxéƒ½æ˜¯JavaScriptåº”ç”¨çŠ¶æ€ç®¡ç†åº“ï¼Œéƒ½é€‚ç”¨äºReactï¼ŒAngularï¼ŒVueJsç­‰æ¡†æ¶æˆ–åº“ï¼Œè€Œä¸æ˜¯å±€é™äºæŸä¸€ç‰¹å®šUIåº“ã€‚

ä½†reduxå†™èµ·æ¥è¿˜æ˜¯ä¸å¦‚mobxç®€å•æ˜äº†ã€‚

ä½¿ç”¨Reduxå’ŒReactåº”ç”¨è¿æ¥æ—¶ï¼Œéœ€è¦ä½¿ç”¨react-reduxæä¾›çš„Providerå’Œconnectï¼ˆè¿™é‡Œä¹Ÿèƒ½ï¼‰

1. Providerï¼šè´Ÿè´£å°†Storeæ³¨å…¥Reactåº”ç”¨ï¼›
2. connectï¼šè´Ÿè´£å°†store stateæ³¨å…¥å®¹å™¨ç»„ä»¶ï¼Œå¹¶é€‰æ‹©ç‰¹å®šçŠ¶æ€ä½œä¸ºå®¹å™¨ç»„ä»¶propsä¼ é€’ï¼›

å¯¹äºMobxè€Œè¨€ï¼ŒåŒæ ·éœ€è¦ä¸¤ä¸ªæ­¥éª¤ï¼š

1. Providerï¼šä½¿ç”¨mobx-reactæä¾›çš„Providerå°†æ‰€æœ‰storesæ³¨å…¥åº”ç”¨ï¼›
2. ä½¿ç”¨injectå°†ç‰¹å®šstoreæ³¨å…¥æŸç»„ä»¶ï¼Œstoreå¯ä»¥ä¼ é€’çŠ¶æ€æˆ–actionï¼›ç„¶åä½¿ç”¨observerä¿è¯ç»„ä»¶èƒ½å“åº”storeä¸­çš„å¯è§‚å¯Ÿå¯¹è±¡ï¼ˆobservableï¼‰å˜æ›´ï¼Œå³storeæ›´æ–°ï¼Œç»„ä»¶è§†å›¾å“åº”å¼æ›´æ–°ã€‚


mobxçš„æµç¨‹å›¾å¦‚ä¸Šï¼Œé€šå¸¸æ˜¯ï¼šè§¦å‘actionï¼Œåœ¨actionä¸­ä¿®æ”¹stateï¼Œé€šè¿‡computedæ‹¿åˆ°stateçš„è®¡ç®—å€¼ï¼Œè‡ªåŠ¨è§¦å‘å¯¹åº”çš„reactionsï¼Œè¿™é‡ŒåŒ…å«autorunï¼Œæ¸²æŸ“è§†å›¾ç­‰ã€‚æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼šç›¸å¯¹äºreactæ¥è¯´ï¼Œmobxæ²¡æœ‰ä¸€ä¸ªå…¨å±€çš„çŠ¶æ€æ ‘ï¼ŒçŠ¶æ€åˆ†æ•£åœ¨å„ä¸ªç‹¬ç«‹çš„storeä¸­ã€‚mobxçš„å·¥ä½œåŸç†éå¸¸ç®€å•ï¼Œä½¿ç”¨Object.definePropertyæ¥æ‹¦æˆªå¯¹æ•°æ®çš„è®¿é—®ï¼Œä¸€æ—¦å€¼å‘ç”Ÿå˜åŒ–ï¼Œå°†ä¼šè°ƒç”¨reactçš„renderæ–¹æ³•æ¥å®ç°é‡æ–°æ¸²æŸ“è§†å›¾çš„åŠŸèƒ½æˆ–è€…è§¦å‘autorunç­‰ã€‚

Mobxçš„å®ç°æ€æƒ³å’ŒVueå‡ ä¹ä¸€æ ·ï¼Œæ‰€ä»¥å…¶ä¼˜ç‚¹è·ŸVueä¹Ÿå·®ä¸å¤šï¼šé€šè¿‡ç›‘å¬æ•°æ®ï¼ˆå¯¹è±¡ã€æ•°ç»„ï¼‰çš„å±æ€§å˜åŒ–ï¼Œå¯ä»¥é€šè¿‡ç›´æ¥åœ¨æ•°æ®ä¸Šæ›´æ”¹å°±èƒ½è§¦å‘UIçš„æ¸²æŸ“ï¼Œä»è€Œåšåˆ°MVVMã€å“åº”å¼ã€ä¸Šæ‰‹æˆæœ¬ä½ã€å¼€å‘æ•ˆç‡é«˜ï¼Œåœ¨æ•°æ®ç®¡ç†ä¸Šéœ€è¦å†è¯¦ç»†é˜è¿°ä¸‹å…¶åŒºåˆ«ã€‚

Reduxæ˜¯å»ºè®®å…¨å±€å”¯ä¸€Storeçš„ï¼Œå¤šä¸ªReducersä¹Ÿä¼šåœ¨ä¼ é€’ç»™react-reduxä¹‹å‰è¢«åˆå¹¶æˆä¸€ä¸ªroot reducerï¼Œä»»ä½•æ•°æ®çš„æ›´æ”¹ï¼ˆé€šè¿‡Reducerï¼‰éƒ½ä¼šé€šè¿‡è¿™ä¸€ä¸ªstoreæ¥è§¦å‘æ•´ä¸ªUIæ ‘çš„é‡æ–°æ¸²æŸ“ï¼Œå¦‚æœä¸åšä»»ä½•çš„æ€§èƒ½ä¼˜åŒ–ï¼ˆpureRenderç­‰ï¼‰ï¼Œå°±ç®—VD(Virtual Dom)æœ‰äº†å†é«˜çš„æ•ˆç‡æå‡ï¼Œå½“é¡µé¢æ•°æ®é‡ã€DOMæ•°é‡å¤§äº†ï¼Œæ€§èƒ½æ¶ˆè€—ä¹Ÿæ˜¯éå¸¸å¤§çš„ã€‚å¦å¤–ä¸€ç‚¹ï¼ŒReduxå®ç°çš„å¯¹æ•°æ®çš„ç®¡ç†æ˜¯pullæ–¹å¼çš„ï¼Œå°±æ˜¯è¯´å…¶åªèƒ½ç­‰å¾…åº”ç”¨æ´¾å‘æŸä¸ªè¡Œä¸ºï¼ˆActionï¼‰ï¼Œç„¶åé‡æ–°è§¦å‘UIçš„æ¸²æŸ“ï¼Œè€Œåšä¸åˆ°å¯¹è¡Œä¸ºçš„å¯é¢„æœŸï¼›Mobxåˆ™ä¸ä¸€æ ·ï¼Œä»–æ˜¯åŸºäºç›‘å¬æ•°æ®çš„å±æ€§å˜åŒ–æ¥å®ç°çš„ï¼Œè€Œä¸”æ˜¯å¤šstoreçš„ï¼Œå¯¹äºä»»ä½•çš„æ•°æ®å˜æ›´éƒ½æ˜¯ç¬¬ä¸€æ—¶é—´çŸ¥é“çš„ï¼Œæ‰€ä»¥å…¶å®ç°æ–¹å¼æ˜¯åŸºäºpushçš„ç›‘å¬è®¢é˜…æ¨¡å¼è€Œå®ç°ï¼Œè¿™æ ·ï¼Œä»–å°±å¯ä»¥åšåˆ°å¯¹æ•°æ®çš„å¯é¢„æµ‹ä»¥åŠç»†ç²’åº¦çš„æ§åˆ¶ï¼Œç”šè‡³å¯ä»¥é€šè¿‡ä¿®æ”¹Reactç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„æ–¹å¼æ¥å‡å°‘æ€§èƒ½çš„æ¶ˆè€—ï¼Œè€Œæ— éœ€ä½¿ç”¨è€…å¯¹è¿™äº›ç»†èŠ‚å…³å¿ƒã€‚å½“ç„¶è¿™ä¸€åˆ‡è‚¯å®šæ˜¯æœ‰äº†mobxå¯¹ç»„ä»¶åšobserveæ“ä½œæ‰èƒ½å®ç°çš„ï¼Œæ‰€ä»¥ä¹Ÿå°±æœ‰äº†observerç”¨çš„è¶Šå¤šï¼Œåº”ç”¨æ€§èƒ½è¶Šé«˜çš„è¯´æ³•ã€‚


### observer / observable

- observableæ˜¯å°†æ•°æ®æ”¹ä¸ºå“åº”å¼ï¼Œè¿™æ ·çš„è¯ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±å¯ä»¥å°†@observerç›‘æµ‹çš„ç»„ä»¶è‡ªåŠ¨æ›´æ–°ã€‚
- è€Œä¸”æ­£å¸¸çš„è®©reacté¡µé¢æ›´æ–°éœ€è¦ä½¿ç”¨this.setStateæ‰å¯ä»¥ï¼Œä½¿ç”¨è£…é¥°å™¨åï¼Œåªéœ€@observable xxx = 1; ç„¶å@observer æ•´ä¸ªç»„ä»¶å³å¯ã€‚

- observer å‡½æ•°/è£…é¥°å™¨å¯ä»¥ç”¨æ¥å°† React ç»„ä»¶è½¬å˜æˆå“åº”å¼ç»„ä»¶ã€‚ å®ƒç”¨ mobx.autorun åŒ…è£…äº†ç»„ä»¶çš„ render å‡½æ•°ä»¥ç¡®ä¿ä»»ä½•ç»„ä»¶æ¸²æŸ“ä¸­ä½¿ç”¨çš„æ•°æ®å˜åŒ–æ—¶éƒ½å¯ä»¥å¼ºåˆ¶åˆ·æ–°ç»„ä»¶ã€‚ observer æ˜¯ç”±å•ç‹¬çš„ mobx-react åŒ…æä¾›çš„ã€‚
- `import { useLocalObservable, Observer } from 'mobx-react'`ï¼Œå½“ç„¶é™¤äº†å‡½æ•°observerï¼Œè¿˜æœ‰ç»„ä»¶Observer

### inject/provide

- ä¸‹é¢çš„å«ä¹‰æ˜¯ï¼Œä»æ ¹ç»„ä»¶providerçš„storeæ‹¿å‡ºè¿™ä¸‰ä¸ªå¯¹è±¡ï¼Œç„¶åä½œä¸ºpropsä¼ ç»™FormSearchã€‚
```js
export default inject(
  'commonStore',
  'supplierLevelStore',
  'afterClassifyNewStore'
)(observer(FormSearch));
```

- Provideræ˜¯mobx-reactçš„ç»„ä»¶ï¼Œç„¶åå°†storeé‡Œæ‰€æœ‰çš„å¯¼å‡ºéƒ½ä¼ ç»™å­ç»„ä»¶
```js
<Provider {...stores}>
	<ConfigProvider locale={zhCN}>
		<HashRouter>
			<MyRouter />
		</HashRouter>
	</ConfigProvider>
</Provider>,
```

- ConfigProvideræ˜¯antdé…ç½®è¯­è¨€åŒ…çš„ã€‚

### @action vs @action.bound

action è£…é¥°å™¨/å‡½æ•°éµå¾ª javascript ä¸­æ ‡å‡†çš„ç»‘å®šè§„åˆ™ã€‚ ä½†æ˜¯ï¼Œaction.bound å¯ä»¥ç”¨æ¥è‡ªåŠ¨åœ°å°†åŠ¨ä½œç»‘å®šåˆ°ç›®æ ‡å¯¹è±¡ã€‚ æ³¨æ„ï¼Œä¸ action ä¸åŒçš„æ˜¯ï¼Œ(@)action.bound ä¸éœ€è¦ä¸€ä¸ªnameå‚æ•°ï¼Œåç§°å°†å§‹ç»ˆåŸºäºåŠ¨ä½œç»‘å®šçš„å±æ€§ã€‚

```js
class Ticker {
  @observable tick = 0

  @action.bound
  increment() {
      this.tick++ // 'this' æ°¸è¿œéƒ½æ˜¯æ­£ç¡®çš„
  }

  // ç­‰ä»·äºä¸‹é¢çš„
  @action
  increment = () => {

  }
}

const ticker = new Ticker()
setInterval(ticker.increment, 1000)
```

æ³¨æ„: **action.bound ä¸è¦å’Œç®­å¤´å‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼›ç®­å¤´å‡½æ•°å·²ç»æ˜¯ç»‘å®šè¿‡çš„å¹¶ä¸”ä¸èƒ½é‡æ–°ç»‘å®šã€‚**


### è£…é¥°å™¨

## reactå…¨å®¶æ¡¶è·¯çº¿

å› ä¸ºä½ æ˜¯æƒ³å­¦Reactï¼Œæ‰€ä»¥æˆ‘ç»™ä½ è”ç³»ä¸€ä¸ªæ•´ä½“çš„è·¯çº¿ï¼Œä¹Ÿç›¸å½“äºReactå…¨å®¶æ¡¶ã€‚
- é¦–å…ˆReactæ¡†æ¶åŸºç¡€ï¼Œç›´æ¥æ ¹æ®å®˜æ–¹æ–‡æ¡£å­¦ä¹ æœ€æ–°çš„ç‰ˆæœ¬ã€‚
- ç„¶åReact routerï¼Œä¹Ÿå°±æ˜¯è·¯ç”±ï¼Œå­¦ä¹ æœ€æ–°çš„v4ç‰ˆæœ¬ã€‚
- å½“ä½ éœ€è¦è¿›è¡Œæ•°æ®ç®¡ç†æ—¶ï¼Œå°±å¯ä»¥å­¦ä¹ reduxæˆ–è€…mobxï¼Œä¸è¿‡å¤§å¤šæ•°å…¬å¸éƒ½æ˜¯ä½¿ç”¨reduxã€‚
- å½“ä½ éœ€è¦è¿›è¡Œå¤æ‚çš„å¼‚æ­¥æ“ä½œæˆ–è€…è¿›è¡Œå¼‚æ­¥actionæ—¶ï¼Œå°±éœ€è¦ç”¨åˆ°rxjsé…åˆredux-observableæˆ–è€…redux-sagaã€‚
- å½“ç„¶ï¼Œä½ è¿˜éœ€è¦æŒæ¡ä¸€å¥—UIç»„ä»¶åº“çš„ç”¨æ³•ã€‚æ¨èèš‚èšé‡‘æœçš„ant designã€‚

- æˆ‘æ˜¯å‰å¤©åˆšæ¥çš„æ–°åŒå­¦ï¼Œæ˜¨å¤©æŠŠé¡¹ç›®å’Œæƒé™è·‘èµ·æ¥ï¼Œç„¶åè¯„å®¡ä¸€ä¸ªéœ€æ±‚ï¼Œçœ‹ä¸‹reactç›¸å…³çš„ä¸œè¥¿
- ä»Šå¤©ä¸»è¦ç»“åˆé¡¹ç›®ï¼Œ

## reactã€react-dom
- react
- react-dom

Reactåœ¨v0.14ä¹‹å‰æ˜¯æ²¡æœ‰react-domçš„ï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½åŒ…å«åœ¨reacté‡Œã€‚ä»v0.14(2015-10)å¼€å§‹ï¼Œreactæ‰è¢«æ‹†åˆ†æˆreactå’Œreact-domã€‚ä¸ºä»€ä¹ˆè¦æŠŠreactå’Œreact-domåˆ†å¼€å‘¢ï¼Ÿå› ä¸ºæœ‰äº†react-nativeã€‚reactåªåŒ…å«äº†Webå’ŒMobileé€šç”¨çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œè´Ÿè´£Domæ“ä½œçš„åˆ†åˆ°react-domä¸­ï¼Œè´Ÿè´£Mobileçš„åŒ…å«åœ¨react-nativeä¸­ã€‚

## react-routerã€react-router-dom
- react-router
- react-router-dom

react-router:å…·æœ‰switch route routerç­‰æ–¹æ³• ï¼Œä½†ç„¡æ³•é€éæ“ä½œDOMä¾†è·³è½‰

react-router-dom :æ˜¯ä»¥react-routerç‚ºæ ¸å¿ƒï¼Œæä¾›BrowserRouter ã€Route Linkç­‰ç­‰ ï¼Œå¯ä»¥ç”¨æ“ä½œDOMçš„æ–¹å¼ä¾†æ”¹è®Špath

æ‰€ä»¥å¯¦éš›ä¸Šæˆ‘å€‘åªè¦å¼•å…¥react-router-domå³å¯ä¾†å¯¦ä½œreact-routerçš„åŠŸèƒ½

```
"react-router-dom": "^5.1.2",
```

exacté»˜è®¤ä¸ºfalseï¼Œå¦‚æœä¸ºtrueæ—¶ï¼Œéœ€è¦å’Œè·¯ç”±ç›¸åŒæ—¶æ‰èƒ½åŒ¹é…ï¼Œä½†æ˜¯å¦‚æœæœ‰æ–œæ ä¹Ÿæ˜¯å¯ä»¥åŒ¹é…ä¸Šçš„ã€‚ å¦‚æœåœ¨çˆ¶è·¯ç”±ä¸­åŠ äº†exactï¼Œæ˜¯ä¸èƒ½åŒ¹é…å­è·¯ç”±çš„,å»ºè®®åœ¨å­è·¯ç”±ä¸­åŠ exact

stricté»˜è®¤ä¸ºfalseï¼Œå¦‚æœä¸ºtrueæ—¶ï¼Œè·¯ç”±åé¢æœ‰æ–œæ è€Œurlä¸­æ²¡æœ‰æ–œæ ï¼Œæ˜¯ä¸åŒ¹é…çš„

## mobxã€

å…¶å®@observable key = value; åªæ˜¯extendObservable(this, { key: value })çš„è¯­æ³•ç³–ã€‚å› æ­¤åœ¨ES5ç¯å¢ƒä¸‹ä½ ä¹Ÿèƒ½ä½¿ç”¨

## ä¸€äº›ç‚¹

- å®‰è£…pretterå³å¯æ ¼å¼åŒ– vscodeé‡Œçš„ä»£ç ã€‚

## ä¸€ã€todoListæ¡ˆä¾‹ç›¸å…³çŸ¥è¯†ç‚¹
		1.æ‹†åˆ†ç»„ä»¶ã€å®ç°é™æ€ç»„ä»¶ï¼Œæ³¨æ„ï¼šclassNameã€styleçš„å†™æ³•
		2.åŠ¨æ€åˆå§‹åŒ–åˆ—è¡¨ï¼Œå¦‚ä½•ç¡®å®šå°†æ•°æ®æ”¾åœ¨å“ªä¸ªç»„ä»¶çš„stateä¸­ï¼Ÿ
					â€”â€”æŸä¸ªç»„ä»¶ä½¿ç”¨ï¼šæ”¾åœ¨å…¶è‡ªèº«çš„stateä¸­
					â€”â€”æŸäº›ç»„ä»¶ä½¿ç”¨ï¼šæ”¾åœ¨ä»–ä»¬å…±åŒçš„çˆ¶ç»„ä»¶stateä¸­ï¼ˆå®˜æ–¹ç§°æ­¤æ“ä½œä¸ºï¼šçŠ¶æ€æå‡ï¼‰
		3.å…³äºçˆ¶å­ä¹‹é—´é€šä¿¡ï¼š
				1.ã€çˆ¶ç»„ä»¶ã€‘ç»™ã€å­ç»„ä»¶ã€‘ä¼ é€’æ•°æ®ï¼šé€šè¿‡propsä¼ é€’
				2.ã€å­ç»„ä»¶ã€‘ç»™ã€çˆ¶ç»„ä»¶ã€‘ä¼ é€’æ•°æ®ï¼šé€šè¿‡propsä¼ é€’ï¼Œè¦æ±‚çˆ¶æå‰ç»™å­ä¼ é€’ä¸€ä¸ªå‡½æ•°
		4.æ³¨æ„defaultChecked å’Œ checkedçš„åŒºåˆ«ï¼Œç±»ä¼¼çš„è¿˜æœ‰ï¼šdefaultValue å’Œ value
		5.çŠ¶æ€åœ¨å“ªé‡Œï¼Œæ“ä½œçŠ¶æ€çš„æ–¹æ³•å°±åœ¨å“ªé‡Œ

## äºŒã€githubæœç´¢æ¡ˆä¾‹ç›¸å…³çŸ¥è¯†ç‚¹
		1.è®¾è®¡çŠ¶æ€æ—¶è¦è€ƒè™‘å…¨é¢ï¼Œä¾‹å¦‚å¸¦æœ‰ç½‘ç»œè¯·æ±‚çš„ç»„ä»¶ï¼Œè¦è€ƒè™‘è¯·æ±‚å¤±è´¥æ€ä¹ˆåŠã€‚
		2.ES6å°çŸ¥è¯†ç‚¹ï¼šè§£æ„èµ‹å€¼+é‡å‘½å
					let obj = {a:{b:1}}
					const {a} = obj; //ä¼ ç»Ÿè§£æ„èµ‹å€¼
					const {a:{b}} = obj; //è¿ç»­è§£æ„èµ‹å€¼
					const {a:{b:value}} = obj; //è¿ç»­è§£æ„èµ‹å€¼+é‡å‘½å
		3.æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒæœºåˆ¶
					1.å…ˆè®¢é˜…ï¼Œå†å‘å¸ƒï¼ˆç†è§£ï¼šæœ‰ä¸€ç§éš”ç©ºå¯¹è¯çš„æ„Ÿè§‰ï¼‰
					2.é€‚ç”¨äºä»»æ„ç»„ä»¶é—´é€šä¿¡
					3.è¦åœ¨ç»„ä»¶çš„componentWillUnmountä¸­å–æ¶ˆè®¢é˜…
		4.fetchå‘é€è¯·æ±‚ï¼ˆå…³æ³¨åˆ†ç¦»çš„è®¾è®¡æ€æƒ³ï¼‰
					try {
						const response= await fetch(`/api1/search/users2?q=${keyWord}`)
						const data = await response.json()
						console.log(data);
					} catch (error) {
						console.log('è¯·æ±‚å‡ºé”™',error);
					}
				

## ä¸‰ã€è·¯ç”±çš„åŸºæœ¬ä½¿ç”¨
			1.æ˜ç¡®å¥½ç•Œé¢ä¸­çš„å¯¼èˆªåŒºã€å±•ç¤ºåŒº
			2.å¯¼èˆªåŒºçš„aæ ‡ç­¾æ”¹ä¸ºLinkæ ‡ç­¾
						<Link to="/xxxxx">Demo</Link>
			3.å±•ç¤ºåŒºå†™Routeæ ‡ç­¾è¿›è¡Œè·¯å¾„çš„åŒ¹é…
						<Route path='/xxxx' component={Demo}/>
			4.<App>çš„æœ€å¤–ä¾§åŒ…è£¹äº†ä¸€ä¸ª<BrowserRouter>æˆ–<HashRouter>

## å››ã€è·¯ç”±ç»„ä»¶ä¸ä¸€èˆ¬ç»„ä»¶
			1.å†™æ³•ä¸åŒï¼š
						ä¸€èˆ¬ç»„ä»¶ï¼š<Demo/>
						è·¯ç”±ç»„ä»¶ï¼š<Route path="/demo" component={Demo}/>
			2.å­˜æ”¾ä½ç½®ä¸åŒï¼š
						ä¸€èˆ¬ç»„ä»¶ï¼šcomponents
						è·¯ç”±ç»„ä»¶ï¼špages
			3.æ¥æ”¶åˆ°çš„propsä¸åŒï¼š
						ä¸€èˆ¬ç»„ä»¶ï¼šå†™ç»„ä»¶æ ‡ç­¾æ—¶ä¼ é€’äº†ä»€ä¹ˆï¼Œå°±èƒ½æ”¶åˆ°ä»€ä¹ˆ
						è·¯ç”±ç»„ä»¶ï¼šæ¥æ”¶åˆ°ä¸‰ä¸ªå›ºå®šçš„å±æ€§
											history:
														go: Æ’ go(n)
														goBack: Æ’ goBack()
														goForward: Æ’ goForward()
														push: Æ’ push(path, state)
														replace: Æ’ replace(path, state)
											location:
														pathname: "/about"
														search: ""
														state: undefined
											match:
														params: {}
														path: "/about"
														url: "/about"

## äº”ã€NavLinkä¸å°è£…NavLink
				1.NavLinkå¯ä»¥å®ç°è·¯ç”±é“¾æ¥çš„é«˜äº®ï¼Œé€šè¿‡activeClassNameæŒ‡å®šæ ·å¼å

## å…­ã€Switchçš„ä½¿ç”¨
				1.é€šå¸¸æƒ…å†µä¸‹ï¼Œpathå’Œcomponentæ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚
				2.Switchå¯ä»¥æé«˜è·¯ç”±åŒ¹é…æ•ˆç‡(å•ä¸€åŒ¹é…)ã€‚

## ä¸ƒã€è§£å†³å¤šçº§è·¯å¾„åˆ·æ–°é¡µé¢æ ·å¼ä¸¢å¤±çš„é—®é¢˜
				1.public/index.html ä¸­ å¼•å…¥æ ·å¼æ—¶ä¸å†™ ./ å†™ / ï¼ˆå¸¸ç”¨ï¼‰
				2.public/index.html ä¸­ å¼•å…¥æ ·å¼æ—¶ä¸å†™ ./ å†™ %PUBLIC_URL% ï¼ˆå¸¸ç”¨ï¼‰
				3.ä½¿ç”¨HashRouter

## å…«ã€è·¯ç”±çš„ä¸¥æ ¼åŒ¹é…ä¸æ¨¡ç³ŠåŒ¹é…
				1.é»˜è®¤ä½¿ç”¨çš„æ˜¯æ¨¡ç³ŠåŒ¹é…ï¼ˆç®€å•è®°ï¼šã€è¾“å…¥çš„è·¯å¾„ã€‘å¿…é¡»åŒ…å«è¦ã€åŒ¹é…çš„è·¯å¾„ã€‘ï¼Œä¸”é¡ºåºè¦ä¸€è‡´ï¼‰
				2.å¼€å¯ä¸¥æ ¼åŒ¹é…ï¼š<Route exact={true} path="/about" component={About}/>
				3.ä¸¥æ ¼åŒ¹é…ä¸è¦éšä¾¿å¼€å¯ï¼Œéœ€è¦å†å¼€ï¼Œæœ‰äº›æ—¶å€™å¼€å¯ä¼šå¯¼è‡´æ— æ³•ç»§ç»­åŒ¹é…äºŒçº§è·¯ç”±

## ä¹ã€Redirectçš„ä½¿ç”¨	
				1.ä¸€èˆ¬å†™åœ¨æ‰€æœ‰è·¯ç”±æ³¨å†Œçš„æœ€ä¸‹æ–¹ï¼Œå½“æ‰€æœ‰è·¯ç”±éƒ½æ— æ³•åŒ¹é…æ—¶ï¼Œè·³è½¬åˆ°RedirectæŒ‡å®šçš„è·¯ç”±
				2.å…·ä½“ç¼–ç ï¼š
						<Switch>
							<Route path="/about" component={About}/>
							<Route path="/home" component={Home}/>
							<Redirect to="/about"/>
						</Switch>

## åã€åµŒå¥—è·¯ç”±
				1.æ³¨å†Œå­è·¯ç”±æ—¶è¦å†™ä¸Šçˆ¶è·¯ç”±çš„pathå€¼
				2.è·¯ç”±çš„åŒ¹é…æ˜¯æŒ‰ç…§æ³¨å†Œè·¯ç”±çš„é¡ºåºè¿›è¡Œçš„

## åä¸€ã€å‘è·¯ç”±ç»„ä»¶ä¼ é€’å‚æ•°
				1.paramså‚æ•°
							è·¯ç”±é“¾æ¥(æºå¸¦å‚æ•°)ï¼š<Link to='/demo/test/tom/18'}>è¯¦æƒ…</Link>
							æ³¨å†Œè·¯ç”±(å£°æ˜æ¥æ”¶)ï¼š<Route path="/demo/test/:name/:age" component={Test}/>
							æ¥æ”¶å‚æ•°ï¼šthis.props.match.params
				2.searchå‚æ•°
							è·¯ç”±é“¾æ¥(æºå¸¦å‚æ•°)ï¼š<Link to='/demo/test?name=tom&age=18'}>è¯¦æƒ…</Link>
							æ³¨å†Œè·¯ç”±(æ— éœ€å£°æ˜ï¼Œæ­£å¸¸æ³¨å†Œå³å¯)ï¼š<Route path="/demo/test" component={Test}/>
							æ¥æ”¶å‚æ•°ï¼šthis.props.location.search
							å¤‡æ³¨ï¼šè·å–åˆ°çš„searchæ˜¯urlencodedç¼–ç å­—ç¬¦ä¸²ï¼Œéœ€è¦å€ŸåŠ©querystringè§£æ
				3.stateå‚æ•°
							è·¯ç”±é“¾æ¥(æºå¸¦å‚æ•°)ï¼š<Link to={{pathname:'/demo/test',state:{name:'tom',age:18}}}>è¯¦æƒ…</Link>
							æ³¨å†Œè·¯ç”±(æ— éœ€å£°æ˜ï¼Œæ­£å¸¸æ³¨å†Œå³å¯)ï¼š<Route path="/demo/test" component={Test}/>
							æ¥æ”¶å‚æ•°ï¼šthis.props.location.state
							å¤‡æ³¨ï¼šåˆ·æ–°ä¹Ÿå¯ä»¥ä¿ç•™ä½å‚æ•°
				


## åäºŒã€ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª
					å€ŸåŠ©this.prosp.historyå¯¹è±¡ä¸Šçš„APIå¯¹æ“ä½œè·¯ç”±è·³è½¬ã€å‰è¿›ã€åé€€
							-this.prosp.history.push()
							-this.prosp.history.replace()
							-this.prosp.history.goBack()
							-this.prosp.history.goForward()
							-this.prosp.history.go()

## åä¸‰ã€BrowserRouterä¸HashRouterçš„åŒºåˆ«
			1.åº•å±‚åŸç†ä¸ä¸€æ ·ï¼š
						BrowserRouterä½¿ç”¨çš„æ˜¯H5çš„history APIï¼Œä¸å…¼å®¹IE9åŠä»¥ä¸‹ç‰ˆæœ¬ã€‚
						HashRouterä½¿ç”¨çš„æ˜¯URLçš„å“ˆå¸Œå€¼ã€‚
			2.pathè¡¨ç°å½¢å¼ä¸ä¸€æ ·
						BrowserRouterçš„è·¯å¾„ä¸­æ²¡æœ‰#,ä¾‹å¦‚ï¼šlocalhost:3000/demo/test
						HashRouterçš„è·¯å¾„åŒ…å«#,ä¾‹å¦‚ï¼šlocalhost:3000/#/demo/test
			3.åˆ·æ–°åå¯¹è·¯ç”±stateå‚æ•°çš„å½±å“
						(1).BrowserRouteræ²¡æœ‰ä»»ä½•å½±å“ï¼Œå› ä¸ºstateä¿å­˜åœ¨historyå¯¹è±¡ä¸­ã€‚
						(2).HashRouteråˆ·æ–°åä¼šå¯¼è‡´è·¯ç”±stateå‚æ•°çš„ä¸¢å¤±ï¼ï¼ï¼
			4.å¤‡æ³¨ï¼šHashRouterå¯ä»¥ç”¨äºè§£å†³ä¸€äº›è·¯å¾„é”™è¯¯ç›¸å…³çš„é—®é¢˜ã€‚

## åå››ã€antdçš„æŒ‰éœ€å¼•å…¥+è‡ªå®šä¸»é¢˜
			1.å®‰è£…ä¾èµ–ï¼šyarn add react-app-rewired customize-cra babel-plugin-import less less-loader
			2.ä¿®æ”¹package.json
					....
						"scripts": {
							"start": "react-app-rewired start",
							"build": "react-app-rewired build",
							"test": "react-app-rewired test",
							"eject": "react-scripts eject"
						},
					....
			3.æ ¹ç›®å½•ä¸‹åˆ›å»ºconfig-overrides.js
					//é…ç½®å…·ä½“çš„ä¿®æ”¹è§„åˆ™
					const { override, fixBabelImports,addLessLoader} = require('customize-cra');
					module.exports = override(
						fixBabelImports('import', {
							libraryName: 'antd',
							libraryDirectory: 'es',
							style: true,
						}),
						addLessLoader({
							lessOptions:{
								javascriptEnabled: true,
								modifyVars: { '@primary-color': 'green' },
							}
						}),
					);
				4.å¤‡æ³¨ï¼šä¸ç”¨åœ¨ç»„ä»¶é‡Œäº²è‡ªå¼•å…¥æ ·å¼äº†ï¼Œå³ï¼šimport 'antd/dist/antd.css'åº”è¯¥åˆ æ‰

## 1.æ±‚å’Œæ¡ˆä¾‹_reduxç²¾ç®€ç‰ˆ
		(1).å»é™¤Countç»„ä»¶è‡ªèº«çš„çŠ¶æ€
		(2).srcä¸‹å»ºç«‹:
						-redux
							-store.js
							-count_reducer.js

		(3).store.jsï¼š
					1).å¼•å…¥reduxä¸­çš„createStoreå‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ªstore
					2).createStoreè°ƒç”¨æ—¶è¦ä¼ å…¥ä¸€ä¸ªä¸ºå…¶æœåŠ¡çš„reducer
					3).è®°å¾—æš´éœ²storeå¯¹è±¡

		(4).count_reducer.jsï¼š
					1).reducerçš„æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ï¼špreState,actionï¼Œè¿”å›åŠ å·¥åçš„çŠ¶æ€
					2).reduceræœ‰ä¸¤ä¸ªä½œç”¨ï¼šåˆå§‹åŒ–çŠ¶æ€ï¼ŒåŠ å·¥çŠ¶æ€
					3).reducerè¢«ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ï¼Œæ˜¯storeè‡ªåŠ¨è§¦å‘çš„ï¼Œ
									ä¼ é€’çš„preStateæ˜¯undefined,
									ä¼ é€’çš„actionæ˜¯:{type:'@@REDUX/INIT_a.2.b.4}

		(5).åœ¨index.jsä¸­ç›‘æµ‹storeä¸­çŠ¶æ€çš„æ”¹å˜ï¼Œä¸€æ—¦å‘ç”Ÿæ”¹å˜é‡æ–°æ¸²æŸ“<App/>
				å¤‡æ³¨ï¼šreduxåªè´Ÿè´£ç®¡ç†çŠ¶æ€ï¼Œè‡³äºçŠ¶æ€çš„æ”¹å˜é©±åŠ¨ç€é¡µé¢çš„å±•ç¤ºï¼Œè¦é æˆ‘ä»¬è‡ªå·±å†™ã€‚


## 2.æ±‚å’Œæ¡ˆä¾‹_reduxå®Œæ•´ç‰ˆ
		æ–°å¢æ–‡ä»¶ï¼š
			1.count_action.js ä¸“é—¨ç”¨äºåˆ›å»ºactionå¯¹è±¡
			2.constant.js æ”¾ç½®å®¹æ˜“å†™é”™çš„typeå€¼



## 3.æ±‚å’Œæ¡ˆä¾‹_reduxå¼‚æ­¥actionç‰ˆ
		 (1).æ˜ç¡®ï¼šå»¶è¿Ÿçš„åŠ¨ä½œä¸æƒ³äº¤ç»™ç»„ä»¶è‡ªèº«ï¼Œæƒ³äº¤ç»™action
		 (2).ä½•æ—¶éœ€è¦å¼‚æ­¥actionï¼šæƒ³è¦å¯¹çŠ¶æ€è¿›è¡Œæ“ä½œï¼Œä½†æ˜¯å…·ä½“çš„æ•°æ®é å¼‚æ­¥ä»»åŠ¡è¿”å›ã€‚
		 (3).å…·ä½“ç¼–ç ï¼š
		 			1).yarn add redux-thunkï¼Œå¹¶é…ç½®åœ¨storeä¸­
		 			2).åˆ›å»ºactionçš„å‡½æ•°ä¸å†è¿”å›ä¸€èˆ¬å¯¹è±¡ï¼Œè€Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¸­å†™å¼‚æ­¥ä»»åŠ¡ã€‚
		 			3).å¼‚æ­¥ä»»åŠ¡æœ‰ç»“æœåï¼Œåˆ†å‘ä¸€ä¸ªåŒæ­¥çš„actionå»çœŸæ­£æ“ä½œæ•°æ®ã€‚
		 (4).å¤‡æ³¨ï¼šå¼‚æ­¥actionä¸æ˜¯å¿…é¡»è¦å†™çš„ï¼Œå®Œå…¨å¯ä»¥è‡ªå·±ç­‰å¾…å¼‚æ­¥ä»»åŠ¡çš„ç»“æœäº†å†å»åˆ†å‘åŒæ­¥actionã€‚





## 4.æ±‚å’Œæ¡ˆä¾‹_react-reduxåŸºæœ¬ä½¿ç”¨
			(1).æ˜ç¡®ä¸¤ä¸ªæ¦‚å¿µï¼š
						1).UIç»„ä»¶:ä¸èƒ½ä½¿ç”¨ä»»ä½•reduxçš„apiï¼Œåªè´Ÿè´£é¡µé¢çš„å‘ˆç°ã€äº¤äº’ç­‰ã€‚
						2).å®¹å™¨ç»„ä»¶ï¼šè´Ÿè´£å’Œreduxé€šä¿¡ï¼Œå°†ç»“æœäº¤ç»™UIç»„ä»¶ã€‚
			(2).å¦‚ä½•åˆ›å»ºä¸€ä¸ªå®¹å™¨ç»„ä»¶â€”â€”â€”â€”é react-redux çš„ connectå‡½æ•°
							connect(mapStateToProps,mapDispatchToProps)(UIç»„ä»¶)
								-mapStateToProps:æ˜ å°„çŠ¶æ€ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡
								-mapDispatchToProps:æ˜ å°„æ“ä½œçŠ¶æ€çš„æ–¹æ³•ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡
			(3).å¤‡æ³¨1ï¼šå®¹å™¨ç»„ä»¶ä¸­çš„storeæ˜¯é propsä¼ è¿›å»çš„ï¼Œè€Œä¸æ˜¯åœ¨å®¹å™¨ç»„ä»¶ä¸­ç›´æ¥å¼•å…¥
			(4).å¤‡æ³¨2ï¼šmapDispatchToPropsï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡


## 5.æ±‚å’Œæ¡ˆä¾‹_react-reduxä¼˜åŒ–
			(1).å®¹å™¨ç»„ä»¶å’ŒUIç»„ä»¶æ•´åˆä¸€ä¸ªæ–‡ä»¶
			(2).æ— éœ€è‡ªå·±ç»™å®¹å™¨ç»„ä»¶ä¼ é€’storeï¼Œç»™<App/>åŒ…è£¹ä¸€ä¸ª<Provider store={store}>å³å¯ã€‚
			(3).ä½¿ç”¨äº†react-reduxåä¹Ÿä¸ç”¨å†è‡ªå·±æ£€æµ‹reduxä¸­çŠ¶æ€çš„æ”¹å˜äº†ï¼Œå®¹å™¨ç»„ä»¶å¯ä»¥è‡ªåŠ¨å®Œæˆè¿™ä¸ªå·¥ä½œã€‚
			(4).mapDispatchToPropsä¹Ÿå¯ä»¥ç®€å•çš„å†™æˆä¸€ä¸ªå¯¹è±¡
			(5).ä¸€ä¸ªç»„ä»¶è¦å’Œreduxâ€œæ‰“äº¤é“â€è¦ç»è¿‡å“ªå‡ æ­¥ï¼Ÿ
							(1).å®šä¹‰å¥½UIç»„ä»¶---ä¸æš´éœ²
							(2).å¼•å…¥connectç”Ÿæˆä¸€ä¸ªå®¹å™¨ç»„ä»¶ï¼Œå¹¶æš´éœ²ï¼Œå†™æ³•å¦‚ä¸‹ï¼š
									connect(
										state => ({key:value}), //æ˜ å°„çŠ¶æ€
										{key:xxxxxAction} //æ˜ å°„æ“ä½œçŠ¶æ€çš„æ–¹æ³•
									)(UIç»„ä»¶)
							(4).åœ¨UIç»„ä»¶ä¸­é€šè¿‡this.props.xxxxxxxè¯»å–å’Œæ“ä½œçŠ¶æ€



## 6.æ±‚å’Œæ¡ˆä¾‹_react-reduxæ•°æ®å…±äº«ç‰ˆ
			(1).å®šä¹‰ä¸€ä¸ªPsersonç»„ä»¶ï¼Œå’ŒCountç»„ä»¶é€šè¿‡reduxå…±äº«æ•°æ®ã€‚
			(2).ä¸ºPersonç»„ä»¶ç¼–å†™ï¼šreducerã€actionï¼Œé…ç½®constantå¸¸é‡ã€‚
			(3).é‡ç‚¹ï¼šPersonçš„reducerå’ŒCountçš„Reducerè¦ä½¿ç”¨combineReducersè¿›è¡Œåˆå¹¶ï¼Œ
					åˆå¹¶åçš„æ€»çŠ¶æ€æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ï¼ï¼
			(4).äº¤ç»™storeçš„æ˜¯æ€»reducerï¼Œæœ€åæ³¨æ„åœ¨ç»„ä»¶ä¸­å–å‡ºçŠ¶æ€çš„æ—¶å€™ï¼Œè®°å¾—â€œå–åˆ°ä½â€ã€‚

## 7.æ±‚å’Œæ¡ˆä¾‹_react-reduxå¼€å‘è€…å·¥å…·çš„ä½¿ç”¨
			(1).yarn add redux-devtools-extension
			(2).storeä¸­è¿›è¡Œé…ç½®
					import {composeWithDevTools} from 'redux-devtools-extension'
					const store = createStore(allReducer,composeWithDevTools(applyMiddleware(thunk)))

## 8.æ±‚å’Œæ¡ˆä¾‹_react-reduxæœ€ç»ˆç‰ˆ
			(1).æ‰€æœ‰å˜é‡åå­—è¦è§„èŒƒï¼Œå°½é‡è§¦å‘å¯¹è±¡çš„ç®€å†™å½¢å¼ã€‚
			(2).reducersæ–‡ä»¶å¤¹ä¸­ï¼Œç¼–å†™index.jsä¸“é—¨ç”¨äºæ±‡æ€»å¹¶æš´éœ²æ‰€æœ‰çš„reducer

## 1. setState

### setStateæ›´æ–°çŠ¶æ€çš„2ç§å†™æ³•

```
	(1). setState(stateChange, [callback])------å¯¹è±¡å¼çš„setState
            1.stateChangeä¸ºçŠ¶æ€æ”¹å˜å¯¹è±¡(è¯¥å¯¹è±¡å¯ä»¥ä½“ç°å‡ºçŠ¶æ€çš„æ›´æ”¹)
            2.callbackæ˜¯å¯é€‰çš„å›è°ƒå‡½æ•°, å®ƒåœ¨çŠ¶æ€æ›´æ–°å®Œæ¯•ã€ç•Œé¢ä¹Ÿæ›´æ–°å(renderè°ƒç”¨å)æ‰è¢«è°ƒç”¨
					
	(2). setState(updater, [callback])------å‡½æ•°å¼çš„setState
            1.updaterä¸ºè¿”å›stateChangeå¯¹è±¡çš„å‡½æ•°ã€‚
            2.updaterå¯ä»¥æ¥æ”¶åˆ°stateå’Œpropsã€‚
            4.callbackæ˜¯å¯é€‰çš„å›è°ƒå‡½æ•°, å®ƒåœ¨çŠ¶æ€æ›´æ–°ã€ç•Œé¢ä¹Ÿæ›´æ–°å(renderè°ƒç”¨å)æ‰è¢«è°ƒç”¨ã€‚
æ€»ç»“:
		1.å¯¹è±¡å¼çš„setStateæ˜¯å‡½æ•°å¼çš„setStateçš„ç®€å†™æ–¹å¼(è¯­æ³•ç³–)
		2.ä½¿ç”¨åŸåˆ™ï¼š
				(1).å¦‚æœæ–°çŠ¶æ€ä¸ä¾èµ–äºåŸçŠ¶æ€ ===> ä½¿ç”¨å¯¹è±¡æ–¹å¼
				(2).å¦‚æœæ–°çŠ¶æ€ä¾èµ–äºåŸçŠ¶æ€ ===> ä½¿ç”¨å‡½æ•°æ–¹å¼
				(3).å¦‚æœéœ€è¦åœ¨setState()æ‰§è¡Œåè·å–æœ€æ–°çš„çŠ¶æ€æ•°æ®, 
					è¦åœ¨ç¬¬äºŒä¸ªcallbackå‡½æ•°ä¸­è¯»å–
```



------



## 2. lazyLoad

### è·¯ç”±ç»„ä»¶çš„lazyLoad

```js
	//1.é€šè¿‡Reactçš„lazyå‡½æ•°é…åˆimport()å‡½æ•°åŠ¨æ€åŠ è½½è·¯ç”±ç»„ä»¶ ===> è·¯ç”±ç»„ä»¶ä»£ç ä¼šè¢«åˆ†å¼€æ‰“åŒ…
	const Login = lazy(()=>import('@/pages/Login'))
	
	//2.é€šè¿‡<Suspense>æŒ‡å®šåœ¨åŠ è½½å¾—åˆ°è·¯ç”±æ‰“åŒ…æ–‡ä»¶å‰æ˜¾ç¤ºä¸€ä¸ªè‡ªå®šä¹‰loadingç•Œé¢
	<Suspense fallback={<h1>loading.....</h1>}>
        <Switch>
            <Route path="/xxx" component={Xxxx}/>
            <Redirect to="/login"/>
        </Switch>
    </Suspense>
```



------



## 3. Hooks

#### 1. React Hook/Hooksæ˜¯ä»€ä¹ˆ?

```
(1). Hookæ˜¯React 16.8.0ç‰ˆæœ¬å¢åŠ çš„æ–°ç‰¹æ€§/æ–°è¯­æ³•
(2). å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§
```

#### 2. ä¸‰ä¸ªå¸¸ç”¨çš„Hook

```
(1). State Hook: React.useState()
(2). Effect Hook: React.useEffect()
(3). Ref Hook: React.useRef()
```

#### 3. State Hook

```
(1). State Hookè®©å‡½æ•°ç»„ä»¶ä¹Ÿå¯ä»¥æœ‰stateçŠ¶æ€, å¹¶è¿›è¡ŒçŠ¶æ€æ•°æ®çš„è¯»å†™æ“ä½œ
(2). è¯­æ³•: const [xxx, setXxx] = React.useState(initValue)  
(3). useState()è¯´æ˜:
        å‚æ•°: ç¬¬ä¸€æ¬¡åˆå§‹åŒ–æŒ‡å®šçš„å€¼åœ¨å†…éƒ¨ä½œç¼“å­˜
        è¿”å›å€¼: åŒ…å«2ä¸ªå…ƒç´ çš„æ•°ç»„, ç¬¬1ä¸ªä¸ºå†…éƒ¨å½“å‰çŠ¶æ€å€¼, ç¬¬2ä¸ªä¸ºæ›´æ–°çŠ¶æ€å€¼çš„å‡½æ•°
(4). setXxx()2ç§å†™æ³•:
        setXxx(newValue): å‚æ•°ä¸ºéå‡½æ•°å€¼, ç›´æ¥æŒ‡å®šæ–°çš„çŠ¶æ€å€¼, å†…éƒ¨ç”¨å…¶è¦†ç›–åŸæ¥çš„çŠ¶æ€å€¼
        setXxx(value => newValue): å‚æ•°ä¸ºå‡½æ•°, æ¥æ”¶åŸæœ¬çš„çŠ¶æ€å€¼, è¿”å›æ–°çš„çŠ¶æ€å€¼, å†…éƒ¨ç”¨å…¶è¦†ç›–åŸæ¥çš„çŠ¶æ€å€¼
```


```js
export default function App() {
  const [visible, setVisible] = useState(true);

	// 5såéšè—ï¼Œä¼šè§¦å‘åˆ·æ–°
  setTimeout(() => {
    setVisible(false);
  }, 5000);

  return (
    <div>
      <h1>Hello StackBlitz!</h1>
      {visible && <p>Start editing to see some magic happen :)</p>}
    </div>
  );
}
```

æ³¨æ„ï¼š
- useStateæ–¹æ³•ä½¿ç”¨çš„æ˜¯è¦†ç›–çš„æ–¹å¼ï¼Œå› æ­¤åœ¨æ›´æ–°å¯¹è±¡ç±»å‹æ—¶ï¼Œåˆ‡è®°è¦åˆå¹¶æ—§çš„çŠ¶æ€ï¼Œå¦åˆ™æ—§çš„çŠ¶æ€ä¼šä¸¢å¤±ï¼Œ
- useStateä½¿ç”¨åï¼Œä¼šæ˜¯é¡µé¢é‡æ–°renderï¼Œå› ä¸ºå…¶å®å°±æ˜¯this.setStateçš„è¯­æ³•ç³–ã€‚

#### 4. Effect Hook

```
(1). Effect Hook å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ(ç”¨äºæ¨¡æ‹Ÿç±»ç»„ä»¶ä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­)
(2). Reactä¸­çš„å‰¯ä½œç”¨æ“ä½œ:
        å‘ajaxè¯·æ±‚æ•°æ®è·å–
        è®¾ç½®è®¢é˜… / å¯åŠ¨å®šæ—¶å™¨
        æ‰‹åŠ¨æ›´æ”¹çœŸå®DOM
(3). è¯­æ³•å’Œè¯´æ˜: 
        useEffect(() => { 
          // åœ¨æ­¤å¯ä»¥æ‰§è¡Œä»»ä½•å¸¦å‰¯ä½œç”¨æ“ä½œ
          return () => { // åœ¨ç»„ä»¶å¸è½½å‰æ‰§è¡Œ
            // åœ¨æ­¤åšä¸€äº›æ”¶å°¾å·¥ä½œ, æ¯”å¦‚æ¸…é™¤å®šæ—¶å™¨/å–æ¶ˆè®¢é˜…ç­‰
          }
        }, [stateValue]) // å¦‚æœæŒ‡å®šçš„æ˜¯[], å›è°ƒå‡½æ•°åªä¼šåœ¨ç¬¬ä¸€æ¬¡render()åæ‰§è¡Œ
    
(4). å¯ä»¥æŠŠ useEffect Hook çœ‹åšå¦‚ä¸‹ä¸‰ä¸ªå‡½æ•°çš„ç»„åˆ
        componentDidMount()
        componentDidUpdate()
    	componentWillUnmount() 
```

#### 5. Ref Hook

```
(1). Ref Hookå¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸­å­˜å‚¨/æŸ¥æ‰¾ç»„ä»¶å†…çš„æ ‡ç­¾æˆ–ä»»æ„å…¶å®ƒæ•°æ®
(2). è¯­æ³•: const refContainer = useRef()
(3). ä½œç”¨:ä¿å­˜æ ‡ç­¾å¯¹è±¡,åŠŸèƒ½ä¸React.createRef()ä¸€æ ·
```



------



## 4. Fragment

### ä½¿ç”¨

	<Fragment><Fragment>
	<></>

### ä½œç”¨

> å¯ä»¥ä¸ç”¨å¿…é¡»æœ‰ä¸€ä¸ªçœŸå®çš„DOMæ ¹æ ‡ç­¾äº†



<hr/>

## 5. Context

### ç†è§£

> ä¸€ç§ç»„ä»¶é—´é€šä¿¡æ–¹å¼, å¸¸ç”¨äºã€ç¥–ç»„ä»¶ã€‘ä¸ã€åä»£ç»„ä»¶ã€‘é—´é€šä¿¡

### ä½¿ç”¨

```js
1) åˆ›å»ºContextå®¹å™¨å¯¹è±¡ï¼š
	const XxxContext = React.createContext()  
	
2) æ¸²æŸ“å­ç»„æ—¶ï¼Œå¤–é¢åŒ…è£¹xxxContext.Provider, é€šè¿‡valueå±æ€§ç»™åä»£ç»„ä»¶ä¼ é€’æ•°æ®ï¼š
	<xxxContext.Provider value={æ•°æ®}>
		å­ç»„ä»¶
    </xxxContext.Provider>
    
3) åä»£ç»„ä»¶è¯»å–æ•°æ®ï¼š

	//ç¬¬ä¸€ç§æ–¹å¼:ä»…é€‚ç”¨äºç±»ç»„ä»¶ 
	  static contextType = xxxContext  // å£°æ˜æ¥æ”¶context
	  this.context // è¯»å–contextä¸­çš„valueæ•°æ®
	  
	//ç¬¬äºŒç§æ–¹å¼: å‡½æ•°ç»„ä»¶ä¸ç±»ç»„ä»¶éƒ½å¯ä»¥
	  <xxxContext.Consumer>
	    {
	      value => ( // valueå°±æ˜¯contextä¸­çš„valueæ•°æ®
	        è¦æ˜¾ç¤ºçš„å†…å®¹
	      )
	    }
	  </xxxContext.Consumer>
```

### æ³¨æ„

	åœ¨åº”ç”¨å¼€å‘ä¸­ä¸€èˆ¬ä¸ç”¨context, ä¸€èˆ¬éƒ½å®ƒçš„å°è£…reactæ’ä»¶



<hr/>


## 6. ç»„ä»¶ä¼˜åŒ–

### Componentçš„2ä¸ªé—®é¢˜ 

> 1. åªè¦æ‰§è¡ŒsetState(),å³ä½¿ä¸æ”¹å˜çŠ¶æ€æ•°æ®, ç»„ä»¶ä¹Ÿä¼šé‡æ–°render()
>
> 2. åªå½“å‰ç»„ä»¶é‡æ–°render(), å°±ä¼šè‡ªåŠ¨é‡æ–°renderå­ç»„ä»¶ ==> æ•ˆç‡ä½

### æ•ˆç‡é«˜çš„åšæ³•

>  åªæœ‰å½“ç»„ä»¶çš„stateæˆ–propsæ•°æ®å‘ç”Ÿæ”¹å˜æ—¶æ‰é‡æ–°render()

### åŸå› 

>  Componentä¸­çš„shouldComponentUpdate()æ€»æ˜¯è¿”å›true

### è§£å†³

	åŠæ³•1: 
		é‡å†™shouldComponentUpdate()æ–¹æ³•
		æ¯”è¾ƒæ–°æ—§stateæˆ–propsæ•°æ®, å¦‚æœæœ‰å˜åŒ–æ‰è¿”å›true, å¦‚æœæ²¡æœ‰è¿”å›false
	åŠæ³•2:  
		ä½¿ç”¨PureComponent
		PureComponenté‡å†™äº†shouldComponentUpdate(), åªæœ‰stateæˆ–propsæ•°æ®æœ‰å˜åŒ–æ‰è¿”å›true
		æ³¨æ„: 
			åªæ˜¯è¿›è¡Œstateå’Œpropsæ•°æ®çš„æµ…æ¯”è¾ƒ, å¦‚æœåªæ˜¯æ•°æ®å¯¹è±¡å†…éƒ¨æ•°æ®å˜äº†, è¿”å›false  
			ä¸è¦ç›´æ¥ä¿®æ”¹stateæ•°æ®, è€Œæ˜¯è¦äº§ç”Ÿæ–°æ•°æ®
	é¡¹ç›®ä¸­ä¸€èˆ¬ä½¿ç”¨PureComponentæ¥ä¼˜åŒ–



<hr/>


## 7. render props

### å¦‚ä½•å‘ç»„ä»¶å†…éƒ¨åŠ¨æ€ä¼ å…¥å¸¦å†…å®¹çš„ç»“æ„(æ ‡ç­¾)?

	Vueä¸­: 
		ä½¿ç”¨slotæŠ€æœ¯, ä¹Ÿå°±æ˜¯é€šè¿‡ç»„ä»¶æ ‡ç­¾ä½“ä¼ å…¥ç»“æ„  <AA><BB/></AA>
	Reactä¸­:
		ä½¿ç”¨children props: é€šè¿‡ç»„ä»¶æ ‡ç­¾ä½“ä¼ å…¥ç»“æ„
		ä½¿ç”¨render props: é€šè¿‡ç»„ä»¶æ ‡ç­¾å±æ€§ä¼ å…¥ç»“æ„, ä¸€èˆ¬ç”¨renderå‡½æ•°å±æ€§

### children props

	<A>
	  <B>xxxx</B>
	</A>
	{this.props.children}
	é—®é¢˜: å¦‚æœBç»„ä»¶éœ€è¦Aç»„ä»¶å†…çš„æ•°æ®, ==> åšä¸åˆ° 

### render props

	<A render={(data) => <C data={data}></C>}></A>
	Aç»„ä»¶: {this.props.render(å†…éƒ¨stateæ•°æ®)}
	Cç»„ä»¶: è¯»å–Aç»„ä»¶ä¼ å…¥çš„æ•°æ®æ˜¾ç¤º {this.props.data} 



<hr/>

## 8. é”™è¯¯è¾¹ç•Œ

#### ç†è§£ï¼š

é”™è¯¯è¾¹ç•Œï¼šç”¨æ¥æ•è·åä»£ç»„ä»¶é”™è¯¯ï¼Œæ¸²æŸ“å‡ºå¤‡ç”¨é¡µé¢

#### ç‰¹ç‚¹ï¼š

åªèƒ½æ•è·åä»£ç»„ä»¶ç”Ÿå‘½å‘¨æœŸäº§ç”Ÿçš„é”™è¯¯ï¼Œä¸èƒ½æ•è·è‡ªå·±ç»„ä»¶äº§ç”Ÿçš„é”™è¯¯å’Œå…¶ä»–ç»„ä»¶åœ¨åˆæˆäº‹ä»¶ã€å®šæ—¶å™¨ä¸­äº§ç”Ÿçš„é”™è¯¯

##### ä½¿ç”¨æ–¹å¼ï¼š

getDerivedStateFromErroré…åˆcomponentDidCatch

```js
// ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œä¸€æ—¦åå°ç»„ä»¶æŠ¥é”™ï¼Œå°±ä¼šè§¦å‘
static getDerivedStateFromError(error) {
    console.log(error);
    // åœ¨renderä¹‹å‰è§¦å‘
    // è¿”å›æ–°çš„state
    return {
        hasError: true,
    };
}

// å¦‚æœæŸä¸ªç»„ä»¶å®šä¹‰äº† componentDidCatchï¼Œé‚£ä¹ˆè¿™ä¸ªç»„ä»¶ä¸­æ‰€æœ‰çš„å­ç»„ä»¶åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œè¿™ä¸ª componentDidCatch å‡½æ•°å°±ä¼šè¢«è°ƒç”¨ã€‚
componentDidCatch(error, info) {
    // ç»Ÿè®¡é¡µé¢çš„é”™è¯¯ã€‚å‘é€è¯·æ±‚å‘é€åˆ°åå°å»
    console.log(error, info);
}

// componentDidCatch å¯ä»¥æ•è·å¼‚å¸¸ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼š
// 1 error â€”â€” æŠ›å‡ºçš„é”™è¯¯ã€‚
// 2 info â€”â€” å¸¦æœ‰ componentStack key çš„å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³ç»„ä»¶å¼•å‘é”™è¯¯çš„æ ˆä¿¡æ¯ã€‚

// componentDidCatchåŸç†åº”è¯¥å¾ˆå¥½ç†è§£ï¼Œå†…éƒ¨å¯ä»¥é€šè¿‡try{}catch(error){}æ¥æ•è·æ¸²æŸ“é”™è¯¯ï¼Œå¤„ç†æ¸²æŸ“é”™è¯¯ã€‚
try {
  //å°è¯•æ¸²æŸ“å­ç»„ä»¶
} catch (error) {
  // å‡ºç°é”™è¯¯ï¼ŒcomponentDidCatchè¢«è°ƒç”¨ï¼Œ
}
```

## 9. ç»„ä»¶é€šä¿¡æ–¹å¼æ€»ç»“

#### æ–¹å¼ï¼š

		propsï¼š
			(1).children props
			(2).render props
		æ¶ˆæ¯è®¢é˜…-å‘å¸ƒï¼š
			pubs-subã€eventç­‰ç­‰
		é›†ä¸­å¼ç®¡ç†ï¼š
			reduxã€dvaç­‰ç­‰
		conText:
			ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼

#### ç»„ä»¶é—´çš„å…³ç³»

		çˆ¶å­ç»„ä»¶ï¼šprops
		å…„å¼Ÿç»„ä»¶(éåµŒå¥—ç»„ä»¶)ï¼šæ¶ˆæ¯è®¢é˜…-å‘å¸ƒã€é›†ä¸­å¼ç®¡ç†
		ç¥–å­™ç»„ä»¶(è·¨çº§ç»„ä»¶)ï¼šæ¶ˆæ¯è®¢é˜…-å‘å¸ƒã€é›†ä¸­å¼ç®¡ç†ã€conText(ç”¨çš„å°‘)



## æ³¨æ„

- è¦æ¥å—reactçš„ä¸åŒï¼Œä¸è¦ä¸Šæ¥å°±å‘ç€vueæ”¹ï¼Œè¦æ€è€ƒ

### diff

- ä½¿ç”¨ç´¢å¼•ä½œä¸ºkeyï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè™šæ‹Ÿdomä¼šé‡å»ºï¼Œå¹¶ä¸èƒ½æœ‰æ•ˆåˆ©ç”¨ä¹‹å‰å·²ç»çº¯åœ¨çš„è™šæ‹Ÿdomï¼›ä¸»è¦é’ˆå¯¹é€†åºæ·»åŠ æˆ–é€†åºåˆ é™¤ç­‰ç ´åé¡ºåºçš„æ“ä½œä¼šå¼•å‘é”™è¯¯ã€‚
- å¦‚æœæ¶‰åŠåˆ°inputè¾“å…¥çš„å†…å®¹ï¼Œæ•°æ®ä¼šé”™ä¹±ã€‚

## è„šæ‰‹æ¶

### publicæ–‡ä»¶å¤¹

- reactåˆ›å»ºçš„é¡¹ç›®è‡ªåŠ¨è®¾ç½®ä¸ºgitä»“åº“äº†ï¼Œè¿˜å†™äº†.gitignore
- %PUBLIC_URL%ä»£è¡¨publicæ–‡ä»¶å¤¹çš„è·¯å¾„
- `<meta name="theme-color" content="#000000" />`ä»…ç”¨äºé…ç½®æµè§ˆå™¨é¡µç­¾+åœ°å€æ çš„é¢œè‰²ï¼ˆä»…æ”¯æŒå®‰å“æ‰‹æœºæµè§ˆå™¨ï¼‰
- `<link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />`ç”¨äºå°†æŒ‡å®šç½‘é¡µæ·»åŠ åˆ°æ¡Œé¢ä¸Šçš„å›¾æ ‡
- `<link rel="manifest" href="%PUBLIC_URL%/manifest.json" />` webåº”ç”¨ä¹Ÿå¯ä»¥é€šè¿‡åŠ ä¸ªå£³å˜æˆå®‰å“æˆ–iosåº”ç”¨ï¼Œè€Œå¯¹åº”çš„é…ç½®æ–‡ä»¶å°±æ˜¯é€šè¿‡manifest.json
- robots.textæ–‡ä»¶æ˜¯ç»™çˆ¬è™«ç”¨çš„ï¼ŒæŒ‡ç¤ºçˆ¬è™«å“ªäº›å†…å®¹å¯ä»¥çˆ¬å–ï¼Œå“ªäº›ä¸å¯ä»¥ã€‚å…¶å®å°±æ˜¯çˆ¬è™«åè®®

### srcæ–‡ä»¶å¤¹

- App.jsï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶ï¼Œè¿˜å¯ä»¥æ˜¯jsxï¼Œreactä¼šåŠ è½½.jså’Œ.jsxä¸¤ç§èµ„æºæ–‡ä»¶
- App.cssï¼Œæ ·å¼æ–‡ä»¶
- index.css æ˜¯é€šç”¨çš„æ ·å¼ï¼Œä¸ºäº†é˜²æ­¢å„ç»„ä»¶æ ·å¼å†²çªï¼Œå¯ä»¥é‡‡ç”¨æ¨¡å—åŒ–çš„æ–¹å¼ï¼Œindex.module.ccsï¼Œç„¶åimport cssModule1 from 'index.module.ccs'; ä½¿ç”¨æ—¶å°±æ˜¯ç›´æ¥cssModule1.testå³å¯ã€‚
- index.js æ–‡ä»¶ æ˜¯webpackå…¥å£æ–‡ä»¶
- `<React.StrictMode>`ä¸»è¦ç”¨æ¥æ£€æŸ¥ç»„ä»¶é‡Œé¢çš„ä¸€äº›è¯­æ³•æ˜¯å¦ç¬¦åˆreactæœ€æ–°çš„è¯­æ³•ã€‚
- reportWebVitalsæ˜¯ä½¿ç”¨web-vitalsè¿™ä¸ªåº“ï¼Œæ¥æ£€æµ‹é¡µé¢æ€§èƒ½çš„
- setUpTests.jsæ˜¯ç”¨äºåšç»„ä»¶æµ‹è¯•ï¼Œåˆ©ç”¨jest-dom


- ES7 React/Redux/GraphQL/React-Native snippets è¿™ä¸ªæ’ä»¶æä¾›å¾ˆå¤šä»£ç ç‰‡æ®µï¼Œè¦å–„äºä½¿ç”¨

### todoList

- checkoutboxï¼Œé»˜è®¤é€‰ä¸­ç”¨defaultCheckedï¼Œè¿™æ ·åç»­å°±è¿˜å¯ä»¥æ›´æ”¹ï¼Œå¦‚æœä½¿ç”¨checkedå±æ€§ï¼Œåˆ™éœ€è¦å€ŸåŠ©onChangeäº‹ä»¶ï¼›ä½†éœ€è¦æ³¨æ„defaultCheckedåªä¼šåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æœ‰æ•ˆï¼Œåç»­çŠ¶æ€å˜æ›´äº†ï¼Œè¿˜æ˜¯éœ€è¦ä»checkedå±æ€§é‡Œè·å–å€¼ã€‚ç±»ä¼¼çš„è¿˜æœ‰defaultValueå’Œvalue
- å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œåœ¨vueä¸­ä¸€èˆ¬ä¸­emitï¼Œå…¶å®ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡propså°†çˆ¶ç»„ä»¶é‡Œçš„æ–¹æ³•ä¼ è¿›æ¥ï¼Œç„¶ååœ¨å­ç»„ä»¶é‡Œè°ƒç”¨ï¼Œå› ä¸ºæ˜¯å¼•ç”¨ç±»å‹ï¼Œçˆ¶ç»„ä»¶é‡Œä¹Ÿå°±æ‰§è¡Œäº†ï¼Œä»è€Œæ‹¿åˆ°æ•°æ®
- æ—¶é—´æˆ³æœ‰å¯èƒ½é‡å¤ï¼Œå¯ä»¥åˆ©ç”¨uuiåº“ï¼Œä½†æ¯”è¾ƒå¤§ï¼Œå¯ä»¥ä½¿ç”¨æ›´å°çš„nanoid
- å¼•å…¥ä¸œè¥¿çš„è§„èŒƒï¼Œç¬¬ä¸‰æ–¹çš„å°½é‡å¾€ä¸Šé ï¼Œè‡ªå·±çš„æ¨¡å—å¾€åé ï¼Œæ ·å¼æ”¾åœ¨æœ€åã€‚
- çŠ¶æ€åœ¨å“ªä¸ªç»„ä»¶é‡Œï¼Œæ“ä½œçŠ¶æ€çš„æ–¹æ³•ä¹Ÿåœ¨å“ªä¸ªç»„ä»¶é‡Œ
- åœ¨reactä¸­ç›´æ¥ä½¿ç”¨confirmç±»çš„æ–¹æ³•æ—¶ï¼Œå¯èƒ½å‡ºç°è­¦å‘Šï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨window.confirm

### ajaxè¯·æ±‚

- axiosä¹Ÿæ˜¯å°è£…çš„XMLHttpRequestï¼Œä½†æœ‰äº†Promiseçš„ç‰ˆæœ¬ã€‚
- feHelper chromeæ’ä»¶ï¼Œå¯ä»¥å°†åå°response.sendè¿”å›çš„jsonæ•°æ®è‡ªåŠ¨æ ¼å¼åŒ–åœ¨æµè§ˆå™¨çª—å£ä¸Šï¼Œä¸ç”¨åœ¨å¤åˆ¶åˆ°json.cné‡Œäº†ã€‚
- åœ¨reactä¸­è§£å†³è·¨åŸŸçš„ä¸€ç§ç®€å•æ–¹å¼ï¼Œä»£ç†ï¼Œåœ¨package.jsoné‡Œå¢åŠ ä¸€è¡Œï¼š"proxy": "localhost:port"å°±å¯ä»¥äº†ã€‚æ¯”å¦‚æœ¬åœ°expressæœåŠ¡å™¨å¼€å¯ä¸€ä¸ª3000ç«¯å£ï¼Œç„¶ååœ¨5000ç«¯å£çš„å‰ç«¯æœåŠ¡ä¸Šè¯·æ±‚3000è¿™ä¸ªè‚¯å®šè·¨åŸŸï¼Œä½†å¦‚æœå¢åŠ ä¸€ä¸ª"proxy": "localhost:5000"ï¼Œåˆ™è¯·æ±‚å…ˆä¼šç»è¿‡æœ¬åœ°é™æ€æœåŠ¡å™¨å¤„ç†ï¼Œä¹Ÿå°±æ˜¯3000ç«¯å£çš„é™æ€æœåŠ¡(æ¯”å¦‚å¯ä»¥è·å–index.html)ï¼›å¦‚æœ3000ç«¯å£çš„å‰ç«¯æœåŠ¡æ²¡æœ‰ï¼Œåˆ™ä¼šè¯·æ±‚5000ç«¯å£ï¼Œä»è€Œç»•è¿‡äº†è·¨åŸŸã€‚ä¹Ÿå°±æ˜¯ä¸­é—´ä»£ç†ã€‚ã€‚ã€‚ç¼ºç‚¹æ˜¯åªèƒ½é…ç½®ä¸€ä¸ªåç«¯åœ°å€ã€‚
- å…¶å®ä¸Šé¢çš„proxyåªæ˜¯http-proxy-middleçš„ç®€å†™å½¢å¼ã€‚å› æ­¤å¯ä»¥åœ¨srcé‡Œæ–°å¢ä¸€ä¸ªsetupProxy.jsæ–‡ä»¶ï¼Œå¼•å…¥è¿™ä¸ªåº“ï¼Œç„¶ååŒ¹é…è§„åˆ™è½¬å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨ã€‚æ³¨æ„è¿™ä¸ªæ–‡ä»¶åä¸èƒ½æ”¹ï¼Œæ˜¯reactè‡ªåŠ¨å»æ‰¾çš„æ–‡ä»¶åï¼Œä¸“é—¨ç”¨æ¥è®¾ç½®ä»£ç†ã€‚
- changeOriginçš„ä½œç”¨ï¼Œæ˜¯æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­hostå­—æ®µçš„å€¼ã€‚å…¶å®æ˜¯é˜²æ­¢åç«¯æœåŠ¡å™¨å¯¹å‰ç«¯çš„hostæœ‰æ ¡éªŒï¼Œå¼€æ˜¯å¦é€šè¿‡æºç«™è¿˜æ˜¯ä»£ç†æœåŠ¡å™¨å‘å‡ºæ¥çš„è¯·æ±‚ã€‚
- pathRewriteçš„ä½œç”¨æ˜¯å…ˆåŒ¹é…å¸¦æœ‰xxxå‰ç¼€çš„è·¯å¾„ï¼ŒåŒ¹é…åˆ°åï¼Œå†å»æ‰å‰ç¼€ï¼Œå› ä¸ºåç«¯åœ°å€ä¸Šå¯èƒ½å°±æ²¡æœ‰è¿™ä¸ªå‰ç¼€ã€‚
- è§£æ„èµ‹å€¼è¿˜å¯ä»¥è¿ç»­ä»å­å¯¹è±¡é‡Œç»§ç»­è§£æ„å¦‚ä¸‹ï¼šconst { a: { aa: newAa }} = thisï¼Œå°±æ˜¯è·å–this.a.aaï¼ŒåŒæ—¶é‡å‘½åä¸ºäº†newAa
- åœ¨reactä¸­å¤šç§åœºæ™¯ä¸‹ï¼Œå°±éœ€è¦ä¸‰å…ƒè¿ç®—ç¬¦äº†ã€‚

### å…„å¼Ÿç»„ä»¶é€šä¿¡

- è®¢é˜…å‘å¸ƒï¼Œåˆ©ç”¨PubSubJsè¿™ä¸ªåº“
- è¿˜å¯ä»¥ä½¿ç”¨ros???
- axios
- fetch,xhréƒ½æ˜¯åº•å±‚çš„å®ç°ï¼Œfetchæ”¯æŒpromiseï¼Œä½†å¯èƒ½æœ‰å…¼å®¹æ€§ï¼Œå…³æ³¨åˆ†ç¦»çš„æ€æƒ³ã€‚

## è·¯ç”±

### histroy

- å¯ä»¥å€ŸåŠ©histroyè¿™ä¸ªåº“ï¼Œ

### react-router

### react-router-dom

- å®¶é‡Œä¹°çš„å°ç±³æˆ–åä¸ºç›’å­å°±æ˜¯è·¯ç”±å™¨ï¼Œç„¶åè·¯ç”±å™¨åé¢çš„ç½‘çº¿æ¥å£å°±å¯ä»¥ç†è§£ä¸ºè·¯ç”±ã€‚
- å°è®°ä¸­æ–‡ï¼Œæ•´åˆå¾ˆå¤šå®˜ç½‘æ–‡æ¡£çš„ä¸­æ–‡ç‰ˆæœ¬
- Linkç›¸å½“äºåŸç”Ÿçš„aï¼Œè¿™äº›Linkæ ‡ç­¾éœ€è¦ç”¨BrowserRouterç­‰ç»„ä»¶åŒ…æ‹¬æ‰è¡Œã€‚ä½†Linkæ²¡æœ‰é«˜äº®æ•ˆæœï¼Œå¯ä»¥æ”¹ä¸ºNavLinkï¼Œè¿˜å¯ä»¥é€šè¿‡activeClassNameæ¥è‡ªå®šä¹‰é«˜äº®æ•ˆæœ
- BrowserRouterï¼Œç›¸å½“äºè·¯ç”±å™¨ï¼Œé‡Œé¢å…·ä½“çš„Linkç›¸å½“äºè·³è½¬é“¾æ¥ï¼Œè€ŒRouteç›¸å½“äºå…·ä½“çš„è·¯ç”±ç»„ä»¶ã€‚è¿™äº›éƒ½å¿…é¡»åŒ…è£¹åœ¨åŒä¸€ä¸ªè·¯ç”±å™¨BroswerRouter(æˆ–è€…HashRouter)ä¸‹ï¼Œå…¶å®ç›¸å½“äºvueä¸­çš„router-viewï¼ŒåŒ…æ‹¬ä¸‹ä¸»åº”ç”¨ã€‚
- hashæ¨¡å¼çš„è·¯ç”±ï¼Œåœ¨#å·åé¢çš„èµ„æºï¼Œåç«¯æœåŠ¡å™¨æ˜¯è·å–ä¸åˆ°çš„ã€‚
- è·¯ç”±ç»„ä»¶`<Route></Route>`å…¶å®å°±æ˜¯æ¯ä¸ªè·¯ç”±åŒ¹é…å‡ºæ¥çš„componentï¼Œè·¯ç”±å™¨ä¼šç»™è·¯ç”±ç»„ä»¶ä¼ é€’histroy,locationï¼Œmatchç­‰ç›¸å…³çš„ä¿¡æ¯ï¼Œåç»­å¯ä»¥åœ¨ç»„ä»¶constructoré‡Œæ‰“å°æµ‹è¯•ã€‚
- æ ‡ç­¾ä½“å†…éƒ¨çš„å€¼æ˜¯ä½œä¸ºprops.childrenä¼ åˆ°å­ç»„ä»¶é‡Œçš„ã€‚
- ä¸€ä¸ªpathå¯¹åº”å¤šä¸ªç»„ä»¶ï¼Œåˆ™å¤šä¸ªç»„ä»¶éƒ½ä¼šå±•ç¤ºï¼›æŒ‰ç†è¯´åŒ¹é…å®Œä¸€ä¸ªåï¼Œåæ¥çš„å°±ä¸åº”è¯¥å†å±•ç¤ºäº†ã€‚å› æ­¤å¯ä»¥å€ŸåŠ©  react-router-domé‡Œçš„Switchç»„ä»¶ï¼Œå°±åªå±•ç¤ºåŒ¹é…çš„ç¬¬ä¸€ä¸ªè·¯ç”±ç»„ä»¶ã€‚
- åœ¨reactä¸­ï¼Œå¦‚æœä½¿ç”¨histroyæ¨¡å¼ï¼ŒåŒæ—¶index.htmlé‡Œé¢å¼•å…¥çš„èµ„æºè·¯å¾„æ˜¯ç›¸å¯¹è·¯å¾„æ—¶ï¼Œåœ¨é»˜å†™é¡µé¢åˆ·æ–°æ—¶ï¼Œè¿™ä¸ªèµ„æºå¯èƒ½åŠ è½½ä¸æˆåŠŸã€‚ã€‚ã€‚å› ä¸ºè·¯å¾„é”™äº†ï¼Œçœ‹ä¸‹è¿”å›çš„èµ„æºå³å¯ã€‚ å¯ä»¥æ”¹ä¸ºç»å¯¹ï¼Œæˆ–è€…ä½¿ç”¨%PUBLIC_URL%ï¼Œæˆ–è€…ä½¿ç”¨hashæ¨¡å¼ï¼Œå› ä¸ºhashæ¨¡å¼#å·åé¢çš„è·¯å¾„ä¸ä¼šå‘ç»™åç«¯æœåŠ¡å™¨  
- åŒ…å®‰è£…å™¨å°½é‡ä¸è¦æ··ç”¨å®‰è£…ï¼Œå®¹æ˜“ä¸¢å¤±èµ„æºï¼›ä½†å¯åŠ¨æ—¶æ— æ‰€è°“
- æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœç»™/a/b/cè·¯å¾„ï¼Œå¯ä»¥åŒ¹é…åˆ°/aè·¯ç”±ç»„ä»¶ï¼›å¦‚æœæƒ³ä¸¥æ ¼åŒ¹é…ï¼Œå¯ä»¥ä½¿ç”¨extraå¼€å¯ä¸¥æ ¼åŒ¹é…æ¨¡å¼ã€‚ä¹Ÿå°±æ˜¯é»˜è®¤çš„æ¨¡ç³ŠåŒ¹é…ï¼Œæ˜¯å¦å¼€å¯æ ¹æ®éœ€è¦ã€‚æ¯”å¦‚è¦åŒ¹é…äºŒçº§è·¯ç”±å°±ä¸è¦å¼€å¯extra
- è¿›å…¥é¦–é¡µï¼Œä¸€èˆ¬ä¼šé»˜è®¤ä¸€ä¸ªè·¯ç”±ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨`<Redirect to="/home">`é‡å®šå‘ç»„ä»¶ï¼Œä¸€èˆ¬å†™åœ¨è·¯ç”±ç»„ä»¶çš„æœ€ä¸‹æ–¹
- åŠ¨æ€è·¯ç”±ï¼Œparamsæ–¹å¼éœ€è¦å£°æ˜/a/:id/:nameæ¥æ”¶ï¼Œå¯¹åº”/a/12/josnè¿™ä¸ªè·¯ç”±ï¼Œå…¶å®ä¼šå°†{ id:12, name: 'josn' }æ”¾åœ¨ä¼ ç»™è·¯ç”±ç»„ä»¶çš„å¯¹è±¡çš„matchå±æ€§ä¸Šï¼Œå…¶å®ç±»ä¼¼vueä¸­çš„paramsä¼ å‚
- åŠ¨æ€è·¯ç”±ï¼Œsearchæ–¹å¼ï¼Œä¸éœ€è¦å£°æ˜å¦‚ä½•æ¥æ”¶ã€‚ç›´æ¥åœ¨props.loacation.searchä¸Šã€‚ä½†ä¸æ˜¯å¯¹è±¡æ¨¡å¼ï¼Œéœ€è¦è‡ªå·±æ•´ç†ï¼Œä¹Ÿå¯ä»¥å€ŸåŠ©querystringè¿™ä¸ªåº“ã€‚ï¼ˆä½†éœ€è¦æ³¨æ„è·å–åˆ°searchæ˜¯urlencodedç¼–ç çš„å­—ç¬¦ä¸²ï¼‰
- stateå‚æ•°ï¼Œä¸ä¼šåœ¨urlé‡Œæ˜¾ç¤ºï¼Œå¦‚ä¸‹ï¼š`<Link to={{ pathname: 'xxx', state: { a: 'xx' } }}></Link>`ï¼Œè¿™ç§æ–¹å¼ç±»ä¼¼åœ¨vueä¸­çš„this.$router.push({})ï¼Œè¿™ç§æ–¹å¼è™½ç„¶åœ¨urlé‡Œçœ‹ä¸åˆ°ï¼Œä½†åˆ·æ–°åä¾ç„¶å¯ä»¥ä¿ç•™å‚æ•°ï¼Œå› ä¸ºhistroyå¯¹è±¡ä¸Šä¸€ç›´ä¿ç•™ç€å‘¢ã€‚ä½†å¯¹äºhashRouteråˆ·æ–°åæ‚”å¯¼è‡´stateå‚æ•°ä¸¢å¤±ï¼Œå› ä¸ºæ²¡æœ‰åˆ©ç”¨histroyå¯¹è±¡
- push,replaceçš„æ–¹å¼ï¼Œé»˜è®¤æ˜¯pushæ¨¡å¼ï¼Œæƒ³replaceåªéœ€åœ¨ç»„ä»¶ä¸Šæ·»åŠ replaceå±æ€§å³å¯
- ä¸Šé¢çš„æ–¹å¼éƒ½æ˜¯éœ€è¦æ‰‹åŠ¨ç‚¹å‡»å¯¹åº”çš„ç»„ä»¶æ‰å¯ä»¥ï¼Œé‚£å¦‚æœè®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨5såè·³è½¬å‘¢ï¼Ÿè¿™å°±éœ€è¦ç¼–ç¨‹å¼å¯¼èˆªï¼Œå¯ä»¥å€ŸåŠ©props.histroy.pushä¸Šé¢çš„æ–¹æ³•å®ç°è·³è½¬ã€‚ä½†ä¸€èˆ¬ç»„ä»¶çš„propsä¸Šæ²¡æœ‰historyå¯¹è±¡ã€‚ã€‚ã€‚æ€ä¹ˆåŠå‘¢ï¼Ÿå¯ä»¥ç»™ä¸€èˆ¬ç»„ä»¶ç”¨withRouterç»„ä»¶åŒ…æ‹¬ä¸€ä¸‹ï¼Œå…¶å®å°±æ˜¯åœ¨ç»„ä»¶å¯¼å‡ºæ—¶ç”¨react-router-domé‡Œçš„withRouteråŒ…æ‹¬ä¸€ä¸‹ï¼Œè®©ä¸€èˆ¬ç»„ä»¶å…·å¤‡è·¯ç”±ç»„ä»¶æ‰€ç‰¹æœ‰çš„apiã€‚withRouteræ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›æ–°çš„ç»„ä»¶

## react uiåº“

- å›½å¤–ï¼Œmaterial-ui
- å›½å†…ï¼Œant-design

### 

- antdæ˜¯ä½¿ç”¨lesså†™çš„

- æŒ‰ä½optioné”®ï¼ŒåŒå‡»å•è¯å¯ä»¥é€‰æ‹©å¤šä¸ªï¼Œç„¶åå†å¤åˆ¶ï¼Œæ¯”è¾ƒæ–¹ä¾¿

## redux

- dvaç­‰ç­‰ä¹Ÿæ˜¯é›†ä¸­å¼ç®¡ç†

### reduxæ˜¯ä»€ä¹ˆ

- ä¸“é—¨åšçŠ¶æ€ç®¡ç†çš„jsåº“ï¼Œä½†ä¸ä»…ä»…æ˜¯æœåŠ¡äºreact
- ä½†å¤šæ•°æƒ…å†µä¸‹ä¸reacté…åˆä½¿ç”¨
- é›†ä¸­å¼ç®¡ç†reactåº”ç”¨ä¸­å¤šä¸ªç»„ä»¶å…±äº«çš„çŠ¶æ€

- è¯»å–reduxçš„å€¼ï¼Œstore.getState();
- å½“stateé‡Œçš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéœ€è¦store.subscribe(() => { this.setState() })
- å¦‚æœå¤šä¸ªç»„ä»¶éƒ½éœ€è¦è®¢é˜…äº‹ä»¶ï¼Œå¯ä»¥å°†storeçš„è®¢é˜…æ”¾åœ¨index.jsxé‡Œäº†ã€‚ è¿™æ ·ä»»ä½•ä¸€ä¸ªç»„ä»¶å¼•èµ·storeçš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œéƒ½ä¼šè§¦å‘è®¢é˜…é‡Œçš„å›è°ƒã€‚ä»è€Œè§¦å‘ä»æ–°æ¸²æŸ“ã€‚ã€‚ã€‚ä¸ç”¨è€ƒè™‘æ•ˆç‡é—®é¢˜ï¼Œå› ä¸ºæœ‰diff
- reduxåªè´Ÿè´£æ•°æ®çš„ç®¡ç†ï¼Œé¡µé¢çš„é‡æ–°æ¸²æŸ“éœ€è¦è‡ªå·±æ¸²æŸ“ã€‚
- reduxå¯ä»¥æœ‰åŒæ­¥å’Œå¼‚æ­¥actionï¼Œå¼‚æ­¥actionè¿˜å¾—å¿…é¡»å€ŸåŠ©reactä¸­çš„applyMiddlewareä»¥åŠredux-thunkï¼Œã€‚ã€‚ã€‚å¼‚æ­¥actionçš„å…¥å‚æ˜¯dispatch

### react-redux

- react-reduxæ˜¯å®˜æ–¹å‡ºçš„reduxï¼Œç›®çš„å°±æ˜¯æ›´èˆ’æœçš„ç”¨reduxï¼Œä¹‹å‰çš„reduxå¹¶ä¸æ˜¯å®˜æ–¹å‡ºçš„ã€‚ 

react-reduxçš„æ¨¡å‹å›¾ï¼š

- æ‰€æœ‰çš„uiç»„ä»¶éƒ½åº”è¯¥è¢«å®¹å™¨ç»„ä»¶åŒ…è£¹ã€‚
- å®¹å™¨ç»„ä»¶æ‰æ˜¯çœŸæ­£ä¸reduxæ‰“äº¤é“çš„ï¼Œé‡Œé¢å¯ä»¥éšæ„çš„ä½¿ç”¨reduxçš„api
- uiç»„ä»¶ä¸­ä¸èƒ½ä½¿ç”¨ä»»ä½•reduxçš„api
- å®¹å™¨ç»„ä»¶ä¼šä¼ ç»™uiç»„ä»¶ä¸€äº›çŠ¶æ€æˆ–æ–¹æ³•
- uiç»„ä»¶å…¶å®å°±æ˜¯çˆ¶å®¹å™¨ç»„ä»¶æ¥æ”¶propsè¿›è€Œå±•ç¤º

- å®¹å™¨ç»„ä»¶å¹¶ä¸æ˜¯æˆ‘ä»¬ç¼–å†™çš„æ™®é€šç»„ä»¶ï¼Œè€Œæ˜¯é€šè¿‡ç¬¬ä¸‰æ–¹åº“react-reduxåˆ›å»ºï¼›å¯ä»¥ç†è§£ä¸ºå®¹å™¨ç»„ä»¶å°±æ˜¯ä¸€ä¸ªæ¡¥æ¢
- æ¡¥æ¢è¿æ¥çš„ä¸¤ä¾§åˆ†åˆ«æ˜¯uiç»„ä»¶å’Œstoreï¼Œ
- ç”¨react-reduxä¸­çš„connectå‡½æ•°å…³è”uiç»„ä»¶å’Œstore
- react-reduxçš„æ€æƒ³æ˜¯è¿æ¥ï¼Œè€Œä¸æ˜¯ä¹‹å‰å¸¸è§„çˆ¶å­ç»„ä»¶çš„åŒ…è£¹ã€‚ã€‚ã€‚å¯èƒ½è¿™æ˜¯ä¸ºå‡½æ•°å¼ç¼–ç¨‹å¼€å¯äº†å¤§é—¨å§ã€‚
- ä½¿ç”¨äº†react-reduxåï¼Œä¹Ÿä¸ç”¨åœ¨æ‰‹åŠ¨æ£€æµ‹storeçš„å˜åŒ–è¿›è€Œæ›´æ–°é¡µé¢äº†ã€‚ã€‚ã€‚åš“åš“æ“¦ï¼Œå°è£…çš„å¤Ÿç‹ ã€‚ï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä½•ä¸è‡ªå·±åˆ›å»ºå®¹å™¨ç»„ä»¶çš„åŸå› å§ï¼Œå› ä¸ºconnectå‡½æ•°å®ç°äº†å¤ªå¤šçš„åŠŸèƒ½ï¼‰
- å¦‚æœä¸æƒ³æ¯ä¸ªéƒ½ä¼ åˆ°å­ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨react-reduxçš„providerç»„ä»¶ï¼Œåªéœ€å°†ä¼ ç»™å­ç»„ä»¶çš„å¯¹è±¡ä¼ ç»™providerå°±è¡Œã€‚
- reduxerè¦æ±‚é‡Œé¢çš„æ“ä½œæ˜¯çº¯å‡½æ•°é€»è¾‘ï¼Œå¦‚æœé‡‡ç”¨shiftæˆ–pushè¿™ç§æ”¹å˜æ•°ç»„çš„æ–¹å¼ï¼Œå°±ä¸æ˜¯çº¯å‡½æ•°ï¼Œå› ä¸ºæ”¹å˜äº†åŸæ•°ç»„ã€‚
- reduxè¿˜æœ‰å¯¹åº”çš„è°ƒè¯•å·¥å…·ï¼šRedux DevToolsï¼Œä½†è¿˜éœ€è¦é…åˆå¦å¤–ä¸€ä¸ªåº“redux-devtools-extensionï¼›åˆ©ç”¨è¿™ä¸ªå¼€å‘å·¥å…·å°±å¯ä»¥å®ç°æ—¶é—´æ—…è¡Œäº†ï¼Œç‰›é€¼å•Š
- ç–¯ç‹‚å¥—å¨ƒ
- å¯åŠ¨æœåŠ¡è¿˜å¯ä»¥å€ŸåŠ©ä¸€ä¸ªserveåº“
- reactä¸­çš„lazyå®ç°è·¯ç”±ç»„ä»¶æ‡’åŠ è½½ï¼Œå½“ç½‘é€Ÿå¾ˆæ…¢æ—¶ï¼Œéœ€è¦ç”¨suspenseç»„ä»¶å…œåº•ï¼Œå…¶å®å°±ç›¸å½“äºè¿‡æ¸¡é˜¶æ®µçš„å±•ç¤º

### hooks

### å¤šçº§è·¯ç”±

- ç‚¹å‡»ä¸€ä¸ªé“¾æ¥ï¼Œreactçš„åŒ¹é…é¡ºåºæ˜¯ä»æœ€å¼€å§‹æ³¨å†Œçš„è·¯ç”±å¼€å§‹åŒ¹é…ï¼Œæ­¤æ—¶å°±éœ€è¦çˆ¶ç»„ä»¶çš„æ¨¡ç³ŠåŒ¹é…ã€‚ã€‚ã€‚

## ä¸€äº›ç‚¹

```js
function Index({ offset }){
    const card  = React.useRef(null)
    React.useEffect(()=>{
       card.current.style.left = offset
    },[])
    return <div className='box' >
        <div className='card custom' ref={card}   >ã€Š Reactè¿›é˜¶å®è·µæŒ‡å— ã€‹</div>
    </div>
}

export default function Home({ offset = '300px' }){
   const [ isRender , setRender ] = React.useState(false)
   return <div>
       { isRender && <Index offset={offset}  /> }
       <button onClick={ ()=>setRender(true) } > æŒ‚è½½</button>
   </div>
}
```

useEffect çš„ç¬¬ä¸€ä¸ªå‚æ•° createï¼Œ**é‡‡ç”¨çš„å¼‚æ­¥è°ƒç”¨çš„æ–¹å¼**ï¼Œé‚£ä¹ˆé—ªç°å°±å¾ˆå¥½ç†è§£äº†ï¼Œåœ¨ç‚¹å‡»æŒ‰é’®ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆæ‰§è¡Œå‡½æ•°ç»„ä»¶renderï¼Œç„¶åcommitæ›¿æ¢çœŸå®domèŠ‚ç‚¹,ç„¶åæµè§ˆå™¨ç»˜åˆ¶å®Œæ¯•ã€‚æ­¤æ—¶æµè§ˆå™¨å·²ç»ç»˜åˆ¶äº†ä¸€æ¬¡ï¼Œç„¶åæµè§ˆå™¨æœ‰ç©ºä½™æ—¶é—´æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œæ‰€ä»¥æ‰§è¡Œäº†createï¼Œä¿®æ”¹äº†å…ƒç´ çš„ä½ç½®ä¿¡æ¯ï¼Œå› ä¸ºä¸Šä¸€æ¬¡å…ƒç´ å·²ç»ç»˜åˆ¶ï¼Œæ­¤æ—¶åˆä¿®æ”¹äº†ä¸€ä¸ªä½ç½®ï¼Œæ‰€ä»¥æ„Ÿåˆ°é—ªç°çš„æ•ˆæœï¼Œæ­¤æ¡ˆå·²ç ´ã€‚ï¼Œ

é‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆæ ·è§£å†³é—ªç°çš„ç°è±¡å‘¢ï¼Œé‚£å°±æ˜¯ React.useLayoutEffect ï¼ŒuseLayoutEffectçš„ createæ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥æµè§ˆå™¨ç»˜åˆ¶ä¸€æ¬¡ï¼Œç›´æ¥æ›´æ–°äº†æœ€æ–°çš„ä½ç½®ã€‚


- åœ¨vueä¸­æ˜¾ç¤ºå’Œéšè—ä¸€ä¸ªç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨v-ifæˆ–è€…v-showï¼Œä½†åœ¨reactä¸­ï¼Œå› ä¸ºæ²¡æœ‰æ¨¡æ¿ï¼Œå› æ­¤å½“ä¸ºfalseæ—¶ï¼Œéœ€è¦è¿”å›nullæ‰è¡¨ç¤ºéšè—ç»„ä»¶ã€‚
- react hooksçš„ç”±æ¥ï¼ŒHook æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥**è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§**ã€‚
  - åœ¨ç»„ä»¶ä¹‹é—´å¤ç”¨çŠ¶æ€é€»è¾‘å¾ˆéš¾
  - å¤æ‚ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£(æ¯”å¦‚åˆ†æ•£åœ¨å„ä¸ªç”Ÿå‘½å‘¨æœŸé‡Œçš„é€»è¾‘æˆ–çŠ¶æ€ç­‰ç­‰)
  - classçš„è¡Œä¸ºå¤æ€ªï¼Œæ¯”å¦‚thisç»‘å®šï¼Œå‹ç¼©æ•ˆæœå·®ç­‰

ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼ŒHook ä½¿ä½ åœ¨é class çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æ›´å¤šçš„ React ç‰¹æ€§ã€‚å…¶å®è¯´ç™½äº†ï¼Œhookçš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³classç»„ä»¶çš„ä¸€äº›ç—›ç‚¹ã€‚

Hook æ˜¯ä¸€äº›å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶é‡Œâ€œé’©å…¥â€ React state åŠç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§çš„å‡½æ•°ã€‚Hook ä¸èƒ½åœ¨ class ç»„ä»¶ä¸­ä½¿ç”¨
- useEffect hookçš„æ‰§è¡Œæ—¶æœºå®åœ¨æ¸²æŸ“å®Œæˆåï¼Œæœ‰ç‚¹ç±»ä¼¼vueä¸­çš„nextTickã€‚å¦‚æœæƒ³åœ¨æ¸²æŸ“å‰æ‰§è¡Œï¼Œåˆ™éœ€è¦ä½¿ç”¨useLayoutEffectï¼›å½“ä½¿ç”¨useEffectäº§ç”Ÿå‰¯ä½œç”¨åï¼Œæƒ³è¦æ¸…é™¤è¿™ä¸ªå‰¯ä½œç”¨ï¼Œåˆ™éœ€è¦è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°å†…éƒ¨å°±æ˜¯æ¸…é™¤å‰¯ä½œç”¨çš„é€»è¾‘ï¼ˆæ¯”å¦‚æ¸…é™¤å®šæ—¶å™¨ï¼‰
- å› ä¸ºhookä¸»è¦ç”¨åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œå‡½æ•°ç»„ä»¶æœ¬æ¥æ˜¯æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸæ¦‚å¿µçš„ï¼Œå¼•å…¥hookçš„åŸå› ä¹‹ä¸€ä¹Ÿå°±æ˜¯å¼•å…¥å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†åˆç¨æœ‰ä¸åŒï¼Œéœ€è¦æ³¨æ„hookä¸ç”Ÿå‘½å‘¨æœŸé’©å­çš„å¯¹åº”å…³ç³»ã€‚


- setStateå¯ä»¥æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå‚æ•°ä¸€æ˜¯æ—§çš„stateå¯¹è±¡ï¼Œå‚æ•°äºŒæ˜¯propså¯¹è±¡ï¼Œæ„å‘³ç€æ— æ³•ç›´æ¥æ‹¿åˆ°æ”¹å˜åçš„æ–°å€¼ã€‚
- åœ¨react ç±»ç»„ä»¶ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œéœ€è¦æ˜¾å¼çš„ç»‘å®šthisï¼Œå› ä¸ºthiså¹¶ä¸ä¼šç»§æ‰¿ï¼Œå¦å¤–ç±»ç»„ä»¶é‡Œçš„æ–¹æ³•ï¼Œé€šå¸¸éƒ½å¸Œæœ›å¼•ç”¨ç»„ä»¶çš„å½“å‰å®ä¾‹ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨bindæˆ–è€…ç›´æ¥å®šä¹‰ä¸€ä¸ªç®­å¤´å‡½æ•°ã€‚è¿˜å¯ä»¥åœ¨htmlå±æ€§ä¸Šä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œç®­å¤´å‡½æ•°çš„ä½œç”¨å°±æ˜¯ä»ä¸Šå±‚å¸¸è§„å‡½æ•°é‡Œè·å–thisã€‚ä½†è¿™ä¸ªæ¨¡å¼æœ‰ä¸ªé—®é¢˜ï¼šå°±æ˜¯ç»„ä»¶æ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™ï¼Œéƒ½ä¼šé‡æ–°åˆ›å»ºå‡½æ•°ï¼Œå¦‚æœå­ç»„ä»¶ä¾èµ–è¿™ä¸ªå‡½æ•°åˆ™ä¼šç›¸åº”çš„é‡æ–°æ¸²æŸ“ã€‚æ‰€ä»¥ä¼˜å…ˆå‰ä¸¤ç§æ–¹å¼ç»‘å®šthis

```js
// ç®­å¤´å‡½æ•°æ–¹å¼ï¼Œå¿…é¡»æ˜¾ç¤ºä¼ é€’äº‹ä»¶å¯¹è±¡eï¼Œå› ä¸ºç®­å¤´å‡½æ•°çš„å…¥å‚å…¶å®ç»§æ‰¿è‡³å¸¸è§„å‡½æ•°çš„å…¥å‚
// è¡Œå†…æ–¹å¼ç»‘å®šå‡½æ•°çš„å‚æ•°ä¸€å°±æ˜¯äº‹ä»¶å¯¹è±¡
<button onClick={(e) => this.deleteRow(id, e)}>Delete Row</button>
// ä¸‹é¢çš„æ–¹å¼å…¶å®ç­‰ä»·äºthis.deleteRow(id)ï¼Œè€Œä¸”äº‹ä»¶å¯¹è±¡é»˜è®¤åœ¨æœ€åä¸€ä½ä¼ å…¥
<button onClick={this.deleteRow.bind(this, id)}>Delete Row</button>

// ç»¼ä¸Šï¼šåœ¨reactä¸­ç»‘å®šçš„å‡½æ•°ï¼Œå…¶å®æ˜¯åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸åƒhtmlé‡Œç»‘å®šçš„æ˜¯å‡½æ•°çš„æ‰§è¡Œï¼Œå¦‚ä¸‹
<button onClick={activateLasers}>
  Activate Lasers
</button>

<button onclick="activateLasers()">
  Activate Lasers
</button>
```


- æˆ‘ä»¬å»ºè®®ä»ç»„ä»¶è‡ªèº«çš„è§’åº¦å‘½å propsï¼Œè€Œä¸æ˜¯ä¾èµ–äºè°ƒç”¨ç»„ä»¶çš„ä¸Šä¸‹æ–‡å‘½åã€‚
- componentDidMount() æ–¹æ³•ä¼šåœ¨ç»„ä»¶å·²ç»è¢«æ¸²æŸ“åˆ° DOM ä¸­åè¿è¡Œ;(componentDidCatchç”Ÿå‘½å‘¨æœŸå¯ä»¥æ•è·é”™è¯¯)
- åœ¨ React ä¸­å¦ä¸€ä¸ªä¸åŒç‚¹æ˜¯ä½ ä¸èƒ½é€šè¿‡è¿”å› false çš„æ–¹å¼é˜»æ­¢é»˜è®¤è¡Œä¸ºã€‚ä½ å¿…é¡»æ˜¾å¼çš„ä½¿ç”¨ preventDefault ã€‚
- React äº‹ä»¶ä¸åŸç”Ÿäº‹ä»¶ä¸å®Œå…¨ç›¸åŒã€‚å¦‚æœæƒ³äº†è§£æ›´å¤šï¼Œè¯·æŸ¥çœ‹ [SyntheticEvent](https://zh-hans.reactjs.org/docs/events.html) å‚è€ƒæŒ‡å—ã€‚


```js
class LoggingButton extends React.Component {
  handleClick() {
    console.log('this is:', this);
  }

  render() {
    // æ­¤è¯­æ³•ç¡®ä¿ `handleClick` å†…çš„ `this` å·²è¢«ç»‘å®šã€‚
    return (
      <button onClick={() => this.handleClick()}>
        Click me
      </button>
    );
  }
}
```
æ­¤è¯­æ³•é—®é¢˜åœ¨äºæ¯æ¬¡æ¸²æŸ“ LoggingButton æ—¶éƒ½ä¼šåˆ›å»ºä¸åŒçš„å›è°ƒå‡½æ•°ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†å¦‚æœè¯¥å›è°ƒå‡½æ•°ä½œä¸º prop ä¼ å…¥å­ç»„ä»¶æ—¶ï¼Œè¿™äº›ç»„ä»¶å¯èƒ½ä¼šè¿›è¡Œé¢å¤–çš„é‡æ–°æ¸²æŸ“ã€‚æˆ‘ä»¬é€šå¸¸å»ºè®®åœ¨æ„é€ å™¨ä¸­ç»‘å®šæˆ–ä½¿ç”¨ class fields è¯­æ³•æ¥é¿å…è¿™ç±»æ€§èƒ½é—®é¢˜ã€‚

```js
<button onClick={(e) => this.deleteRow(id, e)}>Delete Row</button>

<button onClick={this.deleteRow.bind(this, id)}>Delete Row</button>
```
åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼ŒReact çš„äº‹ä»¶å¯¹è±¡ e ä¼šè¢«ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ã€‚å¦‚æœé€šè¿‡ç®­å¤´å‡½æ•°çš„æ–¹å¼ï¼Œäº‹ä»¶å¯¹è±¡å¿…é¡»æ˜¾å¼çš„è¿›è¡Œä¼ é€’ï¼Œè€Œé€šè¿‡ bind çš„æ–¹å¼ï¼Œäº‹ä»¶å¯¹è±¡ä»¥åŠæ›´å¤šçš„å‚æ•°å°†ä¼šè¢«éšå¼çš„è¿›è¡Œä¼ é€’ã€‚




```js
function Mailbox(props) {
  const unreadMessages = props.unreadMessages;
  return (
    <div>
      <h1>Hello!</h1>
      {/* æ³¨æ„è¿™æ˜¯æ³¨é‡Šçš„æ ¼å¼ï¼Œå¦å¤–å°±æ˜¯æ³¨æ„ä¸‹é¢çš„å†™æ³• */}
      {unreadMessages.length > 0 &&
        <h2>
          You have {unreadMessages.length} unread messages.
        </h2>
      }
    </div>
  );
}

const messages = ['React', 'Re: React', 'Re:Re: React'];
ReactDOM.render(
  <Mailbox unreadMessages={messages} />,
  document.getElementById('root')
);
```

- åœ¨ç»„ä»¶çš„ render æ–¹æ³•ä¸­è¿”å› null å¹¶ä¸ä¼šå½±å“ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚è¿”å›nullå°±æ˜¯ä¸æ˜¾ç¤ºç»„ä»¶ï¼Œä½†ç”Ÿå‘½å‘¨æœŸé’©å­ä¾ç„¶ä¼šæ‰§è¡Œ

- è¿™é‡Œä½¿ç”¨äº† ES6 è®¡ç®—å±æ€§åç§°çš„è¯­æ³•æ›´æ–°ç»™å®šè¾“å…¥åç§°å¯¹åº”çš„ state å€¼

```js
this.setState({
  [name]: value
});
// ç­‰åŒ ES5:
var partialState = {};
partialState[name] = value;
this.setState(partialState);
```

- åœ¨å—æ§ç»„ä»¶ä¸ŠæŒ‡å®š value çš„ prop ä¼šé˜»æ­¢ç”¨æˆ·æ›´æ”¹è¾“å…¥ã€‚å¦‚æœä½ æŒ‡å®šäº† valueï¼Œä½†è¾“å…¥ä»å¯ç¼–è¾‘ï¼Œåˆ™å¯èƒ½æ˜¯ä½ æ„å¤–åœ°å°†value è®¾ç½®ä¸º undefined æˆ– nullã€‚

ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†è¿™ä¸€ç‚¹ã€‚ï¼ˆè¾“å…¥æœ€åˆè¢«é”å®šï¼Œä½†åœ¨çŸ­æ—¶é—´å»¶è¿Ÿåå˜ä¸ºå¯ç¼–è¾‘ã€‚ï¼‰

```js
// å…¶å®å°±æ˜¯vulueè®¾ç½®æ­»äº†ï¼Œæ‰€ä»¥æ”¹å˜ä¸äº†
ReactDOM.render(<input value="hi" />, mountNode);

setTimeout(function() {
    // ä½†å¦‚æœè®¾ç½®ä¸ºnullæˆ–undefinedåˆ™å¯ä»¥ç¼–è¾‘
  ReactDOM.render(<input value={null} />, mountNode);
}, 1000);
```

åœ¨reactä¸­è¿˜æœ‰ä¸€ç§éå—æ§ç»„ä»¶ï¼Œå…¶å®å°±æ˜¯vueä¸­çš„refï¼Œæ•°æ®æ”¹å˜åå…¶å®å­˜å‚¨åœ¨æœ¬èº«çš„domèŠ‚ç‚¹ä¸Šï¼Œå› æ­¤å–å€¼æ—¶ä¹Ÿå°±å¯ä»¥ç›´æ¥è·å–domèŠ‚ç‚¹ä¸Šçš„å€¼ã€‚

- è¯­ä¹‰åŒ–çš„ HTML æ˜¯æ— éšœç¢è¾…åŠ©åŠŸèƒ½ç½‘ç»œåº”ç”¨çš„åŸºç¡€ã€‚ åˆ©ç”¨å¤šç§ HTML å…ƒç´ æ¥å¼ºåŒ–æ‚¨ç½‘ç«™ä¸­çš„ä¿¡æ¯é€šå¸¸å¯ä»¥ä½¿æ‚¨ç›´æ¥è·å¾—æ— éšœç¢è¾…åŠ©åŠŸèƒ½ã€‚

- å…³äºåˆ†åŒ…ï¼šå½“ä½¿ç”¨ Babel æ—¶ï¼Œä½ è¦ç¡®ä¿ Babel èƒ½å¤Ÿè§£æåŠ¨æ€ import è¯­æ³•è€Œä¸æ˜¯å°†å…¶è¿›è¡Œè½¬æ¢ã€‚å¯¹äºè¿™ä¸€è¦æ±‚ä½ éœ€è¦ @babel/plugin-syntax-dynamic-import æ’ä»¶ã€‚

```js
// è¿™ç§è¯­æ³•ï¼Œwebpackå¹¶ä¸ä¼šé»˜è®¤æ‹†åˆ†åŒ…
import { add } from './math';
console.log(add(16, 26));

// ä½¿ç”¨ä¹‹åï¼š
// è¿™ç§åŠ¨æ€åŠ è½½ï¼Œå› ä¸ºæ˜¯å¼‚æ­¥åŠ è½½ï¼Œå› æ­¤å¿…é¡»æ‹†åˆ†åŒ…
import("./math").then(math => {
  console.log(math.add(16, 26));
});
```