## 一些点

### 如何监控页面白屏

首屏加载前的白屏时间，页面代码崩溃导致的整个页面不可用白屏，业务代码报错，导致spa页面没有渲染等。

一般要检测的是所有白屏状态，那么加载白屏时间可以通过first meaningful paint来判定，如果是想看页面突然崩溃了或者意外白屏的情况，可以使用MutationObserver，但算法性能需要考虑。

[白屏骨架屏检测](https://www.jianshu.com/p/3ee7f7fa63d2)

#### 客户端方式

在ios上等，会将页面马赛克化，然后分析里面的色块，如果白色占据大多数比例则视为白屏

#### 前端方式

业界也存在一些经典的白屏检测手段，梳理如下。

1. 检测页面关键DOM的是否渲染
2. 通用的DOM渲染监听
3. H5截图（canvas绘图）检测
4. native截图（容器截屏）检测
5. 利用performance.getEntries("paint")获取fp/fcp来感知渲染


其中，各方案的优缺点也比较明显，简述如下：
1. 基于dom的检测，优点是简单；缺点是通用型较差，缺乏业界认可的检测算法；
2. H5截图：优点是准确；缺点是需要借助canvas，性能有影响；
3. native截图：缺点是需要借助容器能力；
4. 利用浏览器performance API：缺点是兼容性不够好；

